{
    "sha": "e01f4bbbc310f4bb6486f153006763bd8707eeec",
    "files": [
        {
            "path": "lua/air-rework-t4.lua",
            "data": "-- NuttyB T4 Air rework\n-- Authors: BackBash\n-- https://github.com/nuttyb-community/nuttyb\n\ndo\n    local unitDefs = UnitDefs or {}\n    local merge = table.mergeInPlace or table.merge\n\n    local payload = {\n        customparams = {\n            i18n_en_humanname = 'Experimental Tyrannus',\n            i18n_en_tooltip = 'In dedication to our commander Tyrannus',\n        },\n        weapondefs = {\n            machinegun = {\n                accuracy = 400,\n                areaofeffect = 64,\n                avoidfriendly = false,\n                avoidfeature = false,\n                collidefriendly = false,\n                collidefeature = true,\n                beamtime = 0.09,\n                corethickness = 0.55,\n                duration = 0.09,\n                burst = 1,\n                burstrate = 0.1,\n                explosiongenerator = 'custom:genericshellexplosion-tiny-aa',\n                energypershot = 0,\n                falloffrate = 0,\n                firestarter = 50,\n                interceptedbyshieldtype = 4,\n                intensity = 2,\n                name = 'scav rapid fire plasma gun',\n                range = 1000,\n                reloadtime = 0.1,\n                weapontype = 'LaserCannon',\n                rgbcolor = '1 0 0',\n                rgbcolor2 = '1 1 1',\n                soundtrigger = true,\n                soundstart = 'tgunshipfire',\n                texture1 = 'shot',\n                texture2 = 'explo2',\n                thickness = 8.5,\n                tolerance = 1000,\n                turret = true,\n                weaponvelocity = 1000,\n                damage = {\n                    default = 60,\n                },\n            },\n            heatray1 = {\n                allowNonBlockingAim = true,\n                avoidfriendly = true,\n                areaofeffect = 64,\n                avoidfeature = false,\n                beamtime = 0.033,\n                camerashake = 0.1,\n                collidefriendly = false,\n                corethickness = 0.45,\n                craterareaofeffect = 12,\n                craterboost = 0,\n                cratermult = 0,\n                edgeeffectiveness = 1,\n                energypershot = 0,\n                explosiongenerator = 'custom:heatray-large',\n                firestarter = 90,\n                firetolerance = 300,\n                impulsefactor = 0,\n                intensity = 9,\n                laserflaresize = 8,\n                name = 'Experimental Thermal Ordnance Generators',\n                noselfdamage = true,\n                proximitypriority = -1,\n                range = 850,\n                reloadtime = 0.033,\n                rgbcolor = '1 0.55 0',\n                rgbcolor2 = '0.9 1.0 0.5',\n                scrollspeed = 5,\n                soundhitdry = 'heatray3start',\n                soundhitwet = 'sizzle',\n                soundstart = 'heatray3lp',\n                soundstartvolume = 6,\n                soundtrigger = 1,\n                thickness = 6,\n                turret = true,\n                weapontype = 'BeamLaser',\n                weaponvelocity = 1500,\n                damage = {\n                    default = 150,\n                },\n            },\n            ata = {\n                areaofeffect = 34,\n                avoidfeature = false,\n                beamtime = 2,\n                collidefriendly = false,\n                corethickness = 0.5,\n                craterareaofeffect = 0,\n                craterboost = 0,\n                cratermult = 0,\n                edgeeffectiveness = 0.30,\n                energypershot = 7000,\n                explosiongenerator = 'custom:laserhit-large-blue',\n                firestarter = 90,\n                impulsefactor = 0,\n                largebeamlaser = true,\n                laserflaresize = 7,\n                name = 'Heavy long-range g2g tachyon accelerator beam',\n                noselfdamage = true,\n                range = 1300,\n                reloadtime = 15,\n                rgbcolor = '0 1 1',\n                scrollspeed = 5,\n                soundhitdry = '',\n                soundhitwet = 'sizzle',\n                soundstart = 'raptorlaser',\n                soundtrigger = 1,\n                soundstartvolume = 4,\n                texture3 = 'largebeam',\n                thickness = 10,\n                tilelength = 150,\n                tolerance = 10000,\n                turret = true,\n                weapontype = 'BeamLaser',\n                weaponvelocity = 3100,\n                damage = {\n                    commanders = 480,\n                    default = 48000,\n                },\n            },\n        },\n        weapons = {\n            [1] = {\n                badtargetcategory = 'NOTLAND',\n                def = 'heatray1',\n                maindir = '-1 0 0',\n                maxangledif = 210,\n                onlytargetcategory = 'SURFACE',\n            },\n            [2] = {\n                badtargetcategory = 'NOTLAND',\n                def = 'heatray1',\n                maindir = '1 0 0',\n                maxangledif = 210,\n                onlytargetcategory = 'SURFACE',\n            },\n            [3] = {\n                def = 'ata',\n                maindir = '1 0 0',\n                maxangledif = 190,\n                onlytargetcategory = 'SURFACE',\n            },\n            [4] = {\n                def = 'machinegun',\n                onlytargetcategory = 'SURFACE',\n            },\n            [5] = {\n                def = 'machinegun',\n                onlytargetcategory = 'SURFACE',\n            },\n        },\n    }\n\n    if unitDefs.legfortt4 then\n        merge(unitDefs.legfortt4, payload)\n    else\n        unitDefs.legfortt4 = payload\n    end\nend\n"
        },
        {
            "path": "lua/builders-t3.lua",
            "data": "-- T3 Cons & Taxed Factories\n-- Authors: Nervensaege, TetrisCo\n-- https://github.com/nuttyb-community/nuttyb\n\ndo\n    local unitDefs, factions, tableMerge, factionPrefix, _taxed, taxMultiplier, tableContains =\n        UnitDefs or {},\n        { 'arm', 'cor', 'leg' },\n        table.merge,\n        { arm = 'Armada ', cor = 'Cortex ', leg = 'Legion ' },\n        '_taxed',\n        1.5,\n        table.contains\n\n    local function addNewMergedUnitDef(baseUnit, newUnit, mergeProps)\n        if unitDefs[baseUnit] and not unitDefs[newUnit] then\n            unitDefs[newUnit] = tableMerge(unitDefs[baseUnit], mergeProps)\n        end\n    end\n\n    for _, faction in pairs(factions) do\n        local isArm, isCor, isLeg =\n            faction == 'arm', faction == 'cor', faction == 'leg'\n\n        -- T3 Construction Turret\n        addNewMergedUnitDef(faction .. 'nanotct2', faction .. 'nanotct3', {\n            metalcost = 3700,\n            energycost = 62000,\n            builddistance = 550,\n            buildtime = 108000,\n            collisionvolumescales = '61 128 61',\n            footprintx = 6,\n            footprintz = 6,\n            health = 8800,\n            mass = 37200,\n            sightdistance = 575,\n            workertime = 1900,\n            icontype = 'armnanotct2',\n            canrepeat = true,\n            objectname = isLeg and 'Units/legnanotcbase.s3o'\n                or isCor and 'Units/CORRESPAWN.s3o'\n                or 'Units/ARMRESPAWN.s3o',\n            customparams = {\n                i18n_en_humanname = 'T3 Construction Turret',\n                i18n_en_tooltip = 'More BUILDPOWER! For the connoisseur',\n            },\n        })\n\n        -- T3 Metal Storage\n        addNewMergedUnitDef(\n            isLeg and 'legamstor' or faction .. 'uwadvms',\n            isLeg and 'legamstort3' or faction .. 'uwadvmst3',\n            {\n                metalstorage = 30000,\n                metalcost = 4200,\n                energycost = 231150,\n                buildtime = 142800,\n                health = 53560,\n                maxthisunit = 3,\n                icontype = 'armuwadves',\n                name = factionPrefix[faction] .. 'T3 Metal Storage',\n                customparams = {\n                    i18n_en_humanname = 'T3 Hardened Metal Storage',\n                    i18n_en_tooltip = 'The big metal storage tank for your most precious resources. Chopped chicken!',\n                },\n            }\n        )\n\n        -- T3 Energy Storage\n        addNewMergedUnitDef(\n            isLeg and 'legadvestore' or faction .. 'uwadves',\n            isLeg and 'legadvestoret3' or faction .. 'advestoret3',\n            {\n                energystorage = 272000,\n                metalcost = 2100,\n                energycost = 59000,\n                buildtime = 93380,\n                health = 49140,\n                icontype = 'armuwadves',\n                maxthisunit = 3,\n                name = factionPrefix[faction] .. 'T3 Energy Storage',\n                customparams = {\n                    i18n_en_humanname = 'T3 Hardened Energy Storage',\n                    i18n_en_tooltip = 'Power! Power! We need power!1!',\n                },\n            }\n        )\n\n        -- T1/T2 Turret Overhaul\n        for _, unit in pairs({ faction .. 'nanotc', faction .. 'nanotct2' }) do\n            if unitDefs[unit] then\n                unitDefs[unit].canrepeat = true\n            end\n        end\n\n        local baseFactory = isArm and 'armshltx'\n            or isCor and 'corgant'\n            or 'leggant'\n        local baseDef = unitDefs[baseFactory]\n        addNewMergedUnitDef(baseFactory, baseFactory .. _taxed, {\n            energycost = baseDef.energycost * taxMultiplier,\n            icontype = baseFactory,\n            metalcost = baseDef.metalcost * taxMultiplier,\n            name = factionPrefix[faction] .. 'Experimental Gantry Taxed',\n            customparams = {\n                i18n_en_humanname = factionPrefix[faction]\n                    .. 'Experimental Gantry Taxed',\n                i18n_en_tooltip = 'Produces Experimental Units',\n            },\n        })\n\n        local t3AideBuildoptions, commonBuildoptions =\n            {}, {\n                faction .. 'afust3',\n                faction .. 'nanotct2',\n                faction .. 'nanotct3',\n                faction .. 'alab',\n                faction .. 'avp',\n                faction .. 'aap',\n                faction .. 'gatet3',\n                faction .. 'flak',\n                -- Legion vs others conditional options\n                isLeg and 'legadveconvt3' or faction .. 'mmkrt3',\n                isLeg and 'legamstort3' or faction .. 'uwadvmst3',\n                isLeg and 'legadvestoret3' or faction .. 'advestoret3',\n                isLeg and 'legdeflector' or faction .. 'gate',\n                isLeg and 'legforti' or faction .. 'fort',\n                isArm and 'armshltx' or faction .. 'gant',\n            }\n\n        for _, option in ipairs(commonBuildoptions) do\n            t3AideBuildoptions[#t3AideBuildoptions + 1] = option\n        end\n\n        -- Add taxed gantries (only for other factions)\n        local taxedMap = {\n            arm = { 'corgant', 'leggant' },\n            cor = { 'armshltx', 'leggant' },\n            leg = { 'armshltx', 'corgant' },\n        }\n\n        for _, gantry in ipairs(taxedMap[faction] or {}) do\n            t3AideBuildoptions[#t3AideBuildoptions + 1] = gantry .. _taxed\n        end\n\n        -- Add faction-exclusive options with lookup tables\n        local exclusiveOptions = {\n            arm = {\n                'armamd',\n                'armmercury',\n                'armbrtha',\n                'armminivulc',\n                'armvulc',\n                'armanni',\n                'armannit3',\n                'armlwall',\n                'armannit4',\n            },\n            cor = {\n                'corfmd',\n                'corscreamer',\n                'cordoomt3',\n                'corbuzz',\n                'corminibuzz',\n                'corint',\n                'cordoom',\n                'corhllllt',\n                'cormwall',\n                'cordoomt4',\n            },\n            leg = {\n                'legabm',\n                'legstarfall',\n                'legministarfall',\n                'leglraa',\n                'legbastion',\n                'legrwall',\n                'leglrpc',\n                'legbastiont4',\n                'legapopupdef',\n                'legdtf',\n            },\n        }\n\n        for _, option in ipairs(exclusiveOptions[faction] or {}) do\n            t3AideBuildoptions[#t3AideBuildoptions + 1] = option\n        end\n\n        -- Epic Ground Constructor Aide\n        local newUnit = faction .. 't3aide'\n        addNewMergedUnitDef(faction .. 'decom', newUnit, {\n            blocking = true,\n            builddistance = 350,\n            buildtime = 140000,\n            energycost = 200000,\n            energyupkeep = 2000,\n            health = 10000,\n            idleautoheal = 5,\n            idletime = 1800,\n            maxthisunit = 1,\n            metalcost = 12600,\n            speed = 85,\n            terraformspeed = 3000,\n            turninplaceanglelimit = 1.890,\n            turnrate = 1240,\n            workertime = 6000,\n            reclaimable = true,\n            candgun = false,\n            name = factionPrefix[faction] .. 'Epic Aide',\n            customparams = {\n                subfolder = 'ArmBots/T3',\n                techlevel = 3,\n                unitgroup = 'buildert3',\n                i18n_en_humanname = 'Epic Ground Construction Aide',\n                i18n_en_tooltip = 'Your Aide that helps you construct buildings',\n            },\n            buildoptions = t3AideBuildoptions,\n        })\n        unitDefs[newUnit].weapondefs = {}\n        unitDefs[newUnit].weapons = {}\n\n        -- Epic Air Constructor Aide\n        newUnit = faction .. 't3airaide'\n        addNewMergedUnitDef('armfify', newUnit, {\n            blocking = false,\n            canassist = true,\n            cruisealtitude = 3000,\n            builddistance = 1750,\n            buildtime = 140000,\n            energycost = 200000,\n            energyupkeep = 2000,\n            health = 1100,\n            idleautoheal = 5,\n            idletime = 1800,\n            icontype = 'armnanotct2',\n            maxthisunit = 1,\n            metalcost = 13400,\n            speed = 25,\n            category = 'OBJECT',\n            terraformspeed = 3000,\n            turninplaceanglelimit = 1.890,\n            turnrate = 1240,\n            workertime = 1600,\n            buildpic = 'ARMFIFY.DDS',\n            name = factionPrefix[faction] .. 'Epic Aide',\n            customparams = {\n                is_builder = true,\n                subfolder = 'ArmBots/T3',\n                techlevel = 3,\n                unitgroup = 'buildert3',\n                i18n_en_humanname = 'Epic Air Construction Aide',\n                i18n_en_tooltip = 'Your Aide that helps you construct buildings',\n            },\n            buildoptions = t3AideBuildoptions,\n        })\n        unitDefs[newUnit].weapondefs = {}\n        unitDefs[newUnit].weapons = {}\n\n        -- Buildoptions for T3 Gantrys (Ground)\n        local factoryName = isArm and 'armshltx'\n            or isCor and 'corgant'\n            or 'leggant'\n\n        -- Limit Bot Gantrys to 1\n        unitDefs[factoryName].maxthisunit = 1\n\n        -- Limit AIR Gantrys to 1\n        unitDefs[faction .. 'apt3'].maxthisunit = 1\n\n        if unitDefs[factoryName] and unitDefs[factoryName].buildoptions then\n            local groundAide = faction .. 't3aide'\n            if\n                not tableContains(\n                    unitDefs[factoryName].buildoptions,\n                    groundAide\n                )\n            then\n                table.insert(unitDefs[factoryName].buildoptions, groundAide)\n            end\n        end\n\n        -- Buildoptions for T3 Gantrys (air)\n        factoryName = faction .. 'apt3'\n        if unitDefs[factoryName] and unitDefs[factoryName].buildoptions then\n            local airAide = faction .. 't3airaide'\n            if\n                not tableContains(unitDefs[factoryName].buildoptions, airAide)\n            then\n                table.insert(unitDefs[factoryName].buildoptions, airAide)\n            end\n        end\n    end\nend\n"
        },
        {
            "path": "lua/cross-faction-t2.lua",
            "data": "-- Cross Faction Tax 70%\n-- Authors: TetrisCo\n-- https://github.com/nuttyb-community/nuttyb\n\ndo\n    local unitDefs, tax, t2Factories, taxedT2Factories, unitI18N, _taxed, taxedTitlePostfix =\n        UnitDefs or {},\n        1.7,\n        {},\n        {},\n        Json.decode(VFS.LoadFile('language/en/units.json')),\n        '_taxed',\n        ' (Taxed)'\n\n    for name, def in pairs(unitDefs) do\n        if\n            def.customparams\n            and def.customparams.subfolder\n            and (def.customparams.subfolder:match 'Fact' or def.customparams.subfolder:match 'Lab')\n            and def.customparams.techlevel == 2\n        then\n            local unitTitle = unitI18N and unitI18N.units.names[name] or name\n            t2Factories[name] = 1\n            taxedT2Factories[name .. _taxed] = table.merge(def, {\n                energycost = def.energycost * tax,\n                icontype = name,\n                metalcost = def.metalcost * tax,\n                name = unitTitle .. taxedTitlePostfix,\n                customparams = {\n                    i18n_en_humanname = unitTitle .. taxedTitlePostfix,\n                    i18n_en_tooltip = unitI18N\n                            and unitI18N.units.descriptions[name]\n                        or name,\n                },\n            })\n        end\n    end\n\n    for builderName, T1T2BuilderDef in pairs(unitDefs) do\n        if T1T2BuilderDef.buildoptions then\n            for _, buildoption in pairs(T1T2BuilderDef.buildoptions) do\n                if t2Factories[buildoption] then -- has non-cross-faction T2 factory\n                    for _, faction in pairs { 'arm', 'cor', 'leg' } do\n                        local crossfactionTaxedOption = faction\n                            .. buildoption:sub(4)\n                            .. _taxed\n                        if\n                            buildoption:sub(1, 3) ~= faction\n                            and taxedT2Factories[crossfactionTaxedOption]\n                        then\n                            unitDefs[builderName].buildoptions[#unitDefs[builderName].buildoptions + 1] =\n                                crossfactionTaxedOption\n                        end\n                    end\n                end\n            end\n        end\n    end\n\n    table.mergeInPlace(unitDefs, taxedT2Factories)\nend\n"
        },
        {
            "path": "lua/defences-t4.lua",
            "data": "-- T4 Defences NuttyB version\n-- Authors: Hedgehogzs\n-- https://github.com/nuttyb-community/nuttyb\n\ndo\n    local unitDefs, tableMerge = UnitDefs or {}, table.merge\n\n    local function ensureBuildOption(builderName, optionName)\n        local builder = unitDefs[builderName]\n        local optionDef = optionName and unitDefs[optionName]\n        if not builder or not optionDef then\n            return\n        end\n\n        builder.buildoptions = builder.buildoptions or {}\n        for i = 1, #builder.buildoptions do\n            if builder.buildoptions[i] == optionName then\n                return\n            end\n        end\n\n        builder.buildoptions[#builder.buildoptions + 1] = optionName\n    end\n\n    -- Legendary Pulsar\n    local legPulsarName = 'armannit4'\n    unitDefs[legPulsarName] = tableMerge(unitDefs['armannit3'], {\n        name = 'Legendary Pulsar',\n        description = 'A pinnacle of Armada engineering that fires devastating, rapid-fire tachyon bolts.',\n        buildtime = 300000,\n        health = 30000,\n        metalcost = 43840,\n        energycost = 1096000,\n        icontype = 'armannit3',\n        customparams = {\n            i18n_en_humanname = 'Legendary Pulsar',\n            i18n_en_tooltip = 'Fires devastating, rapid-fire tachyon bolts.',\n            techlevel = 4,\n        },\n        weapondefs = {\n            tachyon_burst_cannon = {\n                collidefriendly = 0,\n                collidefeature = 0,\n                avoidfeature = 0,\n                avoidfriendly = 0,\n                name = 'Tachyon Burst Cannon',\n                weapontype = 'LaserCannon',\n                rgbcolor = '1 0 1',\n                burst = 3,\n                burstrate = 0.40,\n                reloadtime = 5,\n                accuracy = 400,\n                areaofeffect = 12,\n                range = 1800,\n                energypershot = 12000,\n                turret = true,\n                soundstart = 'annigun1',\n                soundhit = 'xplolrg3',\n                size = 6,\n                impulsefactor = 0,\n                weaponvelocity = 3100,\n                thickness = 10,\n                laserflaresize = 8,\n                texture3 = 'largebeam',\n                tilelength = 150,\n                tolerance = 10000,\n                beamtime = 3,\n                explosiongenerator = 'custom:tachyonshot',\n                damage = {\n                    default = 8000,\n                },\n                allowNonBlockingAim = true,\n            },\n        },\n        weapons = {\n            [1] = {\n                badtargetcategory = 'VTOL GROUNDSCOUT',\n                def = 'tachyon_burst_cannon',\n                onlytargetcategory = 'SURFACE',\n            },\n        },\n    })\n\n    -- Add to build options\n    local builders_arm = {\n        'armaca',\n        'armack',\n        'armacsub',\n        'armacv',\n        'armt3airaide',\n        'armt3aide',\n    }\n\n    for i = 3, 10 do\n        builders_arm[#builders_arm + 1] = 'armcomlvl' .. i\n    end\n    for _, builder_name in pairs(builders_arm) do\n        ensureBuildOption(builder_name, legPulsarName)\n    end\n\n    -- Legendary Bastion\n    local legBastionName = 'legbastiont4'\n    unitDefs[legBastionName] = tableMerge(unitDefs['legbastion'], {\n        name = 'Legendary Bastion',\n        description = 'The ultimate defensive emplacement. Projects a devastating, pulsating heatray.',\n        health = 22000,\n        metalcost = 65760,\n        energycost = 1986500,\n        buildtime = 180000,\n        footprintx = 6,\n        footprintz = 6,\n        icontype = 'legbastion',\n        objectname = 'scavs/scavbeacon_t4.s3o',\n        script = 'scavs/scavbeacon.cob',\n        buildpic = 'scavengers/SCAVBEACON.DDS',\n        damagemodifier = 0.20,\n        customparams = {\n            i18n_en_humanname = 'Legendary Bastion',\n            i18n_en_tooltip = 'Projects a devastating, pulsating purple heatray.',\n            maxrange = 1450,\n            techlevel = 4,\n        },\n        weapondefs = {\n            legendary_bastion_ray = {\n                areaofeffect = 24,\n                collidefriendly = 0,\n                collidefeature = 0,\n                avoidfeature = 0,\n                avoidfriendly = 0,\n                beamtime = 0.3,\n                camerashake = 0,\n                corethickness = 0.3,\n                craterareaofeffect = 120,\n                craterboost = 0,\n                cratermult = 0,\n                edgeeffectiveness = 0.45,\n                energypershot = 3000,\n                explosiongenerator = 'custom:laserhit-medium-purple',\n                firestarter = 90,\n                firetolerance = 300,\n                impulsefactor = 0,\n                laserflaresize = 2,\n                name = 'Legendary Heat Ray',\n                noselfdamage = true,\n                predictboost = 0.3,\n                proximitypriority = 1,\n                range = 1450,\n                reloadtime = 0.3,\n                rgbcolor = '1.0 0.2 1.0',\n                rgbcolor2 = '0.9 1.0 0.5',\n                soundhitdry = '',\n                soundhitwet = 'sizzle',\n                soundstart = 'banthie2',\n                soundstartvolume = 25,\n                soundtrigger = 1,\n                thickness = 5.5,\n                turret = true,\n                weapontype = 'BeamLaser',\n                weaponvelocity = 1500,\n                allowNonBlockingAim = true,\n                damage = {\n                    default = 2500,\n                    vtol = 15,\n                },\n            },\n        },\n        weapons = {\n            [1] = {\n                badtargetcategory = 'VTOL GROUNDSCOUT',\n                def = 'legendary_bastion_ray',\n                onlytargetcategory = 'SURFACE',\n            },\n        },\n    })\n\n    -- Add to build options\n    local builders_leg = {\n        'legaca',\n        'legack',\n        'legacsub',\n        'legacv',\n        'legt3airaide',\n        'legt3aide',\n    }\n\n    for i = 3, 10 do\n        builders_leg[#builders_leg + 1] = 'legcomlvl' .. i\n    end\n    for _, builder_name in pairs(builders_leg) do\n        ensureBuildOption(builder_name, legBastionName)\n    end\n\n    -- Legendary Bulwark\n    local legBulwarkName = 'cordoomt4'\n    unitDefs[legBulwarkName] = tableMerge(unitDefs['cordoomt3'], {\n        name = 'Legendary Bulwark',\n        description = 'A pinnacle of defensive technology, the Legendary Bulwark annihilates all who approach.',\n        buildtime = 250000,\n        health = 42000,\n        metalcost = 61650,\n        energycost = 1712500,\n        damagemodifier = 0.15,\n        energystorage = 5000,\n        radardistance = 1400,\n        sightdistance = 1100,\n        icontype = 'cordoomt3',\n        customparams = {\n            i18n_en_humanname = 'Legendary Bulwark',\n            i18n_en_tooltip = 'The ultimate defensive structure.',\n            paralyzemultiplier = 0.2,\n            techlevel = 4,\n        },\n        weapondefs = {\n            legendary_overload_scatter = {\n                collidefriendly = 0,\n                collidefeature = 0,\n                avoidfeature = 0,\n                avoidfriendly = 0,\n                name = 'Overload Scatter Beamer',\n                weapontype = 'BeamLaser',\n                range = 1000,\n                reloadtime = 0.1,\n                sprayangle = 2000,\n                projectiles = 12,\n                rgbcolor = '0.8 0.1 1.0',\n                accuracy = 50,\n                areaofeffect = 8,\n                beamdecay = 0.05,\n                beamtime = 0.1,\n                beamttl = 1,\n                corethickness = 0.05,\n                burnblow = true,\n                cylindertargeting = 1,\n                edgeeffectiveness = 0.15,\n                explosiongenerator = 'custom:laserhit-medium-purple',\n                firestarter = 100,\n                impulsefactor = 0.123,\n                intensity = 0.3,\n                laserflaresize = 11.35,\n                noselfdamage = true,\n                soundhitwet = 'sizzle',\n                soundstart = 'beamershot2',\n                tolerance = 5000,\n                thickness = 2,\n                turret = true,\n                weaponvelocity = 1000,\n                damage = {\n                    default = 600,\n                },\n            },\n            legendary_heat_ray = {\n                collidefriendly = 0,\n                collidefeature = 0,\n                avoidfeature = 0,\n                avoidfriendly = 0,\n                name = 'Armageddon Heat Ray',\n                weapontype = 'BeamLaser',\n                range = 1300,\n                reloadtime = 4.0,\n                areaofeffect = 72,\n                beamtime = 0.6,\n                cameraShake = 350,\n                corethickness = 0.40,\n                craterareaofeffect = 72,\n                energypershot = 1200,\n                explosiongenerator = 'custom:genericshellexplosion-medium-beam',\n                impulsefactor = 0,\n                largebeamlaser = true,\n                laserflaresize = 8.8,\n                noselfdamage = true,\n                rgbcolor = '0.9 1.0 0.5',\n                rgbcolor2 = '0.8 0 0',\n                scrollspeed = 5,\n                soundhitdry = '',\n                soundhitwet = 'sizzle',\n                soundstart = 'heatray2xl',\n                soundtrigger = 1,\n                thickness = 7,\n                tolerance = 10000,\n                turret = true,\n                weaponvelocity = 1800,\n                damage = {\n                    default = 9000,\n                    commanders = 1350,\n                },\n            },\n            legendary_point_defense = {\n                collidefriendly = 0,\n                collidefeature = 0,\n                avoidfeature = 0,\n                avoidfriendly = 0,\n                name = 'Point Defense Laser',\n                weapontype = 'BeamLaser',\n                range = 750,\n                reloadtime = 0.5,\n                areaofeffect = 12,\n                beamtime = 0.3,\n                corethickness = 0.32,\n                energypershot = 500,\n                explosiongenerator = 'custom:laserhit-large-blue',\n                firestarter = 90,\n                impactonly = 1,\n                impulsefactor = 0,\n                largebeamlaser = true,\n                laserflaresize = 8.8,\n                noselfdamage = true,\n                proximitypriority = 0,\n                rgbcolor = '0 0 1',\n                soundhitdry = '',\n                soundhitwet = 'sizzle',\n                soundstart = 'annigun1',\n                soundtrigger = 1,\n                texture3 = 'largebeam',\n                thickness = 5.5,\n                tilelength = 150,\n                tolerance = 10000,\n                turret = true,\n                weaponvelocity = 1500,\n                damage = {\n                    default = 450,\n                    commanders = 999,\n                },\n            },\n        },\n        weapons = {\n            [1] = {\n                def = 'legendary_overload_scatter',\n                onlytargetcategory = 'SURFACE',\n            },\n            [2] = {\n                def = 'legendary_heat_ray',\n                onlytargetcategory = 'SURFACE',\n            },\n            [3] = {\n                def = 'legendary_point_defense',\n                onlytargetcategory = 'SURFACE',\n            },\n        },\n    })\n\n    -- Add to build options\n    local builders_cor = {\n        'coraca',\n        'corack',\n        'coracsub',\n        'coracv',\n        'cort3airaide',\n        'cort3aide',\n    }\n\n    for i = 3, 10 do\n        builders_cor[#builders_cor + 1] = 'corcomlvl' .. i\n    end\n    for _, builder_name in pairs(builders_cor) do\n        ensureBuildOption(builder_name, legBulwarkName)\n    end\nend\n"
        },
        {
            "path": "lua/eco-t3.lua",
            "data": "-- T3 Eco builtin v6\n-- https://github.com/nuttyb-community/nuttyb\n\ndo\n    local unitDefs, cons =\n        UnitDefs or {}, {\n            'armack',\n            'armaca',\n            'armacv',\n            'corack',\n            'coraca',\n            'coracv',\n            'legack',\n            'legaca',\n            'legacv',\n        }\n\n    for _, factionMM in pairs({ 'armmmkrt3', 'cormmkrt3', 'legadveconvt3' }) do\n        table.mergeInPlace(\n            unitDefs[factionMM],\n            { footprintx = 6, footprintz = 6 }\n        )\n    end\n\n    for _, builderName in pairs(cons) do\n        local faction, nBuildOptions =\n            builderName:sub(1, 3), #unitDefs[builderName].buildoptions\n        unitDefs[builderName].buildoptions[nBuildOptions + 1] = faction\n            .. 'afust3'\n        unitDefs[builderName].buildoptions[nBuildOptions + 2] = faction == 'leg'\n                and 'legadveconvt3'\n            or faction .. 'mmkrt3'\n    end\n\n    do\n        local builderName = 'legck'\n        local nBuildOptions = #unitDefs[builderName].buildoptions\n        unitDefs[builderName].buildoptions[nBuildOptions + 1] = 'legdtf'\n    end\n\n    for _, unitName in pairs({ 'coruwadves', 'legadvestore' }) do\n        table.mergeInPlace(\n            unitDefs[unitName],\n            { footprintx = 4, footprintz = 4 }\n        )\n    end\nend\n"
        },
        {
            "path": "lua/eco-t4.lua",
            "data": "-- T4 Eco (Legendary Fusion & Metal Converters)\n-- Authors: jackie188, Insider\n-- https://github.com/nuttyb-community/nuttyb\n\ndo\n    local unitDefs, tableMerge = UnitDefs or {}, table.merge\n\n    local function ensureBuildOption(builderName, optionName)\n        local builder = unitDefs[builderName]\n        local optionDef = optionName and unitDefs[optionName]\n        if not builder or not optionDef then\n            return\n        end\n\n        builder.buildoptions = builder.buildoptions or {}\n        for i = 1, #builder.buildoptions do\n            if builder.buildoptions[i] == optionName then\n                return\n            end\n        end\n\n        builder.buildoptions[#builder.buildoptions + 1] = optionName\n    end\n\n    local factions = { 'arm', 'cor', 'leg' }\n    local factionNames = {\n        arm = 'Armada ',\n        cor = 'Cortex ',\n        leg = 'Legion ',\n    }\n\n    local function cloneUnit(sourceUnit, targetUnit, overrides)\n        if unitDefs[sourceUnit] and not unitDefs[targetUnit] then\n            unitDefs[targetUnit] = tableMerge(unitDefs[sourceUnit], overrides)\n        end\n    end\n\n    local newUnitNames = {}\n\n    -- Create Legendary metal converters and fusion reactors for each faction\n    for _, faction in ipairs(factions) do\n        local isLegion = (faction == 'leg')\n\n        -- Metal Maker base unit name differs for Legion\n        local baseConverterName = isLegion and 'legadveconv'\n            or (faction .. 'mmkr')\n        local templateConverterName = baseConverterName .. 't3'\n        local newConverterName = baseConverterName .. 't4'\n        local metalMakerDef = unitDefs[templateConverterName]\n\n        -- T4 Legendary Energy Converter\n        if metalMakerDef then\n            local t4Multiplier = 2.0\n            cloneUnit(templateConverterName, newConverterName, {\n                metalcost = math.ceil(metalMakerDef.metalcost * t4Multiplier),\n                energycost = math.ceil(metalMakerDef.energycost * t4Multiplier),\n                buildtime = math.ceil(metalMakerDef.buildtime * t4Multiplier),\n                health = math.ceil(metalMakerDef.health * t4Multiplier * 6),\n                customparams = {\n                    energyconv_capacity = math.ceil(\n                        metalMakerDef.customparams.energyconv_capacity * 2\n                    ),\n                    energyconv_efficiency = 0.022,\n                    buildinggrounddecaldecayspeed = metalMakerDef.customparams.buildinggrounddecaldecayspeed,\n                    buildinggrounddecalsizex = metalMakerDef.customparams.buildinggrounddecalsizex,\n                    buildinggrounddecalsizey = metalMakerDef.customparams.buildinggrounddecalsizey,\n                    buildinggrounddecaltype = metalMakerDef.customparams.buildinggrounddecaltype,\n                    model_author = metalMakerDef.customparams.model_author,\n                    normaltex = metalMakerDef.customparams.normaltex,\n                    removestop = metalMakerDef.customparams.removestop,\n                    removewait = metalMakerDef.customparams.removewait,\n                    subfolder = metalMakerDef.customparams.subfolder,\n                    techlevel = metalMakerDef.customparams.techlevel,\n                    unitgroup = metalMakerDef.customparams.unitgroup,\n                    usebuildinggrounddecal = metalMakerDef.customparams.usebuildinggrounddecal,\n                    i18n_en_humanname = 'Legendary Energy Converter',\n                    i18n_en_tooltip = 'Converts 12000 energy into 264 metal per sec (non-explosive)',\n                },\n                name = 'Legendary Energy Converter',\n                buildpic = metalMakerDef.buildpic,\n                objectname = metalMakerDef.objectname,\n                footprintx = 6,\n                footprintz = 6,\n                yardmap = metalMakerDef.yardmap,\n                script = metalMakerDef.script,\n                activatewhenbuilt = metalMakerDef.activatewhenbuilt,\n                explodeas = 'largeBuildingexplosiongeneric',\n                selfdestructas = 'largeBuildingExplosionGenericSelfd',\n                sightdistance = metalMakerDef.sightdistance,\n                seismicsignature = metalMakerDef.seismicsignature,\n                idleautoheal = metalMakerDef.idleautoheal,\n                idletime = metalMakerDef.idletime,\n                maxslope = metalMakerDef.maxslope,\n                maxwaterdepth = metalMakerDef.maxwaterdepth,\n                maxacc = metalMakerDef.maxacc,\n                maxdec = metalMakerDef.maxdec,\n                corpse = metalMakerDef.corpse,\n                canrepeat = metalMakerDef.canrepeat,\n            })\n\n            table.insert(newUnitNames, newConverterName)\n        end\n\n        -- Fusion Reactor base unit\n        local baseFusionName = faction .. 'afus'\n        local templateFusionName = baseFusionName .. 't3'\n        local newFusionName = baseFusionName .. 't4'\n        local fusionDef = unitDefs[templateFusionName]\n\n        -- Legendary Fusion Reactor (200% version)\n        if fusionDef then\n            cloneUnit(templateFusionName, newFusionName, {\n                buildtime = math.ceil(fusionDef.buildtime * 1.8),\n                name = 'Legendary Fusion Reactor',\n                metalcost = math.ceil(fusionDef.metalcost * 2.0),\n                energycost = math.ceil(fusionDef.energycost * 2.0),\n                energymake = math.ceil(fusionDef.energymake * 2.4),\n                energystorage = math.ceil(fusionDef.energystorage * 6.0),\n                health = math.ceil(fusionDef.health * 2.0 * 3),\n                buildpic = fusionDef.buildpic,\n                collisionvolumeoffsets = fusionDef.collisionvolumeoffsets,\n                collisionvolumescales = fusionDef.collisionvolumescales,\n                collisionvolumetype = fusionDef.collisionvolumetype,\n                damagemodifier = 0.95,\n                buildangle = fusionDef.buildangle,\n                objectname = fusionDef.objectname,\n                footprintx = 12,\n                footprintz = 12,\n                yardmap = fusionDef.yardmap,\n                script = fusionDef.script,\n                activatewhenbuilt = fusionDef.activatewhenbuilt,\n                explodeas = 'largeBuildingexplosiongeneric',\n                selfdestructas = 'largeBuildingExplosionGenericSelfd',\n                sightdistance = fusionDef.sightdistance,\n                seismicsignature = fusionDef.seismicsignature,\n                idleautoheal = math.ceil(fusionDef.idleautoheal * 6),\n                idletime = fusionDef.idletime,\n                maxslope = fusionDef.maxslope,\n                maxwaterdepth = fusionDef.maxwaterdepth,\n                maxacc = fusionDef.maxacc,\n                maxdec = fusionDef.maxdec,\n                corpse = fusionDef.corpse,\n                canrepeat = fusionDef.canrepeat,\n                customparams = {\n                    buildinggrounddecaldecayspeed = 30,\n                    buildinggrounddecalsizex = 18,\n                    buildinggrounddecalsizey = 18,\n                    buildinggrounddecaltype = fusionDef.customparams.buildinggrounddecaltype,\n                    model_author = fusionDef.customparams.model_author,\n                    normaltex = fusionDef.customparams.normaltex,\n                    subfolder = fusionDef.customparams.subfolder,\n                    removestop = true,\n                    removewait = true,\n                    techlevel = 3,\n                    unitgroup = 'energy',\n                    usebuildinggrounddecal = true,\n                    i18n_en_humanname = 'Legendary Fusion Reactor',\n                    i18n_en_tooltip = 'Produces 72000 Energy (non-explosive)',\n                },\n                sfxtypes = {\n                    pieceexplosiongenerators = {\n                        [1] = 'deathceg2',\n                        [2] = 'deathceg3',\n                        [3] = 'deathceg4',\n                    },\n                },\n                sounds = {\n                    canceldestruct = 'cancel2',\n                    underattack = 'warning1',\n                    count = {\n                        'count6',\n                        'count5',\n                        'count4',\n                        'count3',\n                        'count2',\n                        'count1',\n                    },\n                    select = {\n                        'fusion2',\n                    },\n                },\n            })\n\n            table.insert(newUnitNames, newFusionName)\n        end\n    end\n\n    -- Add new units to T3 constructor build options\n    local builders = {\n        'armack',\n        'armaca',\n        'armacv',\n        'armt3airaide',\n        'armt3aide',\n        'corack',\n        'coraca',\n        'coracv',\n        'cort3airaide',\n        'cort3aide',\n        'legack',\n        'legaca',\n        'legacv',\n        'legt3airaide',\n        'legt3aide',\n    }\n\n    for _, builderName in pairs(builders) do\n        local faction = builderName:sub(1, 3)\n\n        for _, newUnitName in ipairs(newUnitNames) do\n            if (newUnitName:sub(1, 3)) == faction then\n                ensureBuildOption(builderName, newUnitName)\n            end\n        end\n    end\nend\n"
        },
        {
            "path": "lua/evocom-arm.lua",
            "data": "-- NuttyB v1.52c Armada Com\n-- Authors: ChrispyNut, BackBash\n-- https://github.com/nuttyb-community/nuttyb\n\n{\n    armcom = {\n        customparams = {\n            evolution_target = 'armcomlvl2',\n            evolution_condition = 'timer_global',\n            evolution_timer = 420,\n            inheritxpratemultiplier = 0.5,\n            childreninheritxp = 'TURRET MOBILEBUILT',\n            parentsinheritxp = 'TURRET MOBILEBUILT',\n        },\n        energymake = 100,\n        metalmake = 10,\n        autoheal = 55,\n        health = 4500,\n        speed = 41,\n        canresurrect = true,\n        buildoptions = {\n            'armsolar',\n            'armwin',\n            'armmstor',\n            'armestor',\n            'armmex',\n            'armmakr',\n            'armlab',\n            'armvp',\n            'armap',\n            'armeyes',\n            'armrad',\n            'armdrag',\n            'armllt',\n            'armrl',\n            'armdl',\n            'armtide',\n            'armuwms',\n            'armuwes',\n            'armuwmex',\n            'armfmkr',\n            'armsy',\n            'armfdrag',\n            'armtl',\n            'armfrt',\n            'armfrad',\n            'armhp',\n            'armfhp',\n            'armgeo',\n            'armamex',\n            'armhp',\n            'armbeamer',\n            'armjamt',\n            'armsy',\n            'armrectr',\n            'armclaw',\n        },\n        weapondefs = {\n            armcomlaser = {\n                range = 330,\n                rgbcolor = '0.7 1 1',\n                soundstart = 'lasrfir1',\n                damage = {\n                    default = 175,\n                },\n            },\n            old_armsnipe_weapon = {\n                areaofeffect = 32,\n                avoidfeature = true,\n                avoidfriendly = true,\n                collidefeature = true,\n                collidefriendly = false,\n                corethickness = 0.75,\n                craterareaofeffect = 0,\n                craterboost = 0,\n                commandfire = true,\n                cratermult = 0,\n                cegtag = 'railgun',\n                duration = 0.12,\n                edgeeffectiveness = 0.85,\n                energypershot = 400,\n                explosiongenerator = 'custom:laserhit-large-blue',\n                firestarter = 100,\n                impulseboost = 0.4,\n                impulsefactor = 1,\n                intensity = 0.8,\n                name = 'Long-range g2g armor-piercing rifle',\n                range = 550,\n                reloadtime = 1,\n                rgbcolor = '0 1 1',\n                rgbcolor2 = '0 1 1',\n                soundhit = 'sniperhit',\n                soundhitwet = 'sizzle',\n                soundstart = 'sniper3',\n                soundtrigger = true,\n                stockpile = true,\n                stockpiletime = 7,\n                customparams = {\n                    stockpilelimit = 10,\n                },\n                texture1 = 'shot',\n                texture2 = 'empty',\n                thickness = 4,\n                tolerance = 1000,\n                turret = true,\n                weapontype = 'LaserCannon',\n                weaponvelocity = 3000,\n                damage = {\n                    commanders = 100,\n                    default = 4900,\n                },\n            },\n        },\n        weapons = {\n            [3] = {\n                def = 'old_armsnipe_weapon',\n                onlytargetcategory = 'NOTSUB',\n            },\n        },\n    },\n    armcomlvl2 = {\n        autoheal = 90,\n        builddistance = 175,\n        canresurrect = true,\n        energymake = 315,\n        health = 7000,\n        speed = 57.5,\n        metalmake = 20,\n        workertime = 900,\n        buildoptions = {\n            'armsolar',\n            'armwin',\n            'armmstor',\n            'armestor',\n            'armmex',\n            'armmakr',\n            'armlab',\n            'armvp',\n            'armap',\n            'armeyes',\n            'armrad',\n            'armdrag',\n            'armllt',\n            'armrl',\n            'armdl',\n            'armtide',\n            'armuwms',\n            'armuwes',\n            'armuwmex',\n            'armfmkr',\n            'armsy',\n            'armfdrag',\n            'armtl',\n            'armfrt',\n            'armfrad',\n            'armhp',\n            'armfhp',\n            'armadvsol',\n            'armgeo',\n            'armamex',\n            'armnanotcplat',\n            'armhp',\n            'armnanotc',\n            'armclaw',\n            'armbeamer',\n            'armhlt',\n            'armguard',\n            'armferret',\n            'armcir',\n            'armjamt',\n            'armjuno',\n            'armsy',\n            'armrectr',\n        },\n        customparams = {\n            evolution_target = 'armcomlvl3',\n            evolution_condition = 'timer_global',\n            evolution_timer = 1320,\n        },\n        weapondefs = {\n            armcomlaser = {\n                areaofeffect = 16,\n                avoidfeature = false,\n                beamtime = 0.1,\n                corethickness = 0.1,\n                craterareaofeffect = 0,\n                craterboost = 0,\n                cratermult = 0,\n                cylindertargeting = 1,\n                edgeeffectiveness = 1,\n                explosiongenerator = 'custom:laserhit-small-red',\n                firestarter = 70,\n                impactonly = 1,\n                impulseboost = 0,\n                impulsefactor = 0,\n                laserflaresize = 7.7,\n                name = 'Light close-quarters g2g/g2a laser',\n                noselfdamage = true,\n                range = 425,\n                reloadtime = 0.7,\n                rgbcolor = '0 1 1',\n                soundhitdry = '',\n                soundhitwet = 'sizzle',\n                soundstart = 'lasrfir1',\n                soundtrigger = 1,\n                targetmoveerror = 0.05,\n                thickness = 4,\n                tolerance = 10000,\n                turret = true,\n                weapontype = 'BeamLaser',\n                weaponvelocity = 900,\n                damage = {\n                    default = 950,\n                    VTOL = 150,\n                },\n            },\n            old_armsnipe_weapon = {\n                areaofeffect = 42,\n                avoidfeature = true,\n                avoidfriendly = true,\n                collidefeature = true,\n                collidefriendly = false,\n                corethickness = 0.75,\n                craterareaofeffect = 0,\n                craterboost = 0,\n                commandfire = true,\n                cratermult = 0,\n                cegtag = 'railgun',\n                duration = 0.12,\n                edgeeffectiveness = 0.85,\n                energypershot = 700,\n                explosiongenerator = 'custom:laserhit-large-blue',\n                firestarter = 100,\n                impulseboost = 0.4,\n                impulsefactor = 1,\n                intensity = 1,\n                name = 'Long-range g2g armor-piercing rifle',\n                range = 700,\n                reloadtime = 1,\n                rgbcolor = '0.2 0.1 1',\n                rgbcolor2 = '0.2 0.1 1',\n                soundhit = 'sniperhit',\n                soundhitwet = 'sizzle',\n                soundstart = 'sniper3',\n                soundtrigger = true,\n                stockpile = true,\n                stockpiletime = 6,\n                customparams = {\n                    stockpilelimit = 20,\n                },\n                texture1 = 'shot',\n                texture2 = 'empty',\n                thickness = 4,\n                tolerance = 1000,\n                turret = true,\n                weapontype = 'LaserCannon',\n                weaponvelocity = 3000,\n                damage = {\n                    commanders = 10,\n                    default = 11000,\n                },\n            },\n        },\n        weapons = {\n            [1] = {\n                def = 'armcomlaser',\n                onlytargetcategory = 'NOTSUB',\n                fastautoretargeting = true,\n            },\n            [3] = {\n                def = 'old_armsnipe_weapon',\n                onlytargetcategory = 'NOTSUB',\n            },\n        },\n    },\n    armcomlvl3 = {\n        autoheal = 50,\n        builddistance = 250,\n        canresurrect = true,\n        energymake = 2712,\n        health = 10000,\n        speed = 71.5,\n        metalmake = 62,\n        workertime = 1500,\n        buildoptions = {\n            'armanni',\n            'armpb',\n            'armamb',\n            'armmoho',\n            'armuwmme',\n            'armflak',\n            'armmercury',\n            'armgate',\n            'armsd',\n            'armfort',\n            'armtarg',\n            'armarad',\n            'armamd',\n            'armveil',\n            'armuwadvms',\n            'armuwadves',\n            'armmmkr',\n            'armclaw',\n            'armjuno',\n            'armuwmex',\n            'armhp',\n            'armsy',\n            'armfdrag',\n            'armtl',\n            'armfrt',\n            'armfrad',\n            'armhp',\n            'armlab',\n            'armvp',\n            'armap',\n            'armsy',\n            'armuwmmm',\n            'armuwfus',\n            'armplat',\n            'armfdrag',\n            'armfhlt',\n            'armfflak',\n            'armatl',\n            'armkraken',\n            'armnanotcplat',\n            'armbrtha',\n            'armannit3',\n            'armlwall',\n            'armnanotct2',\n            'armafus',\n            'armfus',\n            'armckfus',\n            'armraz',\n            'armzeus',\n            'armsnipe',\n            'armvang',\n            'armrectr',\n            'armgatet3',\n            'armannit4',\n            'armnanotct3',\n            'epic_ragnarok',\n        },\n        customparams = {\n            evolution_target = 'armcomlvl4',\n            evolution_condition = 'timer_global',\n            evolution_timer = 1740,\n        },\n        weapondefs = {\n            old_armsnipe_weapon = {\n                areaofeffect = 64,\n                avoidfeature = true,\n                avoidfriendly = true,\n                collidefeature = true,\n                collidefriendly = false,\n                corethickness = 0.75,\n                craterareaofeffect = 0,\n                craterboost = 0,\n                commandfire = true,\n                cratermult = 0,\n                cegtag = 'railgun',\n                duration = 0.12,\n                edgeeffectiveness = 1,\n                energypershot = 2000,\n                explosiongenerator = 'custom:laserhit-large-blue',\n                firestarter = 100,\n                impulseboost = 0.4,\n                impulsefactor = 1,\n                intensity = 1.4,\n                name = 'Long-range g2g armor-piercing rifle',\n                range = 1250,\n                reloadtime = 0.5,\n                rgbcolor = '0.4 0.1 0.7',\n                rgbcolor2 = '0.4 0.1 0.7',\n                soundhit = 'sniperhit',\n                soundhitwet = 'sizzle',\n                soundstart = 'sniper3',\n                soundtrigger = true,\n                stockpile = true,\n                stockpiletime = 3,\n                customparams = {\n                    stockpilelimit = 20,\n                },\n                texture1 = 'shot',\n                texture2 = 'empty',\n                thickness = 6,\n                tolerance = 1000,\n                turret = true,\n                weapontype = 'LaserCannon',\n                weaponvelocity = 3000,\n                damage = {\n                    commanders = 10,\n                    default = 35000,\n                },\n            },\n            armcomlaser = {\n                areaofeffect = 12,\n                avoidfeature = false,\n                beamtime = 0.1,\n                corethickness = 0.1,\n                craterareaofeffect = 0,\n                craterboost = 0,\n                cratermult = 0,\n                cylindertargeting = 1,\n                edgeeffectiveness = 1,\n                explosiongenerator = 'custom:laserhit-small-red',\n                firestarter = 70,\n                impactonly = 1,\n                impulseboost = 0,\n                impulsefactor = 0,\n                laserflaresize = 7.7,\n                name = 'Light close-quarters g2g/g2a laser',\n                noselfdamage = true,\n                range = 500,\n                reloadtime = 0.6,\n                rgbcolor = '0.1 0 1',\n                soundhitdry = '',\n                soundhitwet = 'sizzle',\n                soundstart = 'lasrcrw2',\n                soundtrigger = 1,\n                targetmoveerror = 0.05,\n                thickness = 6,\n                tolerance = 10000,\n                turret = true,\n                weapontype = 'BeamLaser',\n                weaponvelocity = 900,\n                damage = {\n                    default = 1450,\n                    VTOL = 180,\n                },\n            },\n        },\n        weapons = {\n            [5] = {\n                badtargetcategory = 'MOBILE',\n                def = 'armcomlaser',\n                onlytargetcategory = 'NOTSUB',\n                fastautoretargeting = true,\n            },\n            [3] = {\n                def = 'old_armsnipe_weapon',\n                onlytargetcategory = 'NOTSUB',\n            },\n            [4] = {\n                def = '',\n            },\n            [1] = {\n                def = '',\n            },\n            [6] = {\n                def = '',\n            },\n        },\n    },\n    armcomlvl4 = {\n        autoheal = 150,\n        builddistance = 300,\n        canresurrect = true,\n        energymake = 3112,\n        health = 20000,\n        speed = 82,\n        metalmake = 86,\n        workertime = 2000,\n        buildoptions = {\n            'armanni',\n            'armpb',\n            'armamb',\n            'armmoho',\n            'armuwmme',\n            'armflak',\n            'armmercury',\n            'armgate',\n            'armsd',\n            'armfort',\n            'armtarg',\n            'armarad',\n            'armamd',\n            'armveil',\n            'armuwadvms',\n            'armuwadves',\n            'armmmkr',\n            'armclaw',\n            'armjuno',\n            'armuwmex',\n            'armhp',\n            'armsy',\n            'armfdrag',\n            'armtl',\n            'armfrt',\n            'armfrad',\n            'armhp',\n            'armlab',\n            'armvp',\n            'armap',\n            'armsy',\n            'armuwmmm',\n            'armuwfus',\n            'armplat',\n            'armfdrag',\n            'armfhlt',\n            'armfflak',\n            'armatl',\n            'armkraken',\n            'armnanotcplat',\n            'armbrtha',\n            'armannit3',\n            'armlwall',\n            'armnanotct2',\n            'armafus',\n            'armfus',\n            'armckfus',\n            'armraz',\n            'armzeus',\n            'armsnipe',\n            'armvang',\n            'armrectr',\n            'armgatet3',\n            'armannit4',\n            'armnanotct3',\n            'epic_ragnarok',\n        },\n        weapondefs = {\n            old_armsnipe_weapon = {\n                areaofeffect = 72,\n                avoidfeature = true,\n                avoidfriendly = true,\n                collidefeature = true,\n                collidefriendly = false,\n                corethickness = 0.75,\n                craterareaofeffect = 0,\n                craterboost = 0,\n                commandfire = true,\n                cratermult = 0,\n                cegtag = 'railgun',\n                duration = 0.12,\n                edgeeffectiveness = 1,\n                energypershot = 2000,\n                explosiongenerator = 'custom:laserhit-large-blue',\n                firestarter = 100,\n                impulseboost = 0.4,\n                impulsefactor = 1,\n                intensity = 1.4,\n                name = 'Long-range g2g armor-piercing rifle',\n                range = 1250,\n                reloadtime = 0.5,\n                rgbcolor = '0.4 0.1 0.7',\n                rgbcolor2 = '0.4 0.1 0.7',\n                soundhit = 'sniperhit',\n                soundhitwet = 'sizzle',\n                soundstart = 'sniper3',\n                soundtrigger = true,\n                stockpile = true,\n                stockpiletime = 2,\n                customparams = {\n                    stockpilelimit = 30,\n                },\n                texture1 = 'shot',\n                texture2 = 'empty',\n                thickness = 6,\n                tolerance = 1000,\n                turret = true,\n                weapontype = 'LaserCannon',\n                weaponvelocity = 3000,\n                damage = {\n                    commanders = 10,\n                    default = 45000,\n                },\n            },\n            ata = {\n                areaofeffect = 16,\n                avoidfeature = false,\n                beamtime = 1.25,\n                collidefriendly = false,\n                corethickness = 0.5,\n                craterareaofeffect = 0,\n                craterboost = 0,\n                cratermult = 0,\n                edgeeffectiveness = 0.30,\n                energypershot = 7000,\n                explosiongenerator = 'custom:laserhit-large-blue',\n                firestarter = 90,\n                impulsefactor = 0,\n                largebeamlaser = true,\n                laserflaresize = 7,\n                name = 'Heavy long-range g2g tachyon accelerator beam',\n                noselfdamage = true,\n                range = 1100,\n                reloadtime = 15,\n                rgbcolor = '1 0 1',\n                scrollspeed = 5,\n                soundhitdry = '',\n                soundhitwet = 'sizzle',\n                soundstart = 'annigun1',\n                soundtrigger = 1,\n                texture3 = 'largebeam',\n                thickness = 10,\n                tilelength = 150,\n                tolerance = 10000,\n                turret = true,\n                weapontype = 'BeamLaser',\n                weaponvelocity = 3100,\n                damage = {\n                    commanders = 480,\n                    default = 48000,\n                },\n            },\n            armcomlaser = {\n                areaofeffect = 12,\n                avoidfeature = false,\n                beamtime = 0.1,\n                corethickness = 0.1,\n                craterareaofeffect = 0,\n                craterboost = 0,\n                cratermult = 0,\n                cylindertargeting = 1,\n                edgeeffectiveness = 1,\n                explosiongenerator = 'custom:laserhit-small-red',\n                firestarter = 70,\n                impactonly = 1,\n                impulseboost = 0,\n                impulsefactor = 0,\n                laserflaresize = 7.7,\n                name = 'Light close-quarters g2g/g2a laser',\n                noselfdamage = true,\n                range = 550,\n                reloadtime = 0.5,\n                rgbcolor = '0.659 0 1',\n                soundhitdry = '',\n                soundhitwet = 'sizzle',\n                soundstart = 'lasrcrw2',\n                soundtrigger = 1,\n                targetmoveerror = 0.05,\n                thickness = 6,\n                tolerance = 10000,\n                turret = true,\n                weapontype = 'BeamLaser',\n                weaponvelocity = 900,\n                damage = {\n                    default = 1750,\n                    VTOL = 200,\n                },\n            },\n        },\n        weapons = {\n            [1] = {\n                def = 'armcomlaser',\n                onlytargetcategory = 'NOTSUB',\n                fastautoretargeting = true,\n            },\n            [3] = {\n                def = 'old_armsnipe_weapon',\n                onlytargetcategory = 'NOTSUB',\n            },\n            [4] = {\n                badtargetcategory = 'VTOL GROUNDSCOUT',\n                def = 'ATA',\n                onlytargetcategory = 'SURFACE',\n            },\n            [5] = {\n                def = '',\n            },\n            [6] = {\n                def = '',\n            },\n        },\n    },\n}\n"
        },
        {
            "path": "lua/evocom-cor.lua",
            "data": "-- NuttyB v1.52c Cortex Com\n-- Authors: ChrispyNut, BackBash\n-- https://github.com/nuttyb-community/nuttyb\n\n{\n    corcom = {\n        customparams = {\n            evolution_target = 'corcomlvl2',\n            evolution_condition = 'timer_global',\n            evolution_timer = 420,\n            inheritxpratemultiplier = 0.5,\n            childreninheritxp = 'TURRET MOBILEBUILT',\n            parentsinheritxp = 'TURRET MOBILEBUILT',\n        },\n        autoheal = 80,\n        speed = 45,\n        energymake = 75,\n        metalmake = 6,\n        health = 5500,\n        buildoptions = {\n            [28] = 'corhllt',\n            [29] = 'cornecro',\n            [30] = 'corlevlr',\n            [31] = 'corak',\n            [32] = 'cormaw',\n        },\n        weapondefs = {\n            corcomlaser = {\n                range = 370,\n                damage = {\n                    bombers = 180,\n                    default = 260,\n                    fighters = 110,\n                    subs = 5,\n                },\n            },\n            disintegrator = {\n                energypershot = 1000,\n                reloadtime = 8,\n            },\n        },\n    },\n    corcomlvl2 = {\n        speed = 62,\n        health = 8500,\n        energymake = 255,\n        metalmake = 16,\n        autoheal = 300,\n        builddistance = 200,\n        workertime = 600,\n        buildoptions = {\n            [1] = 'corsolar',\n            [2] = 'coradvsol',\n            [3] = 'corwin',\n            [4] = 'corgeo',\n            [5] = 'cormstor',\n            [6] = 'corestor',\n            [7] = 'cormex',\n            [8] = 'corexp',\n            [9] = 'cormakr',\n            [10] = 'corcan',\n            [11] = 'correap',\n            [12] = 'corlab',\n            [13] = 'corvp',\n            [14] = 'corap',\n            [15] = 'corhp',\n            [16] = 'cornanotc',\n            [17] = 'coreyes',\n            [18] = 'corrad',\n            [19] = 'cordrag',\n            [20] = 'cormaw',\n            [21] = 'corllt',\n            [22] = 'corhllt',\n            [23] = 'corhlt',\n            [24] = 'corpun',\n            [25] = 'corrl',\n            [26] = 'cormadsam',\n            [27] = 'corerad',\n            [28] = 'cordl',\n            [29] = 'corjamt',\n            [30] = 'corjuno',\n            [31] = 'corsy',\n            [32] = 'coruwgeo',\n            [33] = 'corfasp',\n            [34] = 'cornerco',\n            [35] = 'coruwes',\n            [36] = 'corplat',\n            [37] = 'corfhp',\n            [38] = 'coruwms',\n            [39] = 'corfhlt',\n            [40] = 'cornanotcplat',\n            [41] = 'corfmkr',\n            [42] = 'cortide',\n            [43] = 'corfrad',\n            [44] = 'corfrt',\n            [45] = 'corfdrag',\n            [46] = 'cortl',\n            [47] = 'cornecro',\n        },\n        customparams = {\n            evolution_target = 'corcomlvl3',\n            evolution_condition = 'timer_global',\n            evolution_timer = 1320,\n            shield_power = 500,\n            shield_radius = 100,\n            inheritxpratemultiplier = 0.5,\n            childreninheritxp = 'TURRET MOBILEBUILT',\n            parentsinheritxp = 'TURRET MOBILEBUILT',\n        },\n        weapondefs = {\n            armcomlaser = {\n                areaofeffect = 16,\n                avoidfeature = false,\n                beamtime = 0.1,\n                corethickness = 0.1,\n                craterareaofeffect = 0,\n                craterboost = 0,\n                cratermult = 0,\n                cylindertargeting = 1,\n                edgeeffectiveness = 1,\n                explosiongenerator = 'custom:laserhit-small-red',\n                firestarter = 70,\n                impactonly = 1,\n                impulseboost = 0,\n                impulsefactor = 0,\n                laserflaresize = 7.7,\n                name = 'Light close-quarters g2g/g2a laser',\n                noselfdamage = true,\n                range = 500,\n                reloadtime = 0.4,\n                rgbcolor = '0.6 0.3 0.8',\n                soundhitdry = '',\n                soundhitwet = 'sizzle',\n                soundstart = 'lasrfir1',\n                soundtrigger = 1,\n                targetmoveerror = 0.05,\n                thickness = 4,\n                tolerance = 10000,\n                turret = true,\n                weapontype = 'BeamLaser',\n                weaponvelocity = 900,\n                damage = {\n                    bombers = 180,\n                    default = 1500,\n                    fighters = 110,\n                    subs = 5,\n                },\n            },\n            disintegrator = {\n                areaofeffect = 36,\n                avoidfeature = false,\n                avoidfriendly = false,\n                avoidground = false,\n                bouncerebound = 0,\n                cegtag = 'dgunprojectile',\n                commandfire = true,\n                craterboost = 0,\n                cratermult = 0.15,\n                edgeeffectiveness = 0.15,\n                energypershot = 500,\n                explosiongenerator = 'custom:expldgun',\n                firestarter = 100,\n                firesubmersed = false,\n                groundbounce = true,\n                impulseboost = 0,\n                impulsefactor = 0,\n                name = 'Disintegrator',\n                noexplode = true,\n                noselfdamage = true,\n                range = 250,\n                reloadtime = 6,\n                paralyzer = {},\n                soundhit = 'xplomas2s',\n                soundhitwet = 'sizzlexs',\n                soundstart = 'disigun1',\n                soundhitvolume = 36,\n                soundstartvolume = 96,\n                soundtrigger = true,\n                tolerance = 10000,\n                turret = true,\n                waterweapon = true,\n                weapontimer = 4.2,\n                weapontype = 'DGun',\n                weaponvelocity = 300,\n                damage = {\n                    commanders = 0,\n                    default = 20000,\n                    raptors = 10000,\n                },\n            },\n        },\n        weapons = {\n            [1] = {\n                def = 'armcomlaser',\n                onlytargetcategory = 'NOTSUB',\n                fastautoretargeting = true,\n            },\n            [3] = {\n                def = 'DISINTEGRATOR',\n                onlytargetcategory = 'NOTSUB',\n            },\n        },\n    },\n    corcomlvl3 = {\n        speed = 80,\n        health = 30000,\n        energymake = 2180,\n        metalmake = 49,\n        autoheal = 1500,\n        workertime = 1200,\n        builddistance = 250,\n        buildoptions = {\n            [1] = 'corfus',\n            [2] = 'corafus',\n            [3] = 'corageo',\n            [4] = 'cormoho',\n            [5] = 'cormexp',\n            [6] = 'cormmkr',\n            [7] = 'coruwadves',\n            [8] = 'coruwadvms',\n            [9] = 'corarad',\n            [10] = 'corshroud',\n            [11] = 'corfort',\n            [12] = 'corlab',\n            [13] = 'cortarg',\n            [14] = 'corsd',\n            [15] = 'corgate',\n            [16] = 'cortoast',\n            [17] = 'corvipe',\n            [18] = 'cordoom',\n            [19] = 'corflak',\n            [20] = 'corscreamer',\n            [21] = 'corvp',\n            [22] = 'corfmd',\n            [23] = 'corap',\n            [24] = 'corint',\n            [25] = 'corplat',\n            [26] = 'corsy',\n            [27] = 'coruwmme',\n            [28] = 'coruwmmm',\n            [29] = 'corenaa',\n            [30] = 'corfdoom',\n            [31] = 'coratl',\n            [32] = 'coruwfus',\n            [33] = 'corjugg',\n            [34] = 'corshiva',\n            [35] = 'corsumo',\n            [36] = 'corgol',\n            [37] = 'corkorg',\n            [38] = 'cornanotc2plat',\n            [39] = 'cornanotct2',\n            [40] = 'cornecro',\n            [41] = 'cordoomt3',\n            [42] = 'corhllllt',\n            [43] = 'cormaw',\n            [44] = 'cormwall',\n            [45] = 'corgatet3',\n            [46] = 'cordoomt4',\n            [47] = 'cornanotct3',\n            [48] = 'epic_calamity',\n        },\n        customparams = {\n            evolution_target = 'corcomlvl4',\n            evolution_condition = 'timer_global',\n            evolution_timer = 1740,\n            inheritxpratemultiplier = 0.5,\n            childreninheritxp = 'TURRET MOBILEBUILT',\n            parentsinheritxp = 'TURRET MOBILEBUILT',\n        },\n        weapondefs = {\n            corcomlaser = {\n                areaofeffect = 12,\n                avoidfeature = false,\n                beamtime = 0.1,\n                corethickness = 0.1,\n                craterareaofeffect = 0,\n                craterboost = 0,\n                cratermult = 0,\n                cylindertargeting = 1,\n                edgeeffectiveness = 1,\n                explosiongenerator = 'custom:laserhit-small-red',\n                firestarter = 70,\n                impactonly = 1,\n                impulseboost = 0,\n                impulsefactor = 0,\n                laserflaresize = 5.5,\n                name = 'J7Laser',\n                noselfdamage = true,\n                range = 900,\n                reloadtime = 0.4,\n                rgbcolor = '0.7 0 1',\n                soundhitdry = '',\n                soundhitwet = 'sizzle',\n                soundstart = 'lasrfir1',\n                soundtrigger = 1,\n                targetmoveerror = 0.05,\n                thickness = 3,\n                tolerance = 10000,\n                turret = true,\n                weapontype = 'BeamLaser',\n                weaponvelocity = 900,\n                damage = {\n                    default = 2000,\n                    subs = 5,\n                },\n            },\n            disintegrator = {\n                areaofeffect = 36,\n                avoidfeature = false,\n                avoidfriendly = false,\n                avoidground = false,\n                bouncerebound = 0,\n                cegtag = 'dgunprojectile',\n                commandfire = true,\n                craterboost = 0,\n                cratermult = 0.15,\n                edgeeffectiveness = 0.15,\n                energypershot = 500,\n                explosiongenerator = 'custom:expldgun',\n                firestarter = 100,\n                firesubmersed = false,\n                groundbounce = true,\n                impulseboost = 0,\n                impulsefactor = 0,\n                name = 'Disintegrator',\n                noexplode = true,\n                noselfdamage = true,\n                range = 250,\n                reloadtime = 3,\n                paralyzer = {},\n                soundhit = 'xplomas2s',\n                soundhitwet = 'sizzlexs',\n                soundstart = 'disigun1',\n                soundhitvolume = 36,\n                soundstartvolume = 96,\n                soundtrigger = true,\n                size = 4,\n                tolerance = 10000,\n                turret = true,\n                waterweapon = true,\n                weapontimer = 4.2,\n                weapontype = 'DGun',\n                weaponvelocity = 300,\n                damage = {\n                    commanders = 0,\n                    default = 20000,\n                    scavboss = 1000,\n                    raptors = 10000,\n                },\n            },\n        },\n        weapons = {\n            [1] = {\n                def = 'CORCOMLASER',\n                onlytargetcategory = 'NOTSUB',\n                fastautoretargeting = true,\n            },\n            [5] = {\n                def = '',\n            },\n        },\n    },\n    corcomlvl4 = {\n        speed = 80,\n        health = 50000,\n        energymake = 2380,\n        metalmake = 56,\n        autoheal = 3550,\n        workertime = 1800,\n        builddistance = 300,\n        buildoptions = {\n            'corfus',\n            'corafus',\n            'corageo',\n            'corbhmth',\n            'cormoho',\n            'cormexp',\n            'cormmkr',\n            'coruwadves',\n            'coruwadvms',\n            'corarad',\n            'corshroud',\n            'corfort',\n            'corlab',\n            'cortarg',\n            'corsd',\n            'corgate',\n            'cortoast',\n            'corvipe',\n            'cordoom',\n            'corflak',\n            'corscreamer',\n            'corvp',\n            'corfmd',\n            'corap',\n            'corint',\n            'corplat',\n            'corsy',\n            'coruwmme',\n            'coruwmmm',\n            'corenaa',\n            'corfdoom',\n            'coratl',\n            'coruwfus',\n            'corjugg',\n            'corshiva',\n            'corsumo',\n            'corgol',\n            'corkorg',\n            'cornanotc2plat',\n            'cornanotct2',\n            'cornecro',\n            'cordoomt3',\n            'corhllllt',\n            'cormaw',\n            'cormwall',\n            'corgatet3',\n            'cordoomt4',\n            'cornanotct3',\n            'epic_calamity',\n        },\n        customparams = {\n            shield_power = 500,\n            shield_radius = 100,\n            inheritxpratemultiplier = 0.5,\n            childreninheritxp = 'TURRET MOBILEBUILT',\n            parentsinheritxp = 'TURRET MOBILEBUILT',\n        },\n        weapondefs = {\n            CORCOMLASER = {\n                areaofeffect = 12,\n                avoidfeature = false,\n                beamtime = 0.1,\n                corethickness = 0.1,\n                craterareaofeffect = 0,\n                craterboost = 0,\n                cratermult = 0,\n                cylindertargeting = 1,\n                edgeeffectiveness = 1,\n                explosiongenerator = 'custom:laserhit-small-red',\n                firestarter = 70,\n                impactonly = 1,\n                impulseboost = 0,\n                impulsefactor = 0,\n                laserflaresize = 5.5,\n                name = 'J7Laser',\n                noselfdamage = true,\n                range = 1000,\n                reloadtime = 0.4,\n                rgbcolor = '0.7 0 1',\n                soundhitdry = '',\n                soundhitwet = 'sizzle',\n                soundstart = 'lasrfir1',\n                soundtrigger = 1,\n                targetmoveerror = 0.05,\n                thickness = 3,\n                tolerance = 10000,\n                turret = true,\n                weapontype = 'BeamLaser',\n                weaponvelocity = 900,\n                damage = {\n                    default = 2500,\n                    subs = 5,\n                },\n            },\n            disintegratorxl = {\n                areaofeffect = 105,\n                avoidfeature = false,\n                avoidfriendly = true,\n                avoidground = false,\n                burst = 1,\n                burstrate = 0,\n                bouncerebound = 0,\n                cegtag = 'gausscannonprojectilexl',\n                craterareaofeffect = 0,\n                craterboost = 0,\n                cratermult = 0,\n                commandfire = true,\n                cameraShake = 0,\n                edgeeffectiveness = 1,\n                energypershot = 0,\n                explosiongenerator = 'custom:burnblackbiggest',\n                firestarter = 100,\n                firesubmersed = false,\n                gravityaffected = true,\n                impulsefactor = 0,\n                intensity = 4,\n                name = 'Darkmatter Photon-Disruptor',\n                noexplode = true,\n                noselfdamage = true,\n                range = 500,\n                reloadtime = 1,\n                rgbcolor = '0.7 0.3 1.0',\n                size = 5.5,\n                soundhit = 'xplomas2',\n                soundhitwet = 'sizzlexs',\n                soundstart = 'disigun1',\n                soundtrigger = true,\n                tolerance = 10000,\n                turret = true,\n                weapontimer = 4.2,\n                weapontype = 'DGun',\n                weaponvelocity = 505,\n                damage = {\n                    commanders = 0,\n                    default = 20000,\n                    scavboss = 1000,\n                    raptors = 10000,\n                },\n            },\n            corcomeyelaser = {\n                allowNonBlockingAim = true,\n                avoidfriendly = true,\n                areaofeffect = 6,\n                avoidfeature = false,\n                beamtime = 0.033,\n                camerashake = 0.1,\n                collidefriendly = false,\n                corethickness = 0.35,\n                craterareaofeffect = 12,\n                craterboost = 0,\n                cratermult = 0,\n                edgeeffectiveness = 1,\n                energypershot = 0,\n                explosiongenerator = 'custom:laserhit-small-red',\n                firestarter = 90,\n                firetolerance = 300,\n                impulsefactor = 0,\n                laserflaresize = 2,\n                name = 'EyeLaser',\n                noselfdamage = true,\n                proximitypriority = 1,\n                range = 870,\n                reloadtime = 0.033,\n                rgbcolor = '0 1 0',\n                rgbcolor2 = '0.8 0 0',\n                scrollspeed = 5,\n                soundhitdry = 'flamhit1',\n                soundhitwet = 'sizzle',\n                soundstart = 'heatray3burn',\n                soundstartvolume = 6,\n                soundtrigger = 1,\n                thickness = 2.5,\n                turret = true,\n                weapontype = 'BeamLaser',\n                weaponvelocity = 1500,\n                damage = {\n                    default = 185,\n                },\n            },\n        },\n        weapons = {\n            [1] = {\n                def = 'CORCOMLASER',\n                onlytargetcategory = 'NOTSUB',\n                fastautoretargeting = true,\n            },\n            [3] = {\n                badtargetcategory = 'VTOL',\n                def = 'disintegratorxl',\n                onlytargetcategory = 'SURFACE',\n            },\n            [6] = {\n                def = '',\n            },\n            [5] = {\n                badtargetcategory = 'VTOL GROUNDSCOUT',\n                def = 'corcomeyelaser',\n                onlytargetcategory = 'SURFACE',\n            },\n        },\n    },\n}\n"
        },
        {
            "path": "lua/evocom-leg.lua",
            "data": "-- NuttyB v1.52c Legion Com\n-- Authors: ChrispyNut, BackBash\n-- https://github.com/nuttyb-community/nuttyb\n\n{\n    legcom = {\n        energymake = 50,\n        metalmake = 5,\n        health = 6000,\n        autoheal = 40,\n        buildoptions = {\n            'legrezbot',\n            'legdtl',\n            'legdtf',\n            'legdtr',\n            'legjam',\n            'legwin',\n            'leglab',\n            'legeconv',\n        },\n        customparams = {\n            evolution_target = 'legcomlvl2',\n            evolution_condition = 'timer_global',\n            evolution_timer = 420,\n            inheritxpratemultiplier = 0.5,\n            childreninheritxp = 'TURRET MOBILEBUILT',\n            parentsinheritxp = 'TURRET MOBILEBUILT',\n        },\n        weapondefs = {\n            legcomlaser = {\n                corethickness = 0.25,\n                duration = 0.09,\n                name = 'Light close-quarters g2g/g2a laser',\n                range = 360,\n                reloadtime = 0.20,\n                rgbcolor = '0 2 1',\n                soundhitdry = '',\n                soundhitwet = 'sizzle',\n                soundstart = 'lasrcrw1',\n                soundtrigger = true,\n                sprayangle = 700,\n                thickness = 6,\n                texture1 = 'shot',\n                texture2 = 'empty',\n                weapontype = 'LaserCannon',\n                weaponvelocity = 2100,\n                damage = {\n                    default = 250,\n                },\n            },\n            shotgun = {\n                areaofeffect = 60,\n                energypershot = 0,\n                avoidfeature = false,\n                craterboost = 0,\n                cratermult = 0,\n                cameraShake = 0,\n                edgeeffectiveness = 0.65,\n                explosiongenerator = 'custom:genericshellexplosion-small',\n                impulseboost = 0.2,\n                impulsefactor = 0.2,\n                intensity = 3,\n                name = '6 Gauge Shotgun',\n                noselfdamage = true,\n                predictboost = 1,\n                projectiles = 6,\n                range = 320,\n                reloadtime = 2,\n                rgbcolor = '1 0.75 0.25',\n                size = 2,\n                soundhit = 'xplomed2xs',\n                soundhitwet = 'splsmed',\n                soundstart = 'kroggie2xs',\n                soundstartvolume = 12,\n                sprayangle = 2000,\n                turret = true,\n                commandfire = true,\n                weapontimer = 1,\n                weapontype = 'Cannon',\n                weaponvelocity = 600,\n                stockpile = true,\n                stockpiletime = 5,\n                customparams = {\n                    stockpilelimit = 10,\n                },\n                damage = {\n                    default = 1800,\n                    commanders = 0,\n                },\n            },\n        },\n        weapons = {\n            [3] = {\n                def = 'shotgun',\n                onlytargetcategory = 'SURFACE',\n            },\n        },\n    },\n    legcomlvl2 = {\n        energymake = 150,\n        metalmake = 15,\n        speed = 57.5,\n        autoheal = 100,\n        health = 6700,\n        customparams = {\n            evolution_condition = 'timer_global',\n            evolution_timer = 1020,\n            inheritxpratemultiplier = 0.5,\n            childreninheritxp = 'TURRET MOBILEBUILT',\n            parentsinheritxp = 'TURRET MOBILEBUILT',\n        },\n        buildoptions = {\n            'legrezbot',\n            'legadvsol',\n            'corhllt',\n            'leggeo',\n            'legnanotc',\n            'legjam',\n            'legdtf',\n            'legmg',\n            'legrad',\n            'legdtl',\n            'legdtr',\n            'legrhapsis',\n            'legwin',\n            'legeconv',\n        },\n        weapondefs = {\n            legcomlaser = {\n                accuracy = 50,\n                areaofeffect = 12,\n                avoidfriendly = false,\n                avoidfeature = false,\n                collidefriendly = false,\n                collidefeature = true,\n                beamtime = 0.09,\n                corethickness = 0.3,\n                duration = 0.09,\n                explosiongenerator = 'custom:laserhit-small-red',\n                firestarter = 70,\n                impactonly = 1,\n                impulseboost = 0,\n                impulsefactor = 0,\n                name = 'Light close-quarters g2g/g2a laser',\n                noselfdamage = true,\n                range = 500,\n                reloadtime = 0.2,\n                rgbcolor = '0 0.95 0.05',\n                soundhitdry = '',\n                soundhitwet = 'sizzle',\n                soundstart = 'lasrcrw1',\n                soundtrigger = true,\n                sprayangle = 500,\n                targetmoveerror = 0.05,\n                thickness = 7,\n                tolerance = 1000,\n                texture1 = 'shot',\n                texture2 = 'empty',\n                turret = true,\n                weapontype = 'LaserCannon',\n                weaponvelocity = 2200,\n                damage = {\n                    bombers = 180,\n                    default = 450,\n                    fighters = 110,\n                    subs = 5,\n                },\n            },\n            shotgun = {\n                areaofeffect = 65,\n                energypershot = 0,\n                avoidfeature = false,\n                craterboost = 0,\n                cratermult = 0,\n                cameraShake = 0,\n                edgeeffectiveness = 0.65,\n                explosiongenerator = 'custom:genericshellexplosion-small',\n                impulseboost = 0.2,\n                impulsefactor = 0.2,\n                intensity = 3,\n                name = '12 Gauge Shotgun',\n                noselfdamage = true,\n                predictboost = 1,\n                projectiles = 7,\n                range = 440,\n                reloadtime = 2,\n                rgbcolor = '1 0.75 0.25',\n                size = 2.5,\n                soundhit = 'xplomed2xs',\n                soundhitwet = 'splsmed',\n                soundstart = 'kroggie2xs',\n                soundstartvolume = 12,\n                sprayangle = 2250,\n                turret = true,\n                commandfire = true,\n                weapontimer = 1,\n                weapontype = 'Cannon',\n                weaponvelocity = 600,\n                stockpile = true,\n                stockpiletime = 5,\n                customparams = {\n                    stockpilelimit = 15,\n                },\n                damage = {\n                    default = 2200,\n                    commanders = 0,\n                },\n            },\n        },\n        weapons = {\n            [1] = {\n                def = 'legcomlaser',\n                onlytargetcategory = 'NOTSUB',\n                fastautoretargeting = true,\n            },\n            [3] = {\n                def = 'shotgun',\n                onlytargetcategory = 'SURFACE',\n            },\n        },\n    },\n    legcomlvl3 = {\n        energymake = 1280,\n        metalmake = 40,\n        speed = 70.5,\n        workertime = 700,\n        autoheal = 150,\n        health = 7500,\n        customparams = {\n            evolution_condition = 'timer_global',\n            evolution_timer = 1440,\n            inheritxpratemultiplier = 0.5,\n            childreninheritxp = 'TURRET MOBILEBUILT',\n            parentsinheritxp = 'TURRET MOBILEBUILT',\n        },\n        buildoptions = {\n            'legdeflector',\n            'legfus',\n            'legbombard',\n            'legadvestore',\n            'legmoho',\n            'legadveconv',\n            'legarad',\n            'legajam',\n            'legforti',\n            'legacluster',\n            'legamstor',\n            'legflak',\n            'legabm',\n            'legbastion',\n            'legdtr',\n            'legdtf',\n            'legrezbot',\n            'legdtl',\n            'leglab',\n            'legbastiont4',\n            'legnanotct3',\n            'legapopupdef',\n            'epic_starfall',\n            'epic_bastion',\n            'epic_sentinel',\n        },\n        weapondefs = {\n            legcomlaser = {\n                accuracy = 50,\n                areaofeffect = 12,\n                avoidfriendly = true,\n                avoidfeature = true,\n                collidefriendly = false,\n                collidefeature = true,\n                beamtime = 0.09,\n                corethickness = 0.55,\n                duration = 0.09,\n                explosiongenerator = 'custom:laserhit-small-red',\n                firestarter = 70,\n                impactonly = 0,\n                impulseboost = 0,\n                impulsefactor = 0,\n                name = 'Light close-quarters g2g/g2a laser',\n                noselfdamage = true,\n                range = 640,\n                reloadtime = 0.2,\n                rgbcolor = '0 0.2 0.8',\n                soundhitdry = '',\n                soundhitwet = 'sizzle',\n                soundstart = 'lasrcrw1',\n                soundtrigger = true,\n                sprayangle = 500,\n                targetmoveerror = 0.05,\n                thickness = 7,\n                tolerance = 1000,\n                texture1 = 'shot',\n                texture2 = 'empty',\n                turret = true,\n                weapontype = 'LaserCannon',\n                weaponvelocity = 2500,\n                damage = {\n                    bombers = 180,\n                    default = 650,\n                    fighters = 110,\n                    subs = 5,\n                },\n            },\n            shotgun = {\n                areaofeffect = 90,\n                energypershot = 0,\n                avoidfeature = false,\n                craterboost = 0,\n                cratermult = 0,\n                cameraShake = 0,\n                edgeeffectiveness = 0.65,\n                explosiongenerator = 'custom:genericshellexplosion-small',\n                impulseboost = 0.2,\n                impulsefactor = 0.2,\n                intensity = 3,\n                name = '12 Gauge Shotgun',\n                noselfdamage = true,\n                predictboost = 1,\n                projectiles = 7,\n                range = 540,\n                reloadtime = 2,\n                rgbcolor = '1 0.75 0.25',\n                size = 2.5,\n                soundhit = 'xplomed2xs',\n                soundhitwet = 'splsmed',\n                soundstart = 'kroggie2xs',\n                soundstartvolume = 12,\n                sprayangle = 2500,\n                turret = true,\n                commandfire = true,\n                weapontimer = 1,\n                weapontype = 'Cannon',\n                weaponvelocity = 600,\n                stockpile = true,\n                stockpiletime = 5,\n                customparams = {\n                    stockpilelimit = 20,\n                },\n                damage = {\n                    default = 3200,\n                    commanders = 0,\n                },\n            },\n        },\n        weapons = {\n            [1] = {\n                def = 'legcomlaser',\n                onlytargetcategory = 'NOTSUB',\n                fastautoretargeting = true,\n            },\n            [3] = {\n                def = 'shotgun',\n                onlytargetcategory = 'SURFACE',\n            },\n            [5] = {\n                def = '',\n            },\n        },\n    },\n    legcomlvl4 = {\n\t\t\t\tfootprintx = 2,\n        footprintz = 2,\n        energymake = 1980,\n        metalmake = 46,\n        speed = 88.5,\n        workertime = 1000,\n        autoheal = 180,\n        health = 24500,\n        customparams = {\n            evolution_condition = 'timer_global',\n            evolution_timer = 1740,\n            inheritxpratemultiplier = 0.5,\n            childreninheritxp = 'TURRET MOBILEBUILT',\n            parentsinheritxp = 'TURRET MOBILEBUILT',\n        },\n        buildoptions = {\n            'legdeflector',\n            'legfus',\n            'legbombard',\n            'legadvestore',\n            'legmoho',\n            'legadveconv',\n            'legeshotgunmech',\n            'legarad',\n            'legajam',\n            'legkeres',\n            'legacluster',\n            'legamstor',\n            'legflak',\n            'legabm',\n            'legbastion',\n            'legbastiont4',\n            'legnanotct2',\n            'legnanotct2plat',\n            'legrwall',\n            'leglab',\n            'legtarg',\n            'legsd',\n            'legpede',\n            'legerailtank',\n            'legeheatraymech',\n            'legrezbot',\n            'legafus',\n            'leglraa',\n            'legdtl',\n            'legdtf',\n            'legministarfall',\n            'legstarfall',\n            'leggatet3',\n            'legperdition',\n            'legsilo',\n            'legsrailt4',\n            'legelrpcmech',\n            'legdtr',\n            'legnanotct3',\n            'legapopupdef',\n            'leglrpc',\n            'epic_starfall',\n            'epic_bastion',\n            'epic_sentinel',\n        },\n        weapondefs = {\n            legcomlaser = {\n                accuracy = 50,\n                areaofeffect = 12,\n                avoidfriendly = true,\n                avoidfeature = true,\n                collidefriendly = false,\n                collidefeature = true,\n                beamtime = 0.1,\n                corethickness = 0.5,\n                duration = 0.09,\n                explosiongenerator = 'custom:laserhit-small-red',\n                firestarter = 70,\n                impactonly = 0,\n                impulseboost = 0,\n                impulsefactor = 0,\n                name = 'Light close-quarters g2g/g2a laser',\n                noselfdamage = true,\n                range = 900,\n                reloadtime = 0.1,\n                rgbcolor = '0.45 0 1',\n                soundhitdry = '',\n                soundhitwet = 'sizzle',\n                soundstart = 'lasrcrw1',\n                soundtrigger = 1,\n                sprayangle = 400,\n                targetmoveerror = 0.05,\n                thickness = 6,\n                tolerance = 1000,\n                texture1 = 'shot',\n                texture2 = 'empty',\n                turret = true,\n                weapontype = 'LaserCannon',\n                weaponvelocity = 3000,\n                damage = {\n                    bombers = 180,\n                    default = 1750,\n                    fighters = 110,\n                    subs = 5,\n                },\n            },\n            shotgun = {\n                areaofeffect = 75,\n                energypershot = 0,\n                avoidfeature = false,\n                craterboost = 0,\n                cratermult = 0,\n                cameraShake = 0,\n                edgeeffectiveness = 0.65,\n                explosiongenerator = 'custom:genericshellexplosion-small',\n                impulseboost = 0.2,\n                impulsefactor = 0.2,\n                intensity = 3,\n                name = '60 Gauge Raptor Popper',\n                noselfdamage = true,\n                predictboost = 1,\n                projectiles = 9,\n                range = 550,\n                reloadtime = 1,\n                rgbcolor = '1 0.75 0.25',\n                size = 5,\n                soundhit = 'xplomed2xs',\n                soundhitwet = 'splsmed',\n                soundstart = 'kroggie2xs',\n                soundstartvolume = 12,\n                sprayangle = 3000,\n                turret = true,\n                commandfire = true,\n                weapontimer = 1,\n                weapontype = 'Cannon',\n                weaponvelocity = 600,\n                stockpile = true,\n                stockpiletime = 4,\n                customparams = {\n                    stockpilelimit = 20,\n                },\n                damage = {\n                    default = 4400,\n                    commanders = 0,\n                },\n            },\n        },\n        weapons = {\n            [1] = {\n                def = 'legcomlaser',\n                onlytargetcategory = 'NOTSUB',\n                fastautoretargeting = true,\n            },\n            [3] = {\n                def = 'shotgun',\n                onlytargetcategory = 'SURFACE',\n            },\n            [5] = {\n                def = '',\n            },\n        },\n    },\n    legcomlvl5 = {\n        energymake = 2280,\n        metalmake = 64,\n        speed = 100,\n        workertime = 1700,\n        autoheal = 4500,\n        health = 53900,\n        customparams = {\n            inheritxpratemultiplier = 0.5,\n            childreninheritxp = 'TURRET MOBILEBUILT',\n            parentsinheritxp = 'TURRET MOBILEBUILT',\n        },\n        buildoptions = {\n            'legdeflector',\n            'legfus',\n            'legbombard',\n            'legadvestore',\n            'legmoho',\n            'legadveconv',\n            'legeshotgunmech',\n            'legarad',\n            'legajam',\n            'legkeres',\n            'legacluster',\n            'legamstor',\n            'legflak',\n            'legabm',\n            'legbastion',\n            'legbastiont4',\n            'legnanotct2',\n            'legnanotct2plat',\n            'legrwall',\n            'leglab',\n            'legtarg',\n            'legsd',\n            'legpede',\n            'legerailtank',\n            'legeheatraymech',\n            'legrezbot',\n            'legafus',\n            'leglraa',\n            'legdtl',\n            'legdtf',\n            'legministarfall',\n            'legstarfall',\n            'leggatet3',\n            'legperdition',\n            'legsilo',\n            'legsrailt4',\n            'legelrpcmech',\n            'legdtr',\n            'legnanotct3',\n            'legapopupdef',\n            'leglrpc',\n            'epic_starfall',\n            'epic_bastion',\n            'epic_sentinel',\n        },\n        weapondefs = {\n            machinegun = {\n                accuracy = 80,\n                areaofeffect = 10,\n                avoidfeature = false,\n                beamburst = true,\n                beamdecay = 1,\n                beamtime = 0.07,\n                burst = 6,\n                burstrate = 0.10667,\n                camerashake = 0,\n                corethickness = 0.35,\n                craterareaofeffect = 0,\n                craterboost = 0,\n                cratermult = 0,\n                edgeeffectiveness = 1,\n                explosiongenerator = 'custom:laserhit-medium-red',\n                firestarter = 10,\n                impulsefactor = 0,\n                largebeamlaser = true,\n                laserflaresize = 30,\n                name = 'Rapid-fire close quarters g2g armor-piercing laser',\n                noselfdamage = true,\n                pulsespeed = q8,\n                range = 1100,\n                reloadtime = 0.50,\n                rgbcolor = '0.7 0.3 1.0',\n                rgbcolor2 = '0.8 0.6 1.0',\n                soundhitdry = '',\n                soundhitwet = 'sizzle',\n                soundstart = 'lasfirerc',\n                soundtrigger = 1,\n                sprayangle = 500,\n                targetborder = 0.2,\n                thickness = 5.5,\n                tolerance = 4500,\n                turret = true,\n                weapontype = 'BeamLaser',\n                weaponvelocity = 920,\n                damage = {\n                    default = 1300,\n                    vtol = 180,\n                },\n            },\n            shotgunarm = {\n                areaofeffect = 112,\n                commandfire = true,\n                avoidfeature = false,\n                craterboost = 0,\n                cratermult = 0,\n                cameraShake = 0,\n                edgeeffectiveness = 0.65,\n                explosiongenerator = 'custom:genericshellexplosion-medium',\n                impulsefactor = 0.8,\n                intensity = 0.2,\n                mygravity = 1,\n                name = 'GaussCannon',\n                noselfdamage = true,\n                predictboost = 1,\n                projectiles = 20,\n                range = 650,\n                reloadtime = 1,\n                rgbcolor = '0.8 0.4 1.0',\n                size = 4,\n                sizeDecay = 0.044,\n                stages = 16,\n                alphaDecay = 0.66,\n                soundhit = 'xplomed2xs',\n                soundhitwet = 'splsmed',\n                soundstart = 'kroggie2xs',\n                sprayangle = 3500,\n                tolerance = 6000,\n                turret = true,\n                waterweapon = true,\n                weapontimer = 2,\n                weapontype = 'Cannon',\n                weaponvelocity = 900,\n                stockpile = true,\n                stockpiletime = 2,\n                customparams = {\n                    stockpilelimit = 50,\n                },\n                damage = {\n                    default = 10000,\n                    commanders = 0,\n                },\n            },\n            exp_heavyrocket = {\n                areaofeffect = 70,\n                collidefriendly = 0,\n                collidefeature = 0,\n                cameraShake = 0,\n                energypershot = 125,\n                avoidfeature = 0,\n                avoidfriendly = 0,\n                burst = 4,\n                burstrate = 0.3,\n                cegtag = 'missiletrailsmall-red',\n                colormap = '0.75 0.73 0.67 0.024   0.37 0.4 0.30 0.021   0.22 0.21 0.14 0.018  0.024 0.014 0.009 0.03   0.0 0.0 0.0 0.008',\n                craterboost = 0,\n                craterareaofeffect = 0,\n                cratermult = 0,\n                dance = 24,\n                edgeeffectiveness = 0.65,\n                explosiongenerator = 'custom:burnblack',\n                firestarter = 70,\n                flighttime = 1.05,\n                flamegfxtime = 1,\n                impulsefactor = 0.123,\n                impactonly = 1,\n                model = 'catapultmissile.s3o',\n                movingaccuracy = 600,\n                name = 'Raptor Boomer',\n                noselfdamage = true,\n                proximitypriority = {},\n                range = 700,\n                reloadtime = 1,\n                smoketrail = true,\n                smokePeriod = 4,\n                smoketime = 16,\n                smokesize = 8.5,\n                smokecolor = 0.5,\n                size = 2,\n                smokeTrailCastShadow = false,\n                soundhit = 'rockhit',\n                soundhitwet = 'splsmed',\n                soundstart = 'rapidrocket3',\n                startvelocity = 165,\n                rgbcolor = '1 0.25 0.1',\n                texture1 = 'null',\n                texture2 = 'smoketrailbar',\n                trajectoryheight = 1,\n                targetmoveerror = 0.2,\n                turnrate = 5000,\n                tracks = true,\n                turret = true,\n                allowNonBlockingAim = true,\n                weaponacceleration = 660,\n                weapontimer = 6,\n                weapontype = 'MissileLauncher',\n                weaponvelocity = 950,\n                wobble = 2000,\n                damage = {\n                    default = 1300,\n                },\n                customparams = {\n                    exclude_preaim = true,\n                    overrange_distance = 777,\n                    projectile_destruction_method = 'descend',\n                },\n            },\n        },\n        weapons = {\n            [1] = {\n                def = 'machinegun',\n                onlytargetcategory = 'NOTSUB',\n                fastautoretargeting = true,\n            },\n            [3] = {\n                def = 'shotgunarm',\n                onlytargetcategory = 'WEAPON',\n            },\n            [5] = {\n                def = 'exp_heavyrocket',\n                onlytargetcategory = 'SURFACE',\n            },\n        },\n    },\n}\n"
        },
        {
            "path": "lua/lrpc-rebalance.lua",
            "data": "-- NuttyB lrpc rebalance v2\n-- https://github.com/nuttyb-community/nuttyb\n\ndo\n    local unitDefs = UnitDefs or {}\n\n    if unitDefs.armbrtha then\n        table.mergeInPlace(unitDefs.armbrtha, {\n            health = 13000,\n            weapondefs = {\n                ARMBRTHA_MAIN = {\n                    damage = {\n                        commanders = 480,\n                        default = 33000,\n                    },\n                    areaofeffect = 60,\n                    energypershot = 8000,\n                    range = 2400,\n                    reloadtime = 9,\n                    turnrate = 20000,\n                },\n            },\n        })\n    end\n\n    if unitDefs.corint then\n        table.mergeInPlace(unitDefs.corint, {\n            health = 13000,\n            weapondefs = {\n                CORINT_MAIN = {\n                    damage = {\n                        commanders = 480,\n                        default = 85000,\n                    },\n                    areaofeffect = 230,\n                    edgeeffectiveness = 0.6,\n                    energypershot = 15000,\n                    range = 2700,\n                    reloadtime = 18,\n                },\n            },\n        })\n    end\n\n    if unitDefs.leglrpc then\n        table.mergeInPlace(unitDefs.leglrpc, {\n            health = 13000,\n            weapondefs = {\n                LEGLRPC_MAIN = {\n                    damage = {\n                        commanders = 480,\n                        default = 4500,\n                    },\n                    energypershot = 2000,\n                    range = 2000,\n                    reloadtime = 2,\n                    turnrate = 30000,\n                },\n            },\n        })\n    end\nend\n"
        },
        {
            "path": "lua/main-defs.lua",
            "data": "-- NuttyB v1.52b Def Main\n-- Authors: ChrispyNut, BackBash\n-- https://github.com/nuttyb-community/nuttyb\n\nlocal unitDefs, repulsor, pairs, tableMerge =\n    UnitDefs or {}, 'repulsor', pairs, table.merge\n\nfunction addWeapon(h, i, j)\n    unitDefs[h] = unitDefs[h] or {}\n    unitDefs[h].weapons = unitDefs[h].weapons or {}\n    unitDefs[h].weapondefs = unitDefs[h].weapondefs or {}\n    unitDefs[h].customparams = unitDefs[h].customparams or {}\n    table.insert(unitDefs[h].weapons, {\n        def = repulsor,\n        onlytargetcategory = j or '',\n    })\n    unitDefs[h].weapondefs[repulsor] = i\n    if i.shield and i.shield.power > 0 then\n        i.range = i.shield.radius\n        unitDefs[h].customparams = tableMerge(unitDefs[h].customparams or {}, {\n            off_on_stun = 'true',\n            shield_color_mult = 0.8,\n            shield_power = i.shield.power,\n            shield_radius = i.shield.radius,\n        })\n    end\nend\n\nfor _, shieldedUnit in ipairs({\n    'armcom',\n    'armcomlvl2',\n    'armcomlvl3',\n    'armcomlvl4',\n    'corcom',\n    'corcomlvl2',\n    'corcomlvl3',\n    'corcomlvl4',\n    'legcom',\n    'legcomlvl2',\n    'legcomlvl3',\n    'legcomlvl4',\n    'legcomlvl5',\n}) do\n    addWeapon(shieldedUnit, {\n        avoidfeature = false,\n        craterareaofeffect = 0,\n        craterboost = 0,\n        cratermult = 0,\n        edgeeffectiveness = 0.15,\n        name = 'PlasmaRepulsor',\n        range = 50,\n        soundhitwet = 'sizzle',\n        weapontype = 'Shield',\n        damage = {\n            default = 100,\n        },\n        shield = {\n            alpha = 0.15,\n            armortype = 'shields',\n            energyuse = 1,\n            force = 2.5,\n            intercepttype = 1,\n            power = 500,\n            powerregen = 3,\n            powerregenenergy = 3,\n            radius = 100,\n            repulser = true,\n            smart = true,\n            startingpower = 100,\n            visiblerepulse = true,\n            badcolor = {\n                1,\n                0.2,\n                0.2,\n                0.2,\n            },\n            goodcolor = {\n                0.2,\n                1,\n                0.2,\n                0.17,\n            },\n        },\n    })\nend\n\nfor name, def in pairs(unitDefs) do\n    if string.sub(name, 1, 24) == 'raptor_air_fighter_basic' then\n        if def.weapondefs then\n            for _, s in pairs(def.weapondefs) do\n                s.name = 'Spike'\n                s.accuracy = 200\n                s.collidefriendly = 0\n                s.collidefeature = 0\n                s.avoidfeature = 0\n                s.avoidfriendly = 0\n                s.areaofeffect = 64\n                s.edgeeffectiveness = 0.3\n                s.explosiongenerator = 'custom:raptorspike-large-sparks-burn'\n                s.cameraShake = {}\n                s.dance = {}\n                s.interceptedbyshieldtype = 0\n                s.model = 'Raptors/spike.s3o'\n                s.reloadtime = 1.1\n                s.soundstart = 'talonattack'\n                s.startvelocity = 200\n                s.submissile = 1\n                s.smoketrail = 0\n                s.smokePeriod = {}\n                s.smoketime = {}\n                s.smokesize = {}\n                s.smokecolor = {}\n                s.soundhit = {}\n                s.texture1 = {}\n                s.texture2 = {}\n                s.tolerance = {}\n                s.tracks = 0\n                s.turnrate = 60000\n                s.weaponacceleration = 100\n                s.weapontimer = 1\n                s.weaponvelocity = 1000\n                s.weapontype = {}\n                s.wobble = {}\n            end\n        end\n    elseif name:match '^[acl][ore][rgm]com' and not name:match '_scav$' then\n        table.mergeInPlace(def, {\n            customparams = {\n                combatradius = 0,\n                fall_damage_multiplier = 0,\n                paratrooper = true,\n                wtboostunittype = {},\n            },\n            featuredefs = {\n                dead = {\n                    damage = 9999999,\n                    reclaimable = false,\n                    mass = 9999999,\n                },\n            },\n        })\n    end\nend\n\nlocal weaponMods = {\n    raptor_air_kamikaze_basic_t2_v1 = {\n        selfdestructas = 'raptor_empdeath_big',\n    },\n    raptor_land_swarmer_emp_t2_v1 = {\n        weapondefs = {\n            raptorparalyzersmall = {\n                damage = { shields = 70 },\n                paralyzetime = 6,\n            },\n        },\n    },\n    raptor_land_assault_emp_t2_v1 = {\n        weapondefs = {\n            raptorparalyzerbig = {\n                damage = { shields = 150 },\n                paralyzetime = 10,\n            },\n        },\n    },\n    raptor_allterrain_arty_emp_t2_v1 = {\n        weapondefs = {\n            goolauncher = {\n                paralyzetime = 6,\n            },\n        },\n    },\n    raptor_allterrain_arty_emp_t4_v1 = {\n        weapondefs = {\n            goolauncher = {\n                paralyzetime = 10,\n            },\n        },\n    },\n    raptor_air_bomber_emp_t2_v1 = {\n        weapondefs = {\n            weapon = {\n                damage = {\n                    shields = 1100,\n                    default = 2000,\n                },\n                paralyzetime = 10,\n            },\n        },\n    },\n    raptor_allterrain_swarmer_emp_t2_v1 = {\n        weapondefs = {\n            raptorparalyzersmall = {\n                damage = { shields = 70 },\n                paralyzetime = 6,\n            },\n        },\n    },\n    raptor_allterrain_assault_emp_t2_v1 = {\n        weapondefs = {\n            raptorparalyzerbig = {\n                damage = { shields = 150 },\n                paralyzetime = 6,\n            },\n        },\n    },\n    raptor_matriarch_electric = {\n        weapondefs = {\n            goo = { paralyzetime = 13 },\n            melee = { paralyzetime = 13 },\n            spike_emp_blob = { paralyzetime = 13 },\n        },\n    },\n}\n\nfor unitName, modifications in pairs(weaponMods) do\n    if unitDefs[unitName] then\n        unitDefs[unitName] = tableMerge(unitDefs[unitName], modifications)\n    end\nend\n\nfor _, raptorTurretName in pairs({\n    'raptor_antinuke',\n    'raptor_turret_acid_t2_v1',\n    'raptor_turret_acid_t3_v1',\n    'raptor_turret_acid_t4_v1',\n    'raptor_turret_antiair_t2_v1',\n    'raptor_turret_antiair_t3_v1',\n    'raptor_turret_antiair_t4_v1',\n    'raptor_turret_antinuke_t2_v1',\n    'raptor_turret_antinuke_t3_v1',\n    'raptor_turret_basic_t2_v1',\n    'raptor_turret_basic_t3_v1',\n    'raptor_turret_basic_t4_v1',\n    'raptor_turret_burrow_t2_v1',\n    'raptor_turret_emp_t2_v1',\n    'raptor_turret_emp_t3_v1',\n    'raptor_turret_emp_t4_v1',\n    'raptor_worm_green',\n}) do\n    local raptorTurretDef = unitDefs[raptorTurretName]\n    raptorTurretDef.maxthisunit = 10\n    raptorTurretDef.health = raptorTurretDef.health * 2\n    if raptorTurretDef.weapondefs then\n        for _, weapon in pairs(raptorTurretDef.weapondefs) do\n            weapon.reloadtime = weapon.reloadtime / 1.5\n            weapon.range = weapon.range / 2\n        end\n    end\nend\n\nfor _, q in pairs(unitDefs) do\n    if q.builder == true then\n        if q.canfly == true then\n            q.explodeas = ''\n            q.selfdestructas = ''\n        end\n    end\nend\n\nlocal bombers = {\n    'raptor_air_bomber_basic_t2_v1',\n    'raptor_air_bomber_basic_t2_v2',\n    'raptor_air_bomber_basic_t4_v1',\n    'raptor_air_bomber_basic_t4_v2',\n    'raptor_air_bomber_basic_t1_v1',\n}\n\nfor _, toChangeName in pairs(bombers) do\n    local def = unitDefs[toChangeName]\n    if def.weapondefs then\n        for _, weaponDef in pairs(def.weapondefs) do\n            weaponDef.damage.default = weaponDef.damage.default / 1.30\n        end\n    end\nend\n\nlocal units = { 'armrespawn', 'correspawn', 'legnanotcbase' }\nfor _, name in ipairs(units) do\n    local u = UnitDefs[name]\n    if u then\n        u.cantbetransported, u.footprintx, u.footprintz = false, 4, 4\n        u.customparams = u.customparams or {}\n        u.customparams.paratrooper = true\n        u.customparams.fall_damage_multiplier = 0\n    end\nend\n\n-- Hive Spawns\nlocal UnitDefs = UnitDefs or {}\n\nlocal function deepCopy(orig)\n    local copy = {}\n    for k, v in pairs(orig) do\n        copy[k] = type(v) == 'table' and deepCopy(v) or v\n    end\n    return copy\nend\n\nlocal function insertMissing(t, s)\n    for k, v in pairs(s) do\n        if type(v) == 'table' then\n            t[k] = t[k] or {}\n            insertMissing(t[k], v)\n        elseif t[k] == nil then\n            t[k] = v\n        end\n    end\nend\n\nlocal function cloneUnit(base, new, additions)\n    if UnitDefs[base] and not UnitDefs[new] then\n        local copy = deepCopy(UnitDefs[base])\n        insertMissing(copy, additions)\n        UnitDefs[new] = copy\n    end\nend\n\nlocal clones = {\n    {\n        'raptor_land_swarmer_basic_t1_v1',\n        'raptor_hive_swarmer_basic',\n        {\n            name = 'Hive Spawn',\n            customparams = {\n                i18n_en_humanname = 'Hive Spawn',\n                i18n_en_tooltip = 'Raptor spawned to defend hives from attackers.',\n            },\n        },\n    },\n    {\n        'raptor_land_assault_basic_t2_v1',\n        'raptor_hive_assault_basic',\n        {\n            name = 'Armored Assault Raptor',\n            customparams = {\n                i18n_en_humanname = 'Armored Assault Raptor',\n                i18n_en_tooltip = 'Heavy, slow, and unyieldingthese beasts are made to take the hits others cant.',\n            },\n        },\n    },\n    {\n        'raptor_land_assault_basic_t4_v1',\n        'raptor_hive_assault_heavy',\n        {\n            name = 'Heavy Armored Assault Raptor',\n            customparams = {\n                i18n_en_humanname = 'Heavy Armored Assault Raptor',\n                i18n_en_tooltip = 'Lacking speed, these armored monsters make up for it with raw, unbreakable toughness.',\n            },\n        },\n    },\n    {\n        'raptor_land_assault_basic_t4_v2',\n        'raptor_hive_assault_superheavy',\n        {\n            name = 'Super Heavy Armored Assault Raptor',\n            customparams = {\n                i18n_en_humanname = 'Super Heavy Armored Assault Raptor',\n                i18n_en_tooltip = 'These super-heavy armored beasts may be slow, but theyre built to take a pounding and keep rolling.',\n            },\n        },\n    },\n    {\n        'raptorartillery',\n        'raptor_evolved_motort4',\n        {\n            name = 'Evolved Lobber',\n            customparams = {\n                i18n_en_humanname = 'Evolved Lobber',\n                i18n_en_tooltip = 'These lobbers did not just evolvethey became deadlier than anything before them.',\n            },\n        },\n    },\n    {\n        'raptor_land_swarmer_basic_t1_v1',\n        'raptor_acidspawnling',\n        {\n            name = 'Acid Spawnling',\n            customparams = {\n                i18n_en_humanname = 'Acid Spawnling',\n                i18n_en_tooltip = 'This critters are so cute but can be so deadly at the same time.',\n            },\n        },\n    },\n}\nfor _, data in ipairs(clones) do\n    cloneUnit(data[1], data[2], data[3])\nend\n\nlocal oldUnitDef_Post = UnitDef_Post\nfunction UnitDef_Post(unitID, unitDef)\n    if oldUnitDef_Post and oldUnitDef_Post ~= UnitDef_Post then\n        oldUnitDef_Post(unitID, unitDef)\n    end\n\n    local basehp = (\n        UnitDefs['raptor_land_swarmer_basic_t1_v1']\n        and UnitDefs['raptor_land_swarmer_basic_t1_v1'].health\n    )\n\n    local weapon_common = {\n        texture1 = {},\n        texture2 = {},\n        tracks = false,\n        weaponvelocity = 4000,\n        smokePeriod = {},\n        smoketime = {},\n        smokesize = {},\n        smokecolor = {},\n        smoketrail = 0,\n    }\n\n    local weapon_poopoo = {\n        accuracy = 2048,\n        areaofeffect = 256,\n        burst = 4,\n        burstrate = 0.4,\n        flighttime = 12,\n        dance = 25,\n        craterareaofeffect = 256,\n        edgeeffectiveness = 0.7,\n        cegtag = 'blob_trail_blue',\n        explosiongenerator = 'custom:genericshellexplosion-huge-bomb',\n        impulsefactor = 0.4,\n        intensity = 0.3,\n        interceptedbyshieldtype = 1,\n        range = 2300,\n        reloadtime = 10,\n        rgbcolor = '0.2 0.5 0.9',\n        size = 8,\n        sizedecay = 0.09,\n        soundhit = 'bombsmed2',\n        soundstart = 'bugarty',\n        sprayangle = 2048,\n        tolerance = 60000,\n        turnrate = 6000,\n        trajectoryheight = 2,\n        turret = true,\n        weapontype = 'Cannon',\n        weaponvelocity = 520,\n        startvelocity = 140,\n        weaponacceleration = 125,\n        weapontimer = 0.2,\n        wobble = 14500,\n        highTrajectory = 1,\n        damage = { default = 900, shields = 600 },\n    }\n\n    local weapon_throwup = {\n        accuracy = 1024,\n        areaofeffect = 24,\n        burst = 1,\n        burstrate = 0.3,\n        cegtag = 'blob_trail_green',\n        edgeeffectiveness = 0.63,\n        explosiongenerator = 'custom:raptorspike-small-sparks-burn',\n        impulsefactor = 1,\n        intensity = 0.4,\n        interceptedbyshieldtype = 1,\n        name = 'Acid',\n        range = 250,\n        reloadtime = 1,\n        rgbcolor = '0.8 0.99 0.11',\n        size = 1,\n        stages = 6,\n        soundhit = 'bloodsplash3',\n        soundstart = 'alien_bombrel',\n        sprayangle = 128,\n        tolerance = 5000,\n        turret = true,\n        weapontimer = 0.1,\n        weapontype = 'Cannon',\n        weaponvelocity = 320,\n        damage = { default = 80 },\n    }\n\n    local overrides = {\n        raptor_hive_swarmer_basic = {\n            metalcost = 350,\n            nochasecategory = 'OBJECT',\n            icontype = 'raptor_land_swarmer_basic_t1_v1',\n        },\n        raptor_hive_assault_basic = {\n            metalcost = 3000,\n            health = 25000,\n            speed = 20.0,\n            nochasecategory = 'OBJECT',\n            icontype = 'raptor_land_assault_basic_t2_v1',\n            weapondefs = { aaweapon = weapon_common },\n        },\n        raptor_hive_assault_heavy = {\n            metalcost = 6000,\n            health = 30000,\n            speed = 17.0,\n            nochasecategory = 'OBJECT',\n            icontype = 'raptor_land_assault_basic_t4_v1',\n            weapondefs = { aaweapon = weapon_common },\n        },\n        raptor_hive_assault_superheavy = {\n            metalcost = 9000,\n            health = 35000,\n            speed = 16.0,\n            nochasecategory = 'OBJECT',\n            icontype = 'raptor_land_assault_basic_t4_v2',\n            weapondefs = { aaweapon = weapon_common },\n        },\n        raptor_evolved_motort4 = {\n            icontype = 'raptor_allterrain_arty_basic_t4_v1',\n            weapondefs = { poopoo = weapon_poopoo },\n            weapons = {\n                [1] = {\n                    badtargetcategory = 'MOBILE',\n                    def = 'poopoo',\n                    maindir = '0 0 1',\n                    maxangledif = 50,\n                    onlytargetcategory = 'NOTAIR',\n                },\n            },\n        },\n        raptor_acidspawnling = {\n            metalcost = 375,\n            energycost = 600,\n            health = basehp * 2,\n            icontype = 'raptor_land_swarmer_basic_t1_v1',\n            buildpic = 'raptors/raptorh1b.DDS',\n            objectname = 'Raptors/raptor_droneb.s3o',\n            weapondefs = { throwup = weapon_throwup },\n            weapons = {\n                [1] = {\n                    def = 'throwup',\n                    onlytargetcategory = 'NOTAIR',\n                    maindir = '0 0 1',\n                    maxangledif = 180,\n                },\n            },\n        },\n    }\n\n    for name, patch in pairs(overrides) do\n        local def = UnitDefs[name]\n        if def then\n            for k, v in pairs(patch) do\n                if k == 'weapondefs' then\n                    def.weapondefs = def.weapondefs or {}\n                    for w, p in pairs(v) do\n                        def.weapondefs[w] = def.weapondefs[w] or {}\n                        for a, b in pairs(p) do\n                            def.weapondefs[w][a] = b\n                        end\n                    end\n                elseif k == 'weapons' then\n                    def.weapons = v\n                else\n                    def[k] = v\n                end\n            end\n        end\n    end\nend\n"
        },
        {
            "path": "lua/main-units.lua",
            "data": "-- NuttyB v1.52 Units Main\n-- Authors: ChrispyNut, BackBash\n-- https://github.com/nuttyb-community/nuttyb\n\n{\n    cortron = {\n        energycost = 42000,\n        metalcost = 3600,\n        buildtime = 110000,\n        health = 12000,\n        weapondefs = {\n            cortron_weapon = {\n                energypershot = 51000,\n                metalpershot = 600,\n                range = 4050,\n                damage = {\n                    default = 9000,\n                },\n            },\n        },\n    },\n    corfort = {\n        repairable = true,\n    },\n    armfort = {\n        repairable = true,\n    },\n    legforti = {\n        repairable = true,\n    },\n    armgate = {\n        explodeas = 'empblast',\n        selfdestructas = 'empblast',\n    },\n    corgate = {\n        explodeas = 'empblast',\n        selfdestructas = 'empblast',\n    },\n    legdeflector = {\n        explodeas = 'empblast',\n        selfdestructas = 'empblast',\n    },\n    corsat = {\n        sightdistance = 3100,\n        radardistance = 4080,\n        cruisealtitude = 3300,\n        energyupkeep = 1250,\n        category = 'OBJECT',\n    },\n    armsat = {\n        sightdistance = 3100,\n        radardistance = 4080,\n        cruisealtitude = 3300,\n        energyupkeep = 1250,\n        category = 'OBJECT',\n    },\n    legstarfall = {\n        weapondefs = {\n            starfire = {\n                energypershot = 270000,\n            },\n        },\n    },\n    armflak = {\n        airsightdistance = 1350,\n        energycost = 30000,\n        metalcost = 1500,\n        health = 4000,\n        weapondefs = {\n            armflak_gun = {\n                collidefriendly = 0,\n                collidefeature = 0,\n                avoidfeature = 0,\n                avoidfriendly = 0,\n                areaofeffect = 150,\n                range = 1150,\n                reloadtime = 0.475,\n                weaponvelocity = 2400,\n                intensity = 0.18,\n            },\n        },\n    },\n    corflak = {\n        airsightdistance = 1350,\n        energycost = 30000,\n        metalcost = 1500,\n        health = 4000,\n        weapondefs = {\n            armflak_gun = {\n                collidefriendly = 0,\n                collidefeature = 0,\n                avoidfeature = 0,\n                avoidfriendly = 0,\n                areaofeffect = 200,\n                range = 1350,\n                reloadtime = 0.56,\n                weaponvelocity = 2100,\n                intensity = 0.18,\n            },\n        },\n    },\n    legflak = {\n        footprintx = 4,\n        footprintz = 4,\n        airsightdistance = 1350,\n        energycost = 35000,\n        metalcost = 2100,\n        health = 6000,\n        weapondefs = {\n            legflak_gun = {\n                collidefriendly = 0,\n                collidefeature = 0,\n                avoidfeature = 0,\n                avoidfriendly = 0,\n                areaofeffect = 100,\n                burst = 3,\n                range = 1050,\n                intensity = 0.18,\n            },\n        },\n    },\n    armmercury = {\n        airsightdistance = 2200,\n        weapondefs = {\n            arm_advsam = {\n                areaofeffect = 500,\n                energypershot = 2000,\n                explosiongenerator = 'custom:flak',\n                flighttime = 1.5,\n                metalpershot = 6,\n                name = 'Mid-range, rapid-fire g2a guided missile launcher',\n                range = 2500,\n                reloadtime = 1.2,\n                smoketrail = false,\n                startvelocity = 1500,\n                weaponacceleration = 1000,\n                weaponvelocity = 4000,\n            },\n        },\n    },\n    corscreamer = {\n        airsightdistance = 2800,\n        weapondefs = {\n            cor_advsam = {\n                areaofeffect = 800,\n                energypershot = 2000,\n                explosiongenerator = 'custom:flak',\n                flighttime = 1,\n                metalpershot = 10,\n                name = 'Long-range g2a guided heavy flak missile launcher',\n                range = 2800,\n                reloadtime = 1.8,\n                smoketrail = false,\n                startvelocity = 4000,\n                weaponacceleration = 1000,\n                weaponvelocity = 8000,\n            },\n        },\n    },\n    armassistdrone = {\n        buildoptions = {\n            [31] = 'armclaw',\n        },\n    },\n    corassistdrone = {\n        buildoptions = {\n            [32] = 'cormaw',\n        },\n    },\n    legassistdrone = {\n        buildoptions = {\n            [31] = 'legdtf',\n            [32] = 'legdtl',\n            [33] = 'legdtr',\n        },\n    },\n    legfortt4 = {\n        explodeas = 'fusionExplosionSelfd',\n        selfdestructas = 'fusionExplosionSelfd',\n    },\n    legfort = {\n        explodeas = 'empblast',\n        selfdestructas = 'empblast',\n    },\n    raptor_hive = {\n        weapondefs = {\n            antiground = {\n                burst = 5,\n                burstrate = 0.01,\n                cegtag = 'arty-heavy-purple',\n                explosiongenerator = 'custom:dirt',\n                model = 'Raptors/s_raptor_white.s3o',\n                range = 1600,\n                reloadtime = 5,\n                rgbcolor = '0.5 0 1',\n                soundhit = 'smallraptorattack',\n                soundstart = 'bugarty',\n                sprayangle = 256,\n                turret = true,\n                stockpiletime = 12,\n                proximitypriority = nil,\n                damage = {\n                    default = 1,\n                    shields = 100,\n                },\n                customparams = {\n                    spawns_count = 15,\n                    spawns_expire = 11,\n                    spawns_mode = 'random',\n                    spawns_name = 'raptor_acidspawnling raptor_hive_swarmer_basic raptor_land_swarmer_basic_t1_v1 ',\n                    spawns_surface = 'LAND SEA',\n                    stockpilelimit = 10,\n                },\n            },\n        },\n    },\n    armapt3 = {\n        buildoptions = {\n            [58] = 'armsat',\n        },\n    },\n    corapt3 = {\n        buildoptions = {\n            [58] = 'corsat',\n        },\n    },\n    legapt3 = {\n        buildoptions = {\n            [58] = 'corsat',\n        },\n    },\n    armlwall = {\n        energycost = 25000,\n        metalcost = 1300,\n        weapondefs = {\n            lightning = {\n                energypershot = 200,\n                range = 430,\n            },\n        },\n    },\n    armclaw = {\n        collisionvolumeoffsets = '0 -2 0',\n        collisionvolumescales = '30 51 30',\n        collisionvolumetype = 'Ell',\n        usepiececollisionvolumes = 0,\n        weapondefs = {\n            dclaw = {\n                energypershot = 60,\n            },\n        },\n    },\n    legdtl = {\n        weapondefs = {\n            dclaw = {\n                energypershot = 60,\n            },\n        },\n    },\n    armamd = {\n        metalcost = 1800,\n        energycost = 41000,\n        weapondefs = {\n            amd_rocket = {\n                coverage = 2125,\n                stockpiletime = 70,\n            },\n        },\n    },\n    corfmd = {\n        metalcost = 1800,\n        energycost = 41000,\n        weapondefs = {\n            fmd_rocket = {\n                coverage = 2125,\n                stockpiletime = 70,\n            },\n        },\n    },\n    legabm = {\n        metalcost = 1800,\n        energycost = 41000,\n        weapondefs = {\n            fmd_rocket = {\n                coverage = 2125,\n                stockpiletime = 70,\n            },\n        },\n    },\n    corwint2 = {\n        metalcost = 400,\n    },\n    legwint2 = {\n        metalcost = 400,\n    },\n    legdtr = {\n        buildtime = 5250,\n        energycost = 5500,\n        metalcost = 400,\n        collisionvolumeoffsets = '0 -10 0',\n        collisionvolumescales = '39 88 39',\n        collisionvolumetype = 'Ell',\n        usepiececollisionvolumes = 0,\n        weapondefs = {\n            corlevlr_weapon = {\n                areaofeffect = 30,\n                avoidfriendly = true,\n                collidefriendly = false,\n                cegtag = 'railgun',\n                range = 650,\n                energypershot = 75,\n                explosiongenerator = 'custom:plasmahit-sparkonly',\n                rgbcolor = '0.34 0.64 0.94',\n                soundhit = 'mavgun3',\n                soundhitwet = 'splshbig',\n                soundstart = 'lancefire',\n                weaponvelocity = 1300,\n                damage = {\n                    default = 550,\n                },\n            },\n        },\n    },\n    armrespawn = {\n        blocking = false,\n        canresurrect = true,\n    },\n    legnanotcbase = {\n        blocking = false,\n        canresurrect = true,\n    },\n    correspawn = {\n        blocking = false,\n        canresurrect = true,\n    },\n    legrwall = {\n        collisionvolumeoffsets = '0 -3 0',\n        collisionvolumescales = '32 50 32',\n        collisionvolumetype = 'CylY',\n        energycost = 21000,\n        metalcost = 1400,\n        weapondefs = {\n            railgunt2 = {\n                collidefriendly = 0,\n                collidefeature = 0,\n                avoidfeature = 0,\n                avoidfriendly = 0,\n                range = 725,\n                reloadtime = 3,\n                energypershot = 200,\n                damage = {\n                    default = 1500,\n                },\n            },\n        },\n        weapons = {\n            [1] = {\n                def = 'railgunt2',\n                onlytargetcategory = 'SURFACE',\n            },\n        },\n    },\n    cormwall = {\n        energycost = 18000,\n        metalcost = 1350,\n        weapondefs = {\n            exp_heavyrocket = {\n                areaofeffect = 70,\n                collidefriendly = 0,\n                collidefeature = 0,\n                cameraShake = 0,\n                energypershot = 125,\n                avoidfeature = 0,\n                avoidfriendly = 0,\n                burst = 1,\n                burstrate = 0,\n                colormap = '0.75 0.73 0.67 0.024   0.37 0.4 0.30 0.021   0.22 0.21 0.14 0.018  0.024 0.014 0.009 0.03   0.0 0.0 0.0 0.008',\n                craterareaofeffect = 0,\n                explosiongenerator = 'custom:burnblack',\n                flamegfxtime = 1,\n                flighttime = 1.05,\n                name = 'Raptor Boomer',\n                reloadtime = 1.5,\n                rgbcolor = '1 0.25 0.1',\n                range = 700,\n                size = 2,\n                proximitypriority = {},\n                impactonly = 1,\n                trajectoryheight = 1,\n                targetmoveerror = 0.2,\n                tracks = true,\n                weaponacceleration = 660,\n                weaponvelocity = 950,\n                damage = {\n                    default = 1050,\n                },\n            },\n        },\n    },\n    cormaw = {\n        collisionvolumeoffsets = '0 -2 0',\n        collisionvolumescales = '30 51 30',\n        collisionvolumetype = 'Ell',\n        usepiececollisionvolumes = false,\n        metalcost = 350,\n        energycost = 2500,\n        weapondefs = {\n            dmaw = {\n                collidefriendly = 0,\n                collidefeature = 0,\n                areaofeffect = 80,\n                edgeeffectiveness = 0.45,\n                energypershot = 50,\n                burst = 24,\n                rgbcolor = '0.051 0.129 0.871',\n                rgbcolor2 = '0.57 0.624 1',\n                sizegrowth = 0.80,\n                range = 450,\n                intensity = 0.68,\n                damage = {\n                    default = 28,\n                },\n            },\n        },\n    },\n    legdtf = {\n        collisionvolumeoffsets = '0 -24 0',\n        collisionvolumescales = '30 51 30',\n        collisionvolumetype = 'Ell',\n        metalcost = 350,\n        energycost = 2750,\n        weapondefs = {\n            dmaw = {\n                collidefriendly = 0,\n                collidefeature = 0,\n                areaofeffect = 80,\n                edgeeffectiveness = 0.45,\n                energypershot = 50,\n                burst = 24,\n                sizegrowth = 2,\n                range = 450,\n                intensity = 0.38,\n                sprayangle = 500,\n                damage = {\n                    default = 30,\n                },\n            },\n        },\n    },\n    corhllllt = {\n        collisionvolumeoffsets = '0 -24 0',\n        collisionvolumescales = '30 51 30',\n        metalcost = 415,\n        energycost = 9500,\n        buildtime = 10000,\n        health = 2115,\n    },\n    corhlt = {\n        energycost = 5500,\n        metalcost = 520,\n        weapondefs = {\n            cor_laserh1 = {\n                range = 750,\n                reloadtime = 0.95,\n                damage = {\n                    default = 395,\n                    vtol = 35,\n                },\n            },\n        },\n    },\n    armhlt = {\n        energycost = 5700,\n        metalcost = 510,\n        weapondefs = {\n            arm_laserh1 = {\n                range = 750,\n                reloadtime = 1,\n                damage = {\n                    default = 405,\n                    vtol = 35,\n                },\n            },\n        },\n    },\n    armbrtha = {\n        explodeas = 'fusionExplosion',\n        energycost = 500000,\n        metalcost = 18500,\n        buildtime = 175000,\n        turnrate = 16000,\n        health = 10450,\n        weapondefs = {\n            ARMBRTHA_MAIN = {\n                areaofeffect = 50,\n                collidefriendly = 0,\n                collidefeature = 0,\n                avoidfeature = 0,\n                avoidfriendly = 0,\n                beamtime = 2.5,\n                corethickness = 0.1,\n                craterareaofeffect = 90,\n                craterboost = 0,\n                cratermult = 0,\n                cameraShake = 0,\n                edgeeffectiveness = 0.30,\n                energypershot = 14000,\n                explosiongenerator = 'custom:laserhit-large-blue',\n                firestarter = 90,\n                impulseboost = 0,\n                impulsefactor = 0,\n                largebeamlaser = true,\n                laserflaresize = 1,\n                impactonly = 1,\n                name = 'Experimental Duction Beam',\n                noselfdamage = true,\n                range = 2400,\n                reloadtime = 13,\n                rgbcolor = '0.4 0.2 0.6',\n                scrollspeed = 13,\n                soundhitdry = '',\n                soundhitwet = 'sizzle',\n                soundstart = 'hackshotxl3',\n                soundtrigger = 1,\n                targetmoveerror = 0.3,\n                texture3 = 'largebeam',\n                thickness = 14,\n                tilelength = 150,\n                tolerance = 10000,\n                turret = true,\n                turnrate = 16000,\n                weapontype = 'LaserCannon',\n                weaponvelocity = 3100,\n                damage = {\n                    commanders = 480,\n                    default = 34000,\n                },\n            },\n        },\n        weapons = {\n            [1] = {\n                badtargetcategory = 'VTOL GROUNDSCOUT',\n                def = 'ARMBRTHA_MAIN',\n                onlytargetcategory = 'SURFACE',\n            },\n        },\n    },\n    corint = {\n        explodeas = 'fusionExplosion',\n        energycost = 505000,\n        metalcost = 19500,\n        buildtime = 170000,\n        health = 12450,\n        footprintx = 6,\n        footprintz = 6,\n        weapondefs = {\n            CORINT_MAIN = {\n                areaofeffect = 70,\n                collidefriendly = 0,\n                collidefeature = 0,\n                avoidfeature = 0,\n                avoidfriendly = 0,\n                beamtime = 2.5,\n                corethickness = 0.1,\n                craterareaofeffect = 90,\n                craterboost = 0,\n                cratermult = 0,\n                cameraShake = 0,\n                edgeeffectiveness = 0.30,\n                energypershot = 17000,\n                explosiongenerator = 'custom:laserhit-large-blue',\n                firestarter = 90,\n                impulseboost = 0,\n                impulsefactor = 0,\n                largebeamlaser = true,\n                laserflaresize = 1,\n                impactonly = 1,\n                name = 'Mini DeathStar',\n                noselfdamage = true,\n                range = 2800,\n                reloadtime = 15,\n                rgbcolor = '0 1 0',\n                scrollspeed = 13,\n                soundhitdry = '',\n                soundhitwet = 'sizzle',\n                soundstart = 'annigun1',\n                soundtrigger = 1,\n                targetmoveerror = 0.3,\n                texture3 = 'largebeam',\n                thickness = 14,\n                tilelength = 150,\n                tolerance = 10000,\n                turret = true,\n                turnrate = 1600,\n                weapontype = 'LaserCannon',\n                weaponvelocity = 3100,\n                damage = {\n                    commanders = 480,\n                    default = 50000,\n                },\n            },\n        },\n        weapons = {\n            [1] = {\n                badtargetcategory = 'VTOL GROUNDSCOUT',\n                def = 'CORINT_MAIN',\n                onlytargetcategory = 'SURFACE',\n            },\n        },\n    },\n    leglrpc = {\n        explodeas = 'fusionExplosion',\n        energycost = 555000,\n        metalcost = 21000,\n        buildtime = 150000,\n        health = 11000,\n        footprintx = 6,\n        footprintz = 6,\n        weapondefs = {\n            LEGLRPC_MAIN = {\n                areaofeffect = 70,\n                collidefriendly = 0,\n                collidefeature = 0,\n                avoidfeature = 0,\n                avoidfriendly = 0,\n                beamtime = 0.5,\n                burst = 3,\n                burstrate = 0.4,\n                corethickness = 0.1,\n                craterareaofeffect = 90,\n                craterboost = 0,\n                cratermult = 0,\n                cameraShake = 0,\n                edgeeffectiveness = 0.30,\n                energypershot = 10000,\n                explosiongenerator = 'custom:laserhit-large-red',\n                firestarter = 90,\n                impactonly = 1,\n                impulseboost = 0,\n                impulsefactor = 0,\n                largebeamlaser = true,\n                laserflaresize = 1,\n                name = 'The Eagle Standard',\n                noselfdamage = true,\n                range = 2150,\n                reloadtime = 3,\n                rgbcolor = '0/1/0.4',\n                scrollspeed = 13,\n                soundhitdry = '',\n                soundhitwet = 'sizzle',\n                soundstart = 'lasrcrw1',\n                soundtrigger = 1,\n                targetmoveerror = 0.3,\n                texture3 = 'largebeam',\n                thickness = 12,\n                tilelength = 150,\n                tolerance = 10000,\n                turret = true,\n                turnrate = 16000,\n                weapontype = 'LaserCannon',\n                weaponvelocity = 3100,\n                damage = {\n                    commanders = 480,\n                    default = 6000,\n                },\n            },\n        },\n        weapons = {\n            [1] = {\n                badtargetcategory = 'VTOL GROUNDSCOUT',\n                def = 'LEGLRPC_MAIN',\n                onlytargetcategory = 'SURFACE',\n            },\n        },\n    },\n}\n"
        },
        {
            "path": "lua/mega-nuke.lua",
            "data": "-- NuttyB v1.52 Mega Nuke\n-- https://github.com/nuttyb-community/nuttyb\n\ndo\n    local UnitDefs = UnitDefs or {}\n    local merge = table.mergeInPlace or table.merge\n\n    merge(UnitDefs, {\n        armsilo = {\n            energycost = 1500000,\n            metalcost = 98720,\n            buildtime = 228500,\n            footprintx = 12,\n            footprintz = 12,\n            maxthisunit = 1,\n            explodeas = 'advancedFusionExplosion',\n            weapondefs = {\n                nuclear_missile = {\n                    areaofeffect = 5000,\n                    cameraShake = 15000,\n                    craterboost = 55,\n                    cratermult = 40,\n                    energypershot = 390000,\n                    metalpershot = 3000,\n                    smokesize = 28,\n                    smokecolor = 0.85,\n                    soundhitwetvolume = 80,\n                    soundstartvolume = 50,\n                    stockpiletime = 160,\n                    weaponvelocity = 500,\n                    damage = {\n                        commanders = 500,\n                        default = 19500,\n                        raptor = 100000,\n                    },\n                },\n            },\n        },\n        corsilo = {\n            energycost = 1500000,\n            metalcost = 98720,\n            buildtime = 228500,\n            footprintx = 12,\n            footprintz = 12,\n            maxthisunit = 1,\n            explodeas = 'advancedFusionExplosion',\n            weapondefs = {\n                nuclear_missile = {\n                    areaofeffect = 5000,\n                    cameraShake = 15000,\n                    craterboost = 55,\n                    cratermult = 40,\n                    energypershot = 390000,\n                    metalpershot = 3000,\n                    smokesize = 28,\n                    smokecolor = 0.85,\n                    soundhitwetvolume = 80,\n                    soundstartvolume = 50,\n                    stockpiletime = 160,\n                    weaponvelocity = 500,\n                    damage = {\n                        commanders = 500,\n                        default = 19500,\n                        raptor = 100000,\n                    },\n                },\n            },\n        },\n        legsilo = {\n            energycost = 1500000,\n            metalcost = 98720,\n            buildtime = 228500,\n            footprintx = 12,\n            footprintz = 12,\n            maxthisunit = 1,\n            explodeas = 'advancedFusionExplosion',\n            weapondefs = {\n                nuclear_missile = {\n                    areaofeffect = 5000,\n                    cameraShake = 15000,\n                    craterboost = 55,\n                    cratermult = 40,\n                    energypershot = 390000,\n                    metalpershot = 3000,\n                    smokesize = 28,\n                    smokecolor = 0.85,\n                    soundhitwetvolume = 80,\n                    soundstartvolume = 50,\n                    stockpiletime = 160,\n                    weaponvelocity = 500,\n                    damage = {\n                        commanders = 500,\n                        default = 19500,\n                        raptor = 100000,\n                    },\n                },\n            },\n        },\n        raptor_turret_antinuke_t3_v1 = {\n            maxthisunit = 0,\n        },\n        raptor_antinuke = {\n            maxthisunit = 0,\n        },\n        raptor_turret_antinuke_t4_v1 = {\n            maxthisunit = 0,\n        },\n        raptor_turret_antinuke_t2_v1 = {\n            maxthisunit = 0,\n        },\n    })\nend\n"
        },
        {
            "path": "lua/mini-bosses-extended.lua",
            "data": "-- Mini Bosses Extended Version\n-- Authors: RCore, Altwaal\n-- docs.google.com/spreadsheets/d/1QSVsuAAMhBrhiZdTihVfSCwPzbbZWDLCtXWP23CU0ko\n-- https://github.com/nuttyb-community/nuttyb\n\ndo\n    local unitDefs, tableMerge, tableCopy, RAPTOR_MATRIARCH_BASIC, CUSTOM_FUSION_EXPLO, spring =\n        UnitDefs or {},\n        table.merge,\n        table.copy,\n        'raptor_matriarch_basic',\n        'customfusionexplo',\n        Spring\n\n    local nbQhpMult, nbHpMult = 1.3, 1.3\n\n    -- Calculate health multipliers from existing unit definitions\n    nbHpMult = unitDefs[RAPTOR_MATRIARCH_BASIC].health / 60000\n    nbQhpMult = unitDefs['raptor_queen_epic'].health / 1250000\n\n    -- Calculate player count multiplier\n    local playerCountScale = 1\n    if spring.Utilities.Gametype.IsRaptors() then\n        playerCountScale = (#spring.GetTeamList() - 2) / 12\n    end\n\n    local spawnCountMult = spring.GetModOptions().raptor_spawncountmult or 3\n    local totalSpawnScale = playerCountScale * (spawnCountMult / 3)\n\n    -- Function to scale unit counts based on player count\n    local function scaledMax(base)\n        return math.max(1, math.ceil(base * totalSpawnScale))\n    end\n\n    -- Anger thresholds for mini-queen spawning\n    local mqAnger = { 01, 2, 03, 105, 110, 125 }\n    local mqTimeMult =\n        math.max(1, spring.GetModOptions().raptor_queentimemult or 1.3)\n    local mqStart, mqLast = mqAnger[1], mqAnger[#mqAnger]\n    local mqTargetLast = mqTimeMult * mqAnger[#mqAnger] / 1.3\n    local mqFactor = (mqTargetLast - mqStart) / (mqLast - mqStart)\n\n    -- Scale anger thresholds based on queen time multiplier\n    for idx = 2, #mqAnger do\n        mqAnger[idx] = math.floor(mqStart + (mqAnger[idx] - mqStart) * mqFactor)\n    end\n\n    -- Calculate queen-related values for Doombringer spawning\n    local mqNumQueens = spring.GetModOptions().raptor_queen_count or 1\n    local mqDoomAngerScale = 1\n    mqDoomAngerScale = math.min(10, nbQhpMult / 1.3 * 0.9)\n\n    local queenThreshold = 20\n    local exponentialPart = 10\n        * (1.06 ^ math.max(0, math.min(mqNumQueens, queenThreshold) - 8))\n    local linearPart = math.max(0, mqNumQueens - queenThreshold)\n    local baseQueenAnger = exponentialPart + linearPart\n    local mqDoomAnger = math.ceil(mqDoomAngerScale * baseQueenAnger)\n    local mqAngerBoss = mqTimeMult * 100 + mqDoomAnger\n    local maxDoombringers =\n        math.max(3, scaledMax(math.floor((21 * mqNumQueens + 36) / 19)))\n\n    -- Function to clone unit definitions\n    local function newUnit(sourceUnit, targetUnit, overrides)\n        if unitDefs[sourceUnit] and not unitDefs[targetUnit] then\n            unitDefs[targetUnit] =\n                tableMerge(unitDefs[sourceUnit], overrides or {})\n        end\n    end\n\n    -- Base health value from matriarch\n    local baseHealth = unitDefs[RAPTOR_MATRIARCH_BASIC].health\n\n    -- Create Queenling units (mini-queens)\n    newUnit('raptor_queen_veryeasy', 'raptor_miniq_a', {\n        name = 'Queenling Prima',\n        icontype = 'raptor_queen_veryeasy',\n        health = baseHealth * 5,\n        customparams = {\n            i18n_en_humanname = 'Queenling Prima',\n            i18n_en_tooltip = 'Majestic and bold, ruler of the hunt.',\n        },\n    })\n\n    newUnit('raptor_queen_easy', 'raptor_miniq_b', {\n        name = 'Queenling Secunda',\n        icontype = 'raptor_queen_easy',\n        health = baseHealth * 6,\n        customparams = {\n            i18n_en_humanname = 'Queenling Secunda',\n            i18n_en_tooltip = 'Swift and sharp, a noble among raptors.',\n        },\n    })\n\n    newUnit('raptor_queen_normal', 'raptor_miniq_c', {\n        name = 'Queenling Tertia',\n        icontype = 'raptor_queen_normal',\n        health = baseHealth * 7,\n        customparams = {\n            i18n_en_humanname = 'Queenling Tertia',\n            i18n_en_tooltip = 'Refined tastes. Likes her prey rare.',\n        },\n    })\n\n    newUnit('armcomboss', 'raptor_armcomboss', {\n        name = 'Arm Com Boss',\n        icontype = 'armcomboss',\n        health = baseHealth * 6,\n        customparams = {\n            i18n_en_humanname = 'Arm Com Boss',\n            i18n_en_tooltip = 'Swift and sharp, a noble among raptors.',\n        },\n    })\n\n    -- Copy weapon definitions from matriarch variants\n    unitDefs.raptor_miniq_b.weapondefs.acidgoo =\n        tableCopy(unitDefs['raptor_matriarch_acid'].weapondefs.acidgoo)\n    unitDefs.raptor_miniq_c.weapondefs.empgoo =\n        tableCopy(unitDefs['raptor_matriarch_electric'].weapondefs.goo)\n\n    -- Create Matrona variants (smaller matriarchs)\n    for _, matronaData in ipairs {\n        {\n            'raptor_matriarch_basic',\n            'raptor_mama_ba',\n            'Matrona',\n            'Claws charged with vengeance.',\n        },\n        {\n            'raptor_matriarch_fire',\n            'raptor_mama_fi',\n            'Pyro Matrona',\n            'A firestorm of maternal wrath.',\n        },\n        {\n            'raptor_matriarch_electric',\n            'raptor_mama_el',\n            'Paralyzing Matrona',\n            'Crackling with rage, ready to strike.',\n        },\n        {\n            'raptor_matriarch_acid',\n            'raptor_mama_ac',\n            'Acid Matrona',\n            'Acid-fueled, melting everything in sight.',\n        },\n    } do\n        newUnit(matronaData[1], matronaData[2], {\n            name = matronaData[3],\n            icontype = matronaData[1],\n            health = baseHealth * 1.5,\n            customparams = {\n                i18n_en_humanname = matronaData[3],\n                i18n_en_tooltip = matronaData[4],\n            },\n        })\n    end\n\n    -- Create Raptor Consort (penguin king variant)\n    newUnit('critter_penguinking', 'raptor_consort', {\n        name = 'Raptor Consort',\n        icontype = 'corkorg',\n        health = baseHealth * 4,\n        mass = 100000,\n        nochasecategory = 'MOBILE VTOL OBJECT',\n        sonarstealth = false,\n        stealth = false,\n        speed = 67.5,\n        customparams = {\n            i18n_en_humanname = 'Raptor Consort',\n            i18n_en_tooltip = 'Sneaky powerful little terror.',\n        },\n    })\n\n    unitDefs.raptor_consort.weapondefs.goo =\n        tableCopy(unitDefs['raptor_queen_epic'].weapondefs.goo)\n\n    -- Create Doombringer (ultimate boss unit)\n    newUnit('raptor_consort', 'raptor_doombringer', {\n        name = 'Doombringer',\n        icontype = 'armafust3',\n        health = baseHealth * 12,\n        speed = 50,\n        customparams = {\n            i18n_en_humanname = 'Doombringer',\n            i18n_en_tooltip = 'Your time is up. The Queens called for backup.',\n        },\n    })\n\n    -- Function to create PvE squad parameters\n    local function pveSquad(\n        minAnger,\n        maxAnger,\n        behavior,\n        rarity,\n        amount,\n        weight\n    )\n        return {\n            raptorcustomsquad = true,\n            raptorsquadunitsamount = amount or 1,\n            raptorsquadminanger = minAnger,\n            raptorsquadmaxanger = maxAnger,\n            raptorsquadweight = weight or 5,\n            raptorsquadrarity = rarity or 'basic',\n            raptorsquadbehavior = behavior,\n            raptorsquadbehaviordistance = 500,\n            raptorsquadbehaviorchance = 0.75,\n        }\n    end\n\n    -- Base destruction parameters for mini-queens\n    local miniQueenCommon = {\n        selfdestructas = CUSTOM_FUSION_EXPLO,\n        explodeas = CUSTOM_FUSION_EXPLO,\n        weapondefs = {\n            yellow_missile = {\n                damage = {\n                    default = 1,\n                    vtol = 1000,\n                },\n            },\n        },\n    }\n\n    -- Apply configurations to all boss units\n    for unitName, unitConfig in pairs {\n        raptor_miniq_a = tableMerge(miniQueenCommon, {\n            maxthisunit = scaledMax(2),\n            customparams = pveSquad(mqAnger[1], mqAnger[2], 'berserk'),\n            weapondefs = {\n                goo = { damage = { default = 750 } },\n                melee = { damage = { default = 4000 } },\n            },\n        }),\n\n        raptor_miniq_b = tableMerge(miniQueenCommon, {\n            maxthisunit = scaledMax(3),\n            customparams = pveSquad(mqAnger[3], mqAnger[4], 'berserk'),\n            weapondefs = {\n                acidgoo = {\n                    burst = 8,\n                    reloadtime = 10,\n                    sprayangle = 4096,\n                    damage = { default = 1500, shields = 1500 },\n                },\n                melee = { damage = { default = 5000 } },\n            },\n            weapons = {\n                [1] = { def = 'MELEE', maindir = '0 0 1', maxangledif = 155 },\n                [2] = { onlytargetcategory = 'VTOL', def = 'yellow_missile' },\n                [3] = { onlytargetcategory = 'VTOL', def = 'yellow_missile' },\n                [4] = { onlytargetcategory = 'VTOL', def = 'yellow_missile' },\n                [5] = { def = 'acidgoo', maindir = '0 0 1', maxangledif = 180 },\n            },\n        }),\n\n        raptor_miniq_c = tableMerge(miniQueenCommon, {\n            maxthisunit = scaledMax(4),\n            customparams = pveSquad(mqAnger[5], mqAnger[6], 'berserk'),\n            weapondefs = {\n                empgoo = {\n                    burst = 10,\n                    reloadtime = 10,\n                    sprayangle = 4096,\n                    damage = { default = 2000, shields = 2000 },\n                },\n                melee = { damage = { default = 6000 } },\n            },\n            weapons = {\n                [1] = { def = 'MELEE', maindir = '0 0 1', maxangledif = 155 },\n                [2] = { onlytargetcategory = 'VTOL', def = 'yellow_missile' },\n                [3] = { onlytargetcategory = 'VTOL', def = 'yellow_missile' },\n                [4] = { onlytargetcategory = 'VTOL', def = 'yellow_missile' },\n                [5] = { def = 'empgoo', maindir = '0 0 1', maxangledif = 180 },\n            },\n        }),\n\n        raptor_consort = {\n            explodeas = 'raptor_empdeath_big',\n            maxthisunit = scaledMax(6),\n            customparams = pveSquad(mqAnger[2], 1000, 'berserk'),\n            weapondefs = {\n                eyelaser = {\n                    name = 'Angry Eyes',\n                    reloadtime = 3,\n                    rgbcolor = '1 0 0.3',\n                    range = 500,\n                    damage = { default = 6000, commanders = 6000 },\n                },\n                goo = {\n                    name = 'Snowball Barrage',\n                    soundstart = 'penbray2',\n                    soundStartVolume = 2,\n                    cegtag = 'blob_trail_blue',\n                    burst = 8,\n                    sprayangle = 2048,\n                    weaponvelocity = 600,\n                    reloadtime = 4,\n                    range = 1000,\n                    hightrajectory = 1,\n                    rgbcolor = '0.7 0.85 1.0',\n                    damage = { default = 1000 },\n                },\n            },\n            weapons = {\n                [1] = { def = 'eyelaser', badtargetcategory = 'VTOL OBJECT' },\n                [2] = {\n                    def = 'goo',\n                    maindir = '0 0 1',\n                    maxangledif = 180,\n                    badtargetcategory = 'VTOL OBJECT',\n                },\n            },\n        },\n\n        raptor_doombringer = {\n            explodeas = 'ScavComBossExplo',\n            maxthisunit = maxDoombringers,\n            customparams = pveSquad(mqAngerBoss, 1000, 'berserk', nil, 1, 99),\n            weapondefs = {\n                eyelaser = {\n                    name = 'Eyes of Doom',\n                    reloadtime = 3,\n                    rgbcolor = '0.3 1 0',\n                    range = 500,\n                    damage = { default = 48000, commanders = 24000 },\n                },\n                goo = {\n                    name = 'Amber Hailstorm',\n                    soundstart = 'penbray1',\n                    soundStartVolume = 2,\n                    cegtag = 'blob_trail_red',\n                    burst = 15,\n                    sprayangle = 3072,\n                    weaponvelocity = 600,\n                    reloadtime = 5,\n                    rgbcolor = '0.7 0.85 1.0',\n                    hightrajectory = 1,\n                    damage = { default = 5000 },\n                },\n            },\n            weapons = {\n                [1] = { def = 'eyelaser', badtargetcategory = 'VTOL OBJECT' },\n                [2] = {\n                    def = 'goo',\n                    maindir = '0 0 1',\n                    maxangledif = 180,\n                    badtargetcategory = 'VTOL OBJECT',\n                },\n            },\n        },\n\n        raptor_armcomboss = {\n            explodeas = 'ScavComBossExplo',\n            maxthisunit = maxDoombringers,\n            customparams = pveSquad(mqAnger[1], 1000, 'berserk'),\n            weapondefs = {\n                armcomlaserboss = {\n                    name = 'Laser Boss',\n                    reloadtime = 0,\n                    rgbcolor = '0.3 1 0',\n                    range = 1250,\n                    speed = 25,\n                    damage = {\n                        default = 4800,\n                        commanders = 2400,\n                        shield = 5000,\n                    },\n                },\n                armcomsealaserboss = {\n                    name = 'Sea Laser Boss',\n                    damage = { default = 5000 },\n                },\n            },\n            weapons = {\n                [1] = {\n                    def = 'armcomlaserboss',\n                    badtargetcategory = 'VTOL OBJECT',\n                },\n                [2] = {\n                    def = 'armcomsealaserboss ',\n                    maindir = '0 0 1',\n                    maxangledif = 180,\n                    badtargetcategory = 'VTOL OBJECT',\n                },\n            },\n        },\n\n        raptor_mama_ba = {\n            maxthisunit = scaledMax(4),\n            customparams = pveSquad(55, mqAnger[3] - 1, 'berserk'),\n            weapondefs = {\n                goo = { damage = { default = 750 } },\n                melee = { damage = { default = 750 } },\n            },\n        },\n\n        raptor_mama_fi = {\n            explodeas = 'raptor_empdeath_big',\n            maxthisunit = scaledMax(4),\n            customparams = pveSquad(55, mqAnger[3] - 1, 'berserk'),\n            weapondefs = {\n                flamethrowerspike = { damage = { default = 80 } },\n                flamethrowermain = { damage = { default = 160 } },\n            },\n        },\n\n        raptor_mama_el = {\n            maxthisunit = scaledMax(4),\n            customparams = pveSquad(65, 1000, 'berserk'),\n        },\n\n        raptor_mama_ac = {\n            maxthisunit = scaledMax(4),\n            customparams = pveSquad(60, 1000, 'berserk'),\n            weapondefs = {\n                melee = { damage = { default = 750 } },\n            },\n        },\n\n        raptor_land_assault_basic_t4_v2 = {\n            maxthisunit = scaledMax(8),\n            customparams = pveSquad(33, 50, 'raider'),\n        },\n\n        raptor_land_assault_basic_t4_v1 = {\n            maxthisunit = scaledMax(12),\n            customparams = pveSquad(51, 64, 'raider', 'basic', 2),\n        },\n    } do\n        unitDefs[unitName] = unitDefs[unitName] or {}\n        table.mergeInPlace(unitDefs[unitName], unitConfig, true)\n    end\n\n    -- Metal costs for new units\n    local newCosts = {\n        raptor_mama_ba = 36000,\n        raptor_mama_fi = 36000,\n        raptor_mama_el = 36000,\n        raptor_mama_ac = 36000,\n        raptor_consort = 45000,\n        raptor_doombringer = 90000,\n        raptor_armcomboss = 45000,\n    }\n\n    -- Post-processing function to apply metal costs\n    local oldUnitDef_Post = UnitDef_Post\n\n    function UnitDef_Post(unitID, unitDef)\n        if oldUnitDef_Post then\n            oldUnitDef_Post(unitID, unitDef)\n        end\n\n        local nbHpScale = 1\n        if nbHpMult > 1.3 then\n            nbHpScale = nbHpMult / 1.3\n        end\n\n        for unitName, baseCost in pairs(newCosts) do\n            if UnitDefs[unitName] then\n                local finalCost = math.floor(baseCost * nbHpScale)\n                UnitDefs[unitName].metalcost = finalCost\n            end\n        end\n    end\nend\n"
        },
        {
            "path": "lua/mini-bosses.lua",
            "data": "-- Mini Bosses v2g\n-- Authors: RCore\n-- https://github.com/nuttyb-community/nuttyb\n\ndo\n    local unitDefs, tableMerge, tableCopy, raptor_matriarch_basic, customfusionexplo, spring =\n        UnitDefs or {},\n        table.merge,\n        table.copy,\n        'raptor_matriarch_basic',\n        'customfusionexplo',\n        Spring\n\n    local nbQhpMult, nbHpMult = 1.3, 1.3\n\n    nbHpMult = unitDefs[raptor_matriarch_basic].health / 60000\n    nbQhpMult = unitDefs['raptor_queen_epic'].health / 1250000\n\n    local playerCountScale = 1\n    local isRaptors = spring.Utilities.Gametype.IsRaptors()\n    if isRaptors or spring.Utilities.Gametype.IsScavengers() then\n        playerCountScale = (#spring.GetTeamList() - 2) / 12\n    end\n\n    local spawnCountMult = spring.GetModOptions().raptor_spawncountmult or 3\n    local totalSpawnScale = playerCountScale * (spawnCountMult / 3)\n\n    local function scaledMax(base)\n        return math.max(1, math.ceil(base * totalSpawnScale))\n    end\n\n    local mqAnger = { 70, 85, 90, 105, 110, 125 }\n    local mqTimeMult =\n        math.max(1, spring.GetModOptions().raptor_queentimemult or 1.3)\n    local mqStart, mqLast = mqAnger[1], mqAnger[#mqAnger]\n    local mqTargetLast = mqTimeMult * mqAnger[#mqAnger] / 1.3\n    local mqFactor = (mqTargetLast - mqStart) / (mqLast - mqStart)\n\n    for i = 2, #mqAnger do\n        mqAnger[i] = math.floor(mqStart + (mqAnger[i] - mqStart) * mqFactor)\n    end\n\n    local mqNumQueens = spring.GetModOptions().raptor_queen_count or 1\n    local mqDoomAngerScale = 1\n    mqDoomAngerScale = math.min(10, nbQhpMult / 1.3 * 0.9)\n\n    -- Compact logic for hybrid exponential/linear growth\n    local queenThreshold = 20\n    local exponentialPart = 10\n        * (1.06 ^ math.max(0, math.min(mqNumQueens, queenThreshold) - 8))\n    local x = math.max(0, mqNumQueens - queenThreshold)\n    local linearPart = (x <= 80) and (0.6 * x - x * x / 270)\n        or (24.3 + (x - 80) * 0.15)\n    local baseQueenAnger = exponentialPart + linearPart\n\n    local mqDoomAnger = math.ceil(mqDoomAngerScale * baseQueenAnger)\n    local mqAngerBoss = mqTimeMult * 100 + mqDoomAnger\n    local maxDoombringers =\n        math.max(3, scaledMax(math.floor((21 * mqNumQueens + 36) / 19)))\n\n    local function newUnit(old, new, data)\n        if unitDefs[old] and not unitDefs[new] then\n            unitDefs[new] = tableMerge(unitDefs[old], data or {})\n        end\n    end\n\n    local raptor_matriarch_basic_health =\n        unitDefs[raptor_matriarch_basic].health\n\n    newUnit('raptor_queen_veryeasy', 'raptor_miniq_a', {\n        name = 'Queenling Prima',\n        icontype = 'raptor_queen_veryeasy',\n        health = raptor_matriarch_basic_health * 5,\n        customparams = {\n            i18n_en_humanname = 'Queenling Prima',\n            i18n_en_tooltip = 'Majestic and bold, ruler of the hunt.',\n        },\n    })\n\n    newUnit('raptor_queen_easy', 'raptor_miniq_b', {\n        name = 'Queenling Secunda',\n        icontype = 'raptor_queen_easy',\n        health = raptor_matriarch_basic_health * 6,\n        customparams = {\n            i18n_en_humanname = 'Queenling Secunda',\n            i18n_en_tooltip = 'Swift and sharp, a noble among raptors.',\n        },\n    })\n\n    newUnit('raptor_queen_normal', 'raptor_miniq_c', {\n        name = 'Queenling Tertia',\n        icontype = 'raptor_queen_normal',\n        health = raptor_matriarch_basic_health * 7,\n        customparams = {\n            i18n_en_humanname = 'Queenling Tertia',\n            i18n_en_tooltip = 'Refined tastes. Likes her prey rare.',\n        },\n    })\n\n    unitDefs.raptor_miniq_b.weapondefs.acidgoo =\n        tableCopy(unitDefs['raptor_matriarch_acid'].weapondefs.acidgoo)\n    unitDefs.raptor_miniq_c.weapondefs.empgoo =\n        tableCopy(unitDefs['raptor_matriarch_electric'].weapondefs.goo)\n\n    for _, l in ipairs {\n        {\n            'raptor_matriarch_basic',\n            'raptor_mama_ba',\n            'Matrona',\n            'Claws charged with vengeance.',\n        },\n        {\n            'raptor_matriarch_fire',\n            'raptor_mama_fi',\n            'Pyro Matrona',\n            'A firestorm of maternal wrath.',\n        },\n        {\n            'raptor_matriarch_electric',\n            'raptor_mama_el',\n            'Paralyzing Matrona',\n            'Crackling with rage, ready to strike.',\n        },\n        {\n            'raptor_matriarch_acid',\n            'raptor_mama_ac',\n            'Acid Matrona',\n            'Acid-fueled, melting everything in sight.',\n        },\n    } do\n        newUnit(l[1], l[2], {\n            name = l[3],\n            icontype = l[1],\n            health = raptor_matriarch_basic_health * 1.5,\n            customparams = {\n                i18n_en_humanname = l[3],\n                i18n_en_tooltip = l[4],\n            },\n        })\n    end\n\n    newUnit('critter_penguinking', 'raptor_consort', {\n        name = 'Raptor Consort',\n        icontype = 'corkorg',\n        health = raptor_matriarch_basic_health * 4,\n        mass = 100000,\n        nochasecategory = 'MOBILE VTOL OBJECT',\n        sonarstealth = false,\n        stealth = false,\n        speed = 67.5,\n        customparams = {\n            i18n_en_humanname = 'Raptor Consort',\n            i18n_en_tooltip = 'Sneaky powerful little terror.',\n        },\n    })\n\n    unitDefs.raptor_consort.weapondefs.goo =\n        tableCopy(unitDefs['raptor_queen_epic'].weapondefs.goo)\n\n    newUnit('raptor_consort', 'raptor_doombringer', {\n        name = 'Doombringer',\n        icontype = 'armafust3',\n        health = raptor_matriarch_basic_health * 12,\n        speed = 50,\n        customparams = {\n            i18n_en_humanname = 'Doombringer',\n            i18n_en_tooltip = 'Your time is up. The Queens called for backup.',\n        },\n    })\n\n    local function pveSquad(p, q, e, r, s, t)\n        local mode_prefix = isRaptors and 'raptor' or 'scav'\n        return {\n            [mode_prefix .. 'customsquad'] = true,\n            [mode_prefix .. 'squadunitsamount'] = s or 1,\n            [mode_prefix .. 'squadminanger'] = p,\n            [mode_prefix .. 'squadmaxanger'] = q,\n            [mode_prefix .. 'squadweight'] = t or 5,\n            [mode_prefix .. 'squadrarity'] = r or 'basic',\n            [mode_prefix .. 'squadbehavior'] = e,\n            [mode_prefix .. 'squadbehaviordistance'] = 500,\n            [mode_prefix .. 'squadbehaviorchance'] = 0.75,\n        }\n    end\n\n    local miniQueenCommon = {\n        selfdestructas = customfusionexplo,\n        explodeas = customfusionexplo,\n        weapondefs = {\n            yellow_missile = { damage = { default = 1, vtol = 1000 } },\n        },\n    }\n\n    for f, u in pairs {\n        raptor_miniq_a = tableMerge(miniQueenCommon, {\n            maxthisunit = scaledMax(2),\n            customparams = pveSquad(mqAnger[1], mqAnger[2], 'berserk'),\n            weapondefs = {\n                goo = { damage = { default = 750 } },\n                melee = { damage = { default = 4000 } },\n            },\n        }),\n        raptor_miniq_b = tableMerge(miniQueenCommon, {\n            maxthisunit = scaledMax(3),\n            customparams = pveSquad(mqAnger[3], mqAnger[4], 'berserk'),\n            weapondefs = {\n                acidgoo = {\n                    burst = 8,\n                    reloadtime = 10,\n                    sprayangle = 4096,\n                    damage = { default = 1500, shields = 1500 },\n                },\n                melee = { damage = { default = 5000 } },\n            },\n            weapons = {\n                [1] = {\n                    def = 'MELEE',\n                    maindir = '0 0 1',\n                    maxangledif = 155,\n                },\n                [2] = {\n                    onlytargetcategory = 'VTOL',\n                    def = 'yellow_missile',\n                },\n                [3] = {\n                    onlytargetcategory = 'VTOL',\n                    def = 'yellow_missile',\n                },\n                [4] = {\n                    onlytargetcategory = 'VTOL',\n                    def = 'yellow_missile',\n                },\n                [5] = {\n                    def = 'acidgoo',\n                    maindir = '0 0 1',\n                    maxangledif = 180,\n                },\n            },\n        }),\n        raptor_miniq_c = tableMerge(miniQueenCommon, {\n            maxthisunit = scaledMax(4),\n            customparams = pveSquad(mqAnger[5], mqAnger[6], 'berserk'),\n            weapondefs = {\n                empgoo = {\n                    burst = 10,\n                    reloadtime = 10,\n                    sprayangle = 4096,\n                    damage = { default = 2000, shields = 2000 },\n                },\n                melee = { damage = { default = 6000 } },\n            },\n            weapons = {\n                [1] = {\n                    def = 'MELEE',\n                    maindir = '0 0 1',\n                    maxangledif = 155,\n                },\n                [2] = {\n                    onlytargetcategory = 'VTOL',\n                    def = 'yellow_missile',\n                },\n                [3] = {\n                    onlytargetcategory = 'VTOL',\n                    def = 'yellow_missile',\n                },\n                [4] = {\n                    onlytargetcategory = 'VTOL',\n                    def = 'yellow_missile',\n                },\n                [5] = {\n                    def = 'empgoo',\n                    maindir = '0 0 1',\n                    maxangledif = 180,\n                },\n            },\n        }),\n        raptor_consort = {\n            explodeas = 'raptor_empdeath_big',\n            maxthisunit = scaledMax(6),\n            customparams = pveSquad(mqAnger[2], 1000, 'berserk'),\n            weapondefs = {\n                eyelaser = {\n                    name = 'Angry Eyes',\n                    reloadtime = 3,\n                    rgbcolor = '1 0 0.3',\n                    range = 500,\n                    damage = { default = 6000, commanders = 6000 },\n                },\n                goo = {\n                    name = 'Snowball Barrage',\n                    soundstart = 'penbray2',\n                    soundStartVolume = 2,\n                    cegtag = 'blob_trail_blue',\n                    burst = 8,\n                    sprayangle = 2048,\n                    weaponvelocity = 600,\n                    reloadtime = 4,\n                    range = 1000,\n                    hightrajectory = 1,\n                    rgbcolor = '0.7 0.85 1.0',\n                    damage = { default = 1000 },\n                },\n            },\n            weapons = {\n                [1] = {\n                    def = 'eyelaser',\n                    badtargetcategory = 'VTOL OBJECT',\n                },\n                [2] = {\n                    def = 'goo',\n                    maindir = '0 0 1',\n                    maxangledif = 180,\n                    badtargetcategory = 'VTOL OBJECT',\n                },\n            },\n        },\n\n        raptor_doombringer = {\n            explodeas = 'ScavComBossExplo',\n            maxthisunit = maxDoombringers,\n            customparams = pveSquad(mqAngerBoss, 1000, 'berserk', nil, 1, 99),\n            weapondefs = {\n                eyelaser = {\n                    name = 'Eyes of Doom',\n                    reloadtime = 3,\n                    rgbcolor = '0.3 1 0',\n                    range = 500,\n                    damage = { default = 48000, commanders = 24000 },\n                },\n                goo = {\n                    name = 'Amber Hailstorm',\n                    soundstart = 'penbray1',\n                    soundStartVolume = 2,\n                    cegtag = 'blob_trail_red',\n                    burst = 15,\n                    sprayangle = 3072,\n                    weaponvelocity = 600,\n                    reloadtime = 5,\n                    rgbcolor = '0.7 0.85 1.0',\n                    hightrajectory = 1,\n                    damage = { default = 5000 },\n                },\n            },\n            weapons = {\n                [1] = {\n                    def = 'eyelaser',\n                    badtargetcategory = 'VTOL OBJECT',\n                },\n                [2] = {\n                    def = 'goo',\n                    maindir = '0 0 1',\n                    maxangledif = 180,\n                    badtargetcategory = 'VTOL OBJECT',\n                },\n            },\n        },\n\n        raptor_mama_ba = {\n            maxthisunit = scaledMax(4),\n            customparams = pveSquad(55, mqAnger[3] - 1, 'berserk'),\n            weapondefs = {\n                goo = { damage = { default = 750 } },\n                melee = { damage = { default = 750 } },\n            },\n        },\n        raptor_mama_fi = {\n            explodeas = 'raptor_empdeath_big',\n            maxthisunit = scaledMax(4),\n            customparams = pveSquad(55, mqAnger[3] - 1, 'berserk'),\n            weapondefs = {\n                flamethrowerspike = { damage = { default = 80 } },\n                flamethrowermain = { damage = { default = 160 } },\n            },\n        },\n        raptor_mama_el = {\n            maxthisunit = scaledMax(4),\n            customparams = pveSquad(65, 1000, 'berserk'),\n        },\n        raptor_mama_ac = {\n            maxthisunit = scaledMax(4),\n            customparams = pveSquad(60, 1000, 'berserk'),\n            weapondefs = {\n                melee = { damage = { default = 750 } },\n            },\n        },\n        raptor_land_assault_basic_t4_v2 = {\n            maxthisunit = scaledMax(8),\n            customparams = pveSquad(33, 50, 'raider'),\n        },\n        raptor_land_assault_basic_t4_v1 = {\n            maxthisunit = scaledMax(12),\n            customparams = pveSquad(51, 64, 'raider', 'basic', 2),\n        },\n    } do\n        unitDefs[f] = unitDefs[f] or {}\n        table.mergeInPlace(unitDefs[f], u, true)\n    end\n\n    local newCosts = {\n        raptor_mama_ba = 36000,\n        raptor_mama_fi = 36000,\n        raptor_mama_el = 36000,\n        raptor_mama_ac = 36000,\n        raptor_consort = 45000,\n        raptor_doombringer = 90000,\n    }\n\n    local H = UnitDef_Post\n\n    function UnitDef_Post(p, I)\n        if H then\n            H(p, I)\n        end\n\n        local nbHpScale = 1\n\n        if nbHpMult > 1.3 then\n            nbHpScale = nbHpMult / 1.3\n        end\n\n        for unitName, baseCost in pairs(newCosts) do\n            if UnitDefs[unitName] then\n                local finalCost = math.floor(baseCost * nbHpScale)\n                UnitDefs[unitName].metalcost = finalCost\n            end\n        end\n    end\nend\n"
        },
        {
            "path": "lua/misc/SkilledSniper1-player-raptors.lua",
            "data": "--Player Raptors [SS1]\n-- Authors: SkilledSniper1, Skrip\n-- docs.google.com/spreadsheets/d/1QSVsuAAMhBrhiZdTihVfSCwPzbbZWDLCtXWP23CU0ko\n-- Credits to Skrip for starting the mod with Raptor Buildings v1! Check them out here: https://discord.com/channels/549281623154229250/1365417045147258971\nlocal pairs_, ipairs_, string_, tableInsert, unitDefs = pairs, ipairs, string, table.insert, UnitDefs\n\nlocal function setupMeta(unitName, unitDef)\n\tlocal customparams = unitDef.customparams or {}\n\tlocal aName = unitName\n\tlocal _, _, v = string_.find(unitName, '_v(%d+)')\n\tif v then\n\t\tv = tonumber(v) or 0\n\tend\n\taName = aName:gsub('_v(%d+)', '') --actual_name\n\tlocal _, _, tierData = string_.find(unitName, '_t(%d+)')\n\tif tierData then\n\t\ttierData = tonumber(tierData)\n\tend\n\tlocal gName = aName:gsub('_t(%d+)', '') --general_name\n\tlocal isR = string_.find(unitName, '_queen') or string_.find(unitName, '_matriarch') or unitName == 'raptorh5'\n\tif isR then\n\t\ttierData = 5\n\tend\n\tif tierData then\n\t\tcustomparams.techlevel = tierData\n\tend\n\tlocal isT\n\tif unitDef.yardmap or unitDef.speed == 0.0 then\n\t\tisT = unitDef.yardmap or ''\n\tend\n\tif isT then\n\t\tcustomparams.unitgroup = 'weapon'\n\tend\n\tlocal isH = string_.find(unitName, '_heal') or unitName == 'raptorh5'\n\tif isH then\n\t\tcustomparams.unitgroup = 'builder'\n\tend\n\tcustomparams.raptorbuildmeta = {\n\t\taName = aName,\n\t\tgName = gName,\n\t\tv = v,\n\t\tisRoyal = isR,\n\t\tisT = isT,\n\t\tisH = isH,\n\t}\n\tunitDef.customparams = customparams\n\treturn true\nend\n\nlocal function clone(unitName, newName, newDef)\n\tunitDefs[newName] = newDef\n\tnewDef.unitname = newName\n\tnewDef.icontype = unitName\n\tnewDef.maxthisunit = nil\n\tnewDef.buildoptions = {}\n\tlocal custom = newDef.customparams or {}\n\tcustom.i18nfromunit = unitName\n\tcustom.subfolder = 'other/raptors'\n\tnewDef.customparams = custom\n\treturn custom\nend\n\nlocal ref = {}\nfor unitName, unitDef in pairs_(unitDefs) do\n\tif (unitDef.category == 'RAPTOR') and not string_.find(unitName, 'custraptorunit') then\n\t\tsetupMeta(unitName, unitDef)\n\t\tref[unitName] = unitDef\n\tend\nend\n\nlocal pref = { 'Juvenile', 'Common', 'Mature', 'Apex', 'Royal' }\nlocal function fyn(t, n)\n\treturn 'custchickenunit_t' .. t .. n\nend\n\nlocal function cpLab(name, list)\n\tlocal o\n\tfor t, unitName in ipairs_(list) do\n\t\tlocal pre = pref[t]\n\t\tlocal n = fyn(t, '_' .. string_.lower(name))\n\t\tlocal u = table.copy(unitDefs[unitName])\n\t\tlocal c = clone(unitName, n, u)\n\t\tu.icontype = 'raptor_hive'\n\t\tc.i18nfromunit = nil\n\t\tc.i18n_en_humanname = pre .. ' Raptor ' .. name\n\t\tc.i18n_en_tooltip = 'Produces ' .. pre .. ' Raptors (T' .. t .. ')'\n\t\tc.normalmaps = true\n\t\tc.normaltex = 'unittextures/chicken_l_normals.png'\n\t\tc.areadamageresistance = '_RAPTORACID_'\n\t\tlocal b = {\n\t\t\taName = n,\n\t\t\tgName = n:gsub('_t(%d+)', ''),\n\t\t\tv = 1,\n\t\t\tisRoyal = t == 5,\n\t\t\tisT = true,\n\t\t\tisH = true,\n\t\t}\n\t\tc.raptorbuildmeta = b\n\t\to = u\n\tend\n\treturn o\nend\nlocal fmt = cpLab('Hatchery', { 'leglab', 'leghp', 'legalab', 'leggant', 'leggant' })\nfmt.energycost = fmt.energycost * 5\nfmt.metalcost = fmt.metalcost * 5\nfmt.buildtime = fmt.buildtime * 5\nfmt.health = fmt.health * 2.5\ncpLab('Nest', { 'legap', 'legaap', 'legaap', 'legapt3' })\n\nlocal everything, flying, healer = {}, {}, {}\nfor uName0, uDef0 in pairs_(ref) do\n\tlocal uName, uDef = uName0:gsub('raptor', 'custraptorunit'), table.copy(uDef0)\n\tlocal c = clone(uName0, uName, uDef)\n\tlocal t, m = c.techlevel or 0, c.raptorbuildmeta\n\tm.uName = uName\n\tlocal itr, bo = m.isT, m.isH\n\tif bo and pref[t] then\n\t\tuDef.canreclaim = 1\n\t\tuDef.reclaimspeed = uDef.workertime\n\t\tif t == 5 and string_.find(uName, '_matriarch') then\n\t\t\tbo, m.isH = nil, nil\n\t\telse\n\t\t\tc.i18nfromunit, c.i18n_en_humanname, c.i18n_en_tooltip = nil, pref[t] .. ' Constructor Raptor', 'Tech ' .. t .. ' Constructor'\n\t\tend\n\tend\n\tlocal q\n\tif uDef.canfly then\n\t\tflying[t] = flying[t] or {}\n\t\tq = flying[t]\n\telse\n\t\teverything[t] = everything[t] or {}\n\t\tq = everything[t]\n\tend\n\tlocal i = q[m.gName]\n\tif (not i or (i.v or 0) < (m.v or 0)) and not (bo and itr) then\n\t\tq[m.gName] = m\n\t\tif bo and not itr then\n\t\t\thealer[m.aName] = uDef\n\t\tend\n\tend\n\tif itr then\n\t\tuDef.maxSlope = uDef.maxSlope or 255\n\tend\n\tlocal qind = string_.find(uName, '_queen')\n\tif qind then\n\t\tlocal d = string_.sub(uName, qind + 7):gsub('very', 'very ')\n\t\tc.i18nfromunit = nil\n\t\tc.i18n_en_humanname = '[' .. d .. '] Raptor Queen'\n\t\tc.i18n_en_tooltip = 'The Mother of ALL ' .. string_.upper(d) .. ' RAPTORS!'\n\tend\n\tif type(uDef.weapondefs) == 'table' then\n\t\tfor wn, wd in pairs_(uDef.weapondefs) do\n\t\t\tif string_.find(uName, '_air_bomber_basic') then\n\t\t\t\twd.reloadtime = 6\n\t\t\tend\n\t\t\tif wn == 'spawnmeteor' then\n\t\t\t\twd.damage = { default = 1 }\n\t\t\tend\n\t\t\tif type(wd.explosiongenerator) == 'string' and string_.find(wd.explosiongenerator, 'acid-explosion', 1, true) then\n\t\t\t\tlocal s, wdc = 1.5, wd.customparams\n\t\t\t\tif not wdc then\n\t\t\t\t\twdc = {}\n\t\t\t\t\twd.customparams = wdc\n\t\t\t\tend\n\t\t\t\tif string_.find(wd.explosiongenerator, 'small') then\n\t\t\t\t\ts = 1\n\t\t\t\tend\n\t\t\t\tif string_.find(wd.explosiongenerator, 'xl') then\n\t\t\t\t\ts = 2\n\t\t\t\tend\n\t\t\t\tif wdc.area_onhit_damageCeg then\n\t\t\t\t\twdc.area_onhit_damageceg = wdc.area_onhit_damageCeg\n\t\t\t\tend\n\t\t\t\tif not wdc.area_onhit_damageceg then\n\t\t\t\t\twdc.area_onhit_damageceg = 'acid-damage-gen'\n\t\t\t\tend\n\t\t\t\tif not wdc.area_onhit_ceg then\n\t\t\t\t\twdc.area_onhit_ceg = 'acid-area-' .. (s * 75) .. '-repeat'\n\t\t\t\tend\n\t\t\t\tif not wdc.area_onhit_time then\n\t\t\t\t\twdc.area_onhit_time = 10\n\t\t\t\tend\n\t\t\t\tif not wdc.area_onhit_damage then\n\t\t\t\t\twdc.area_onhit_damage = 20 * (t + 1)\n\t\t\t\tend\n\t\t\t\tif not wdc.area_onhit_range then\n\t\t\t\t\twdc.area_onhit_range = s * 75\n\t\t\t\tend\n\t\t\t\tif not wdc.area_onhit_resistance then\n\t\t\t\t\twdc.area_onhit_resistance = '_RAPTORACID_'\n\t\t\t\tend\n\t\t\tend\n\t\tend\n\tend\nend\n\n-- all turrets\nlocal af, atr = {}, {}\nfor t, _ in ipairs_(pref) do\n\tlocal tierHealer, tierFlyers, tierEverything = {}, {}, {}\n\tfor gName, m in pairs_(everything[t]) do\n\t\tif not m.isT then\n\t\t\ttierHealer[m.uName] = healer[m.aName]\n\t\t\ttableInsert(tierEverything, m.uName)\n\t\telse\n\t\t\tatr[gName] = m.uName\n\t\tend\n\tend\n\tif t == 5 then\n\t\tfor gName, m in pairs_(everything[0] or {}) do\n\t\t\tif not m.isT then\n\t\t\t\ttierHealer[m.uName] = healer[m.aName]\n\t\t\t\ttableInsert(tierEverything, m.uName)\n\t\t\telse\n\t\t\t\tatr[gName] = m.uName\n\t\t\tend\n\t\tend\n\tend\n\tfor gName, m in pairs_(flying[t] or {}) do\n\t\ttierHealer[m.uName] = healer[m.aName]\n\t\taf[gName] = m.uName\n\tend\n\tif t == 4 then\n\t\tfor gName, m in pairs_(flying[0] or {}) do\n\t\t\ttierHealer[m.uName] = healer[m.aName]\n\t\t\taf[gName] = m.uName\n\t\tend\n\tend\n\tfor _, uName in pairs_(af) do\n\t\ttableInsert(tierFlyers, uName)\n\tend\n\tlocal lfy, afy = fyn(t, '_hatchery'), fyn(t, '_nest')\n\tlocal lfyDef, afyDef = unitDefs[lfy], unitDefs[afy] or {}\n\tlfyDef.buildoptions, afyDef.buildoptions = tierEverything, tierFlyers\n\tlocal thb, nPre = { lfy, afy }, pref[t + 1]\n\tif t == 1 then\n\t\tfor _, fy in ipairs_(thb) do\n\t\t\tfor _, cm in ipairs_({ 'armcom', 'corcom', 'legcom' }) do\n\t\t\t\ttableInsert(((unitDefs[cm] or {}).buildoptions or {}), fy)\n\t\t\t\tfor lvl = 2, 10 do\n\t\t\t\t\ttableInsert(((unitDefs[cm .. 'lvl' .. lvl] or {}).buildoptions or {}), fy)\n\t\t\t\tend\n\t\t\tend\n\t\tend\n\telseif t == 5 then\n\t\ttableInsert(thb, fyn(t - 1, '_hatchery'))\n\t\ttableInsert(thb, fyn(t - 1, '_nest'))\n\tend\n\tif nPre then\n\t\ttableInsert(thb, fyn(t + 1, '_hatchery'))\n\tend\n\tfor _, uName in pairs_(atr) do\n\t\ttableInsert(thb, uName)\n\tend\n\tfor _, uDef in pairs_(tierHealer) do\n\t\tuDef.buildoptions = thb\n\tend\nend\n"
        },
        {
            "path": "lua/misc/all_coms_inherit_xp.lua",
            "data": "-- Evo Commander XP Inheritance\nfor name, ud in pairs(UnitDefs) do\n\tif string.match(name, 'comlvl%d') or string.match(name, 'armcom') or string.match(name, 'corcom') or string.match(name, 'legcom') then\n\t\tud.customparams = ud.customparams or {}\n\t\tud.customparams.inheritxpratemultiplier = 0.5\n\t\tud.customparams.childreninheritxp = 'TURRET MOBILEBUILT'\n\t\tud.customparams.parentsinheritxp = 'TURRET MOBILEBUILT'\n\tend\nend\n"
        },
        {
            "path": "lua/misc/auto-evolve.lua",
            "data": "--Auto Unit Evolution\nlocal a = {\n\tarm = {\n\t\t{from = 'armwin', fromDesc = 'Wind Turbine', to = 'armsolar', toDesc = 'Solar Collector', timer = 60},\n\t\t{from = 'armsolar', fromDesc = 'Solar Collector', to = 'armadvsol', toDesc = 'Advanced Solar Collector', timer = 120},\n\t\t{\n\t\t\tfrom = 'armadvsol',\n\t\t\tfromDesc = 'Advanced Solar Collector',\n\t\t\tto = 'armwint2',\n\t\t\ttoDesc = 'Advanced Wind Turbine',\n\t\t\ttimer = 240\n\t\t},\n\t\t{from = 'armwint2', fromDesc = 'Fusion Reactor', to = 'armfus', toDesc = 'Advanced Fusion Reactor', timer = 360},\n\t\t{from = 'armfus', fromDesc = 'Fusion Reactor', to = 'armafus', toDesc = 'Advanced Fusion Reactor', timer = 360},\n\t\t{\n\t\t\tfrom = 'armgeo',\n\t\t\tfromDesc = 'Geothermal Powerplant',\n\t\t\tto = 'armfakegeo',\n\t\t\ttoDesc = '-Workaround Fake Geo-',\n\t\t\ttimer = 360\n\t\t},\n\t\t{\n\t\t\tfrom = 'armfakegeo',\n\t\t\tfromDesc = '-Workaround Fake Geo-',\n\t\t\tto = 'armageo',\n\t\t\ttoDesc = 'Advanced Geothermal Powerplant',\n\t\t\ttimer = 2\n\t\t},\n\t\t{from = 'armtide', fromDesc = 'Tidal Generator', to = 'armuwfus', toDesc = 'Naval Fusion Reactor', timer = 300},\n\t\t{from = 'armmex', fromDesc = 'Metal Extractor', to = 'armfakemex', toDesc = '-Workaround Fake Mex-', timer = 360},\n\t\t{\n\t\t\tfrom = 'armfakemex',\n\t\t\tfromDesc = '-Workaround Fake Mex-',\n\t\t\tto = 'armmoho',\n\t\t\ttoDesc = 'Advanced Metal Extractor',\n\t\t\ttimer = 2\n\t\t},\n\t\t{from = 'armdrag', fromDesc = \"Dragon's Teeth\", to = 'armfort', toDesc = 'Fortification Wall', timer = 360},\n\t\t{\n\t\t\tfrom = 'armnanotc',\n\t\t\tfromDesc = 'Construction Turret',\n\t\t\tto = 'armnanotct2',\n\t\t\ttoDesc = 'Advanced Construction Turret',\n\t\t\ttimer = 120\n\t\t},\n\t\t{\n\t\t\tfrom = 'armnanotcplat',\n\t\t\tfromDesc = 'Naval Construction Turret',\n\t\t\tto = 'armnanotc2plat',\n\t\t\ttoDesc = 'Advanced Naval Construction Turret',\n\t\t\ttimer = 120\n\t\t},\n\t\t{\n\t\t\tfrom = 'armfasp',\n\t\t\tfromDesc = 'Water Air Repair Pad',\n\t\t\tto = 'mission_command_tower',\n\t\t\ttoDesc = 'Mission Command Tower',\n\t\t\ttimer = 60,\n\t\t\tannounce = true,\n\t\t\tanSize = 25\n\t\t}\n\t},\n\tcor = {\n\t\t{from = 'corwin', fromDesc = 'Wind Turbine', to = 'corsolar', toDesc = 'Solar Collector', timer = 60},\n\t\t{from = 'corsolar', fromDesc = 'Solar Collector', to = 'coradvsol', toDesc = 'Advanced Solar Collector', timer = 120},\n\t\t{\n\t\t\tfrom = 'coradvsol',\n\t\t\tfromDesc = 'Advanced Solar Collector',\n\t\t\tto = 'corwint2',\n\t\t\ttoDesc = 'Advanced Wind Turbine',\n\t\t\ttimer = 240\n\t\t},\n\t\t{from = 'corwint2', fromDesc = 'Advanced Wind Turbine', to = 'corfus', toDesc = 'Fusion Reactor', timer = 300},\n\t\t{from = 'corfus', fromDesc = 'Fusion Reactor', to = 'corafus', toDesc = 'Advanced Fusion Reactor', timer = 360},\n\t\t{\n\t\t\tfrom = 'corgeo',\n\t\t\tfromDesc = 'Geothermal Powerplant',\n\t\t\tto = 'corfakegeo',\n\t\t\ttoDesc = '-Workaround Fake Geo-',\n\t\t\ttimer = 360\n\t\t},\n\t\t{\n\t\t\tfrom = 'corfakegeo',\n\t\t\tfromDesc = '-Workaround Fake Geo-',\n\t\t\tto = 'corageo',\n\t\t\ttoDesc = 'Advanced Geothermal Powerplant',\n\t\t\ttimer = 2\n\t\t},\n\t\t{from = 'cortide', fromDesc = 'Tidal Generator', to = 'coruwfus', toDesc = 'Naval Fusion Reactor', timer = 300},\n\t\t{from = 'cormex', fromDesc = 'Metal Extractor', to = 'corfakemex', toDesc = '-Workaround Fake Mex-', timer = 360},\n\t\t{\n\t\t\tfrom = 'corfakemex',\n\t\t\tfromDesc = '-Workaround Fake Mex-',\n\t\t\tto = 'cormoho',\n\t\t\ttoDesc = 'Advanced Metal Extractor',\n\t\t\ttimer = 2\n\t\t},\n\t\t{from = 'cordrag', fromDesc = \"Dragon's Teeth\", to = 'corfort', toDesc = 'Fortification Wall', timer = 360},\n\t\t{\n\t\t\tfrom = 'cornanotc',\n\t\t\tfromDesc = 'Construction Turret',\n\t\t\tto = 'cornanotct2',\n\t\t\ttoDesc = 'Advanced Construction Turret',\n\t\t\ttimer = 120\n\t\t},\n\t\t{\n\t\t\tfrom = 'cornanotcplat',\n\t\t\tfromDesc = 'Naval Construction Turret',\n\t\t\tto = 'cornanotc2plat',\n\t\t\ttoDesc = 'Advanced Naval Construction Turret',\n\t\t\ttimer = 120\n\t\t},\n\t\t{\n\t\t\tfrom = 'corfasp',\n\t\t\tfromDesc = 'Water Air Repair Pad',\n\t\t\tto = 'mission_command_tower',\n\t\t\ttoDesc = 'Mission Command Tower',\n\t\t\ttimer = 60,\n\t\t\tannounce = true,\n\t\t\tanSize = 25\n\t\t}\n\t},\n\tleg = {\n\t\t{from = 'legwin', fromDesc = 'Wind Turbine', to = 'legsolar', toDesc = 'Solar Collector', timer = 60},\n\t\t{from = 'legsolar', fromDesc = 'Solar Collector', to = 'legadvsol', toDesc = 'Advanced Solar Collector', timer = 120},\n\t\t{\n\t\t\tfrom = 'legadvsol',\n\t\t\tfromDesc = 'Advanced Solar Collector',\n\t\t\tto = 'corwint2',\n\t\t\ttoDesc = 'Advanced Wind Turbine',\n\t\t\ttimer = 240\n\t\t},\n\t\t{from = 'legtide', fromDesc = 'Tidal Generator', to = 'coruwfus', toDesc = 'Naval Fusion Reactor', timer = 300},\n\t\t{from = 'legmex', fromDesc = 'Metal Extractor', to = 'legfakemex', toDesc = '-Workaround Fake Mex-', timer = 360},\n\t\t{\n\t\t\tfrom = 'legfakemex',\n\t\t\tfromDesc = '-Workaround Fake Mex-',\n\t\t\tto = 'legmoho',\n\t\t\ttoDesc = 'Advanced Metal Extractor',\n\t\t\ttimer = 2\n\t\t},\n\t\t{from = 'legdrag', fromDesc = \"Dragon's Teeth\", to = 'corfort', toDesc = 'Fortification Wall', timer = 360}\n\t}\n}\nUnitDefs['armfakemex'] = table.copy(UnitDefs['armmex'])\nUnitDefs['armfakemex'].extractsmetal = 0\nUnitDefs['armfakegeo'] = table.copy(UnitDefs['armgeo'])\nUnitDefs['armfakegeo'].customparams.geothermal = nil\nUnitDefs['corfakemex'] = table.copy(UnitDefs['cormex'])\nUnitDefs['corfakemex'].extractsmetal = 0\nUnitDefs['corfakegeo'] = table.copy(UnitDefs['corgeo'])\nUnitDefs['corfakegeo'].customparams.geothermal = nil\nif UnitDefs['legmex'] then\n\tUnitDefs['legfakemex'] = table.copy(UnitDefs['legmex'])\n\tUnitDefs['legfakemex'].extractsmetal = 0\nend\nfor b, c in pairs(UnitDefs) do\n\tfaction = string.sub(b, 1, 3)\n\tfor d, e in pairs(a) do\n\t\tif faction == d then\n\t\t\tfor e, f in ipairs(a[d]) do\n\t\t\t\tif b == f.from then\n\t\t\t\t\tif f.announce == nil then\n\t\t\t\t\t\tf.announce = false\n\t\t\t\t\tend\n\t\t\t\t\tc.customparams = c.customparams or {}\n\t\t\t\t\tc.customparams.evolution_target = f.to\n\t\t\t\t\tif f.announce == true then\n\t\t\t\t\t\tc.customparams.evolution_announcement = string.format('%s evolved to %s!', f.fromDesc, f.toDesc)\n\t\t\t\t\t\tc.customparams.evolution_announcement_size = f.anSize or 12.5\n\t\t\t\t\tend\n\t\t\t\t\tc.customparams.evolution_condition = 'timer'\n\t\t\t\t\tc.customparams.evolution_timer = f.timer or 120\n\t\t\t\t\tc.customparams.evolution_health_transfer = 'flat'\n\t\t\t\tend\n\t\t\tend\n\t\tend\n\tend\n\tif b == 'mission_command_tower' then\n\t\tc.weapondefs = c.weapondefs or {}\n\t\tc.weapondefs['repulsor'] = {\n\t\t\tavoidfeature = false,\n\t\t\ttexture1 = 'Flame',\n\t\t\tcraterareaofeffect = 0,\n\t\t\tcraterboost = 0,\n\t\t\tcratermult = 0,\n\t\t\tedgeeffectiveness = c.health / 12000 + 0.04,\n\t\t\tname = 'PlasmaRepulsor',\n\t\t\trange = 777,\n\t\t\tsoundhitwet = 'sizzle',\n\t\t\tweapontype = 'Shield',\n\t\t\tdamage = {default = 420},\n\t\t\tshield = {\n\t\t\t\talpha = 0.2,\n\t\t\t\tarmortype = 'shields',\n\t\t\t\tforce = c.health / 4200 + 0.42,\n\t\t\t\tintercepttype = 128,\n\t\t\t\tpower = c.health * 0.35 + 420,\n\t\t\t\tpowerregen = 117526.5,\n\t\t\t\tpowerregenenergy = 500,\n\t\t\t\tradius = 777,\n\t\t\t\trepulser = true,\n\t\t\t\tsmart = true,\n\t\t\t\tstartingpower = c.health * 0.21,\n\t\t\t\tvisible = true,\n\t\t\t\tvisiblerepulse = true,\n\t\t\t\tbadcolor = {[1] = 0.7, [2] = 0.1, [3] = 0.1, [4] = 0.2},\n\t\t\t\tgoodcolor = {[1] = 1.1, [2] = 1.1, [3] = 1.1, [4] = 1}\n\t\t\t}\n\t\t}\n\t\tc.weapons = c.weapons or {}\n\t\tc.weapons[#c.weapons + 1] = {def = 'REPULSOR', onlytargetcategory = 'NOTSUB'}\n\tend\nend\n"
        },
        {
            "path": "lua/misc/disarm-queen.lua",
            "data": "--Disarm queen\nfor _, name in pairs(\n\t{\n\t\t'raptor_queen_veryeasy',\n\t\t'raptor_queen_easy',\n\t\t'raptor_queen_normal',\n\t\t'raptor_queen_hard',\n\t\t'raptor_queen_veryhard',\n\t\t'raptor_queen_epic'\n\t}\n) do\n\tUnitDefs[name].weapons = {}\nend\n"
        },
        {
            "path": "lua/misc/epic-ragnarok-calamity-starfall.lua",
            "data": "--Epic Ragnarok, Calamity, Starfall, & Bastion\n--Authors: Altwaal\n\nlocal unitDefs,tableMerge,epic_ragnarok,\nepic_calamity,epic_starfall,epic_bastion,epic_sentinel=UnitDefs or{},table.merge,'epic_ragnarok',\n'epic_calamity','epic_starfall','epic_bastion','epic_sentinel'\n\nunitDefs.epic_ragnarok=tableMerge(unitDefs['armvulc'],{\n  name='Epic Ragnarok',\n  description='Advanced Armada artillery engineering. Unleashes powerful plasma barrages across the battlefield.',\n  buildtime=900000,\n  health=140000,\n  metalcost=180000,\n  energycost=2600000,\n  icontype=\"armvulc\",\n  customparams={\n    i18n_en_humanname='Epic Ragnarok',\n    i18n_en_tooltip='Devastating single-shot plasma beam. Destroys everything in range.',\n    techlevel=4\n  },\n  sfxtypes={\n    explosiongenerators={\n      [1]='custom:tachyonshot'\n    }\n  },\n  weapondefs={\n    apocalypse_plasma_cannon={\n      collidefriendly=0,\n      collidefeature=0,\n      avoidfeature=0,\n      avoidfriendly=0,\n      name='Apocalypse Plasma Cannon',\n      weapontype='BeamLaser',\n      rgbcolor='1 0 0',\n      reloadtime=8,\n      accuracy=0,\n      areaofeffect=160,\n      range=3080,\n      energypershot=25000,\n      turret=true,\n      soundstart='annigun1',\n      soundhitdry='',\n      soundhitwet='sizzle',\n      soundtrigger=1,\n      size=8,\n      impulsefactor=0,\n      weaponvelocity=3100,\n      beamtime=1.5,\n      corethickness=0.3,\n      thickness=4.5,\n      laserflaresize=6.5,\n      largebeamlaser=true,\n      scrollspeed=5,\n      texture3=\"largebeam\",\n      tilelength=150,\n      tolerance=10000,\n      camerashake=0,\n      explosiongenerator='custom:tachyonshot',\n      craterboost=0,\n      cratermult=0,\n      craterareaofeffect=0,\n      edgeeffectiveness=0.15,\n      impactonly=1,\n      noselfdamage=true,\n      firestarter=90,\n      damage={\n        commanders=100000,\n        default=200000,\n        shields=50000,\n        subs=10000\n      },\n      allowNonBlockingAim=true\n    }\n  },\n  weapons={\n    [1]={\n      badtargetcategory='VTOL GROUNDSCOUT',\n      def='apocalypse_plasma_cannon',\n      onlytargetcategory='SURFACE'\n    }\n  }\n})\n\nunitDefs[epic_calamity]=tableMerge(unitDefs['corbuzz'],{\n  name='Epic Calamity',\n  description='Advanced Cortex siege technology. Fires large plasma shells that devastate formations with each impact.',\n  buildtime=920000,\n  health=145000,\n  metalcost=165000,\n  energycost=2700000,\n  icontype=\"corbuzz\",\n  customparams={\n    i18n_en_humanname='Epic Calamity',\n    i18n_en_tooltip='Large single-shot plasma artillery. Each shell causes major destruction.',\n    techlevel=4\n  },\n  weapondefs={\n    cataclysm_plasma_howitzer={\n      collidefriendly=0,\n      collidefeature=0,\n      avoidfeature=0,\n      avoidfriendly=0,\n      impactonly=1,\n      name='Cataclysm Plasma Howitzer',\n      weapontype='Cannon',\n      rgbcolor='0.15 0.6 0.5',\n      camerashake=0,\n      reloadtime=0.25,\n      accuracy=300,\n      areaofeffect=220,\n      range=3150,\n      energypershot=4600,\n      turret=true,\n      soundstart='lrpcshot3',\n      soundhit='rflrpcexplo',\n      soundhitvolume=50,\n      size=12,\n      impulsefactor=2.0,\n      weaponvelocity=2500,\n      footprintx=14,\n      footprintz=14,\n      turnrate=20000,\n      thickness=18,\n      laserflaresize=8,\n      texture3=\"largebeam\",\n      tilelength=200,\n      tolerance=10000,\n      explosiongenerator='custom:tachyonshot',\n      craterboost=0.25,\n      cratermult=0.25,\n      edgeeffectiveness=0.35,\n      damage={\n        default=3720,\n        shields=2268,\n        subs=972\n      },\n      allowNonBlockingAim=true\n    }\n  },\n  weapons={\n    [1]={\n      badtargetcategory='MOBILE',\n      def='cataclysm_plasma_howitzer',\n      onlytargetcategory='SURFACE'\n    }\n  }\n})\n\nunitDefs[epic_starfall]=tableMerge(unitDefs['legstarfall'],{\n  name='Epic Starfall',\n  description='Advanced Legion siege technology. Unleashes a devastating apocalyptic beam that obliterates everything in range.',\n  buildtime=180000,\n  health=145000,\n  metalcost=180000,\n  energycost=3400000,\n  maxthisunit=3,\n  collisionvolumescales='61 128 61',\n  footprintx=6,\n  footprintz=6,\n  collisionvolumetype=\"CylY\",\n  yardmap = \"oooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooo\",\n  icontype=\"legstarfall\",\n  customparams={\n    i18n_en_humanname='Epic Starfall',\n    i18n_en_tooltip='Apocalyptic single-shot beam weapon. 60 second cooldown. Max 3 units.',\n    techlevel=4,\n    modelradius=150\n  },\n  weapondefs={\n    epic_mega_beam={\n      collidefriendly=0,\n      collidefeature=0,\n      avoidfeature=0,\n      avoidfriendly=0,\n      name='Epic Apocalypse Beam',\n      weapontype='BeamLaser',\n      rgbcolor='0.7 0.3 1.0',\n      reloadtime=60,\n      accuracy=0,\n      areaofeffect=400,\n      range=3300,\n      energypershot=2000000,\n      turret=true,\n      soundstart='lrpcshot',\n      soundhit='rflrpcexplo',\n      soundhitvolume=50,\n      soundhitwet='splshbig',\n      soundtrigger=1,\n      impulsefactor=2.0,\n      weaponvelocity=3100,\n      thickness=25,\n      laserflaresize=18,\n      texture3=\"largebeam\",\n      tilelength=250,\n      tolerance=10000,\n      beamtime=0.3,\n      corethickness=0.8,\n      camerashake=0,\n      explosiongenerator='custom:tachyonshot',\n      craterboost=0.5,\n      cratermult=0.5,\n      edgeeffectiveness=0.95,\n      impactonly=1,\n      noselfdamage=true,\n      damage={\n        default=1000000,\n        shields=400000,\n        subs=50000\n      },\n      allowNonBlockingAim=true\n    }\n  },\n  weapons={\n    [1]={\n      badtargetcategory='MOBILE',\n      def='epic_mega_beam',\n      onlytargetcategory='SURFACE'\n    }\n  }\n})\n\nunitDefs[epic_bastion]=tableMerge(unitDefs['legbastion'],{\n  name='Epic Bastion',\n  description='Advanced Legion defensive flamethrower tower. Unleashes devastating long-range flames that incinerate swarms.',\n  buildtime=150000,\n  health=16000,\n  metalcost=22000,\n  energycost=460000,\n  icontype=\"legbastion\",\n  customparams={\n    i18n_en_humanname='Epic Bastion',\n    i18n_en_tooltip='Heavy long-range anti-swarm flamethrower tower.',\n    techlevel=3\n  },\n  weapondefs={\n    dmaw={\n      areaofeffect=164,\n      avoidfeature=false,\n      burst=16,\n      burstrate=0.05,\n      collidefriendly=false,\n      cegtag='burnflame-anim',\n      colormap='1 0.95 0.82 0.03   0.65 0.4 0.35 0.030   0.44 0.25 0.20 0.028   0.033 0.018 0.012 0.03   0.0 0.0 0.0 0.01',\n      craterareaofeffect=0,\n      craterboost=0,\n      cratermult=0,\n      edgeeffectiveness=0.15,\n      explosiongenerator='custom:burnblack',\n      firestarter=100,\n      flamegfxtime=1,\n      impulsefactor=0,\n      intensity=0.68,\n      name='Epic Anti-swarm Flamethrower',\n      noselfdamage=true,\n      proximitypriority=1,\n      range=1200,\n      reloadtime=1.1,\n      energypershot=500,\n      impactonly=1,\n      rgbcolor='1 0.94 0.88',\n      rgbcolor2='0.9 0.84 0.8',\n      sizegrowth=0.5,\n      soundhitdry='flamhit1',\n      soundhitvolume=7.5,\n      soundhitwet='sizzle',\n      soundstart='Flamhvy1',\n      soundstartvolume=5.3,\n      soundtrigger=false,\n      sprayangle=300,\n      targetmoveerror=0.001,\n      texture1='flame',\n      tolerance=2500,\n      turret=true,\n      weapontimer=1,\n      weapontype='Flame',\n      weaponvelocity=600,\n      customparams={\n        exclude_preaim=true\n      },\n      damage={\n        commanders=925,\n        default=210,\n        subs=300\n      }\n    }\n  },\n  weapons={\n    [1]={\n      def='dmaw',\n      fastautoretargeting=true,\n      onlytargetcategory='SURFACE'\n    }\n  }\n})\n\nunitDefs[epic_sentinel]=tableMerge(unitDefs['leggatet3'],{\n  name='Epic Sentinel',\n  description='Ultimate Legion shield technology. Projects an impenetrable energy barrier.',\n  activatewhenbuilt=true,\n  buildtime=450000,\n  canattack=false,\n  health=35000,\n  metalcost=95000,\n  energycost=1800000,\n  maxthisunit=3,\n  energystorage=25000,\n  damagemodifier=0.25,\n  footprintx=6,\n  footprintz=6,\n  noautofire=true,\n  onoffable=false,\n  icontype=\"leggatet3\",\n  customparams={\n    i18n_en_humanname='Epic Sentinel',\n    i18n_en_tooltip='Massive shield generator. Max 3 units.',\n    shield_color_mult=30,\n    shield_power=180000,\n    shield_radius=1600,\n    techlevel=4\n  },\n  weapondefs={\n    repulsor={\n      avoidfeature=false,\n      craterareaofeffect=0,\n      craterboost=0,\n      cratermult=0,\n      edgeeffectiveness=0.15,\n      name=\"Epic Shield\",\n      range=1600,\n      soundhitwet=\"sizzle\",\n      weapontype=\"Shield\",\n      damage={\n        default=100\n      },\n      shield={\n        alpha=0.20,\n        armortype=\"shields\",\n        energyupkeep=0,\n        force=3.0,\n        intercepttype=1015,\n        power=180000,\n        powerregen=2800,\n        powerregenenergy=10000,\n        radius=1600,\n        repulser=true,\n        smart=true,\n        startingpower=60000,\n        visiblerepulse=true,\n        badcolor={\n          [1]=1,\n          [2]=0.2,\n          [3]=0.2,\n          [4]=0.25\n        },\n        goodcolor={\n          [1]=0.2,\n          [2]=1,\n          [3]=0.2,\n          [4]=0.20\n        }\n      }\n    }\n  },\n  weapons={\n    [1]={\n      def='repulsor',\n      onlytargetcategory='NOTSUB'\n    }\n  }\n})\n\nlocal builders={'armaca','armack','armacsub','armacv','coraca','corack','coracsub','coracv','legaca','legack','legacv','legcomt2com'}\n\nfor _,j in pairs{'arm','cor','leg'}do\n  for k=3,10 do\n    table.insert(builders ,j..'comlvl'..k)\n  end\n  table.insert(builders,j..'t3airaide')\nend\n\nfor _,builder in pairs(builders)do\n  if unitDefs[builder]then\n    local faction = string.sub(builder,1,3)\n    if faction=='arm' then\n      table.insert(unitDefs[builder].buildoptions,epic_ragnarok)\n    elseif faction=='cor' then\n      table.insert(unitDefs[builder].buildoptions,epic_calamity)\n    elseif faction=='leg' then\n      table.insert(unitDefs[builder].buildoptions,epic_starfall)\n      table.insert(unitDefs[builder].buildoptions,epic_bastion)\n      table.insert(unitDefs[builder].buildoptions,epic_sentinel)\n    end\n  end\nend\n"
        },
        {
            "path": "lua/misc/raptor-build.lua",
            "data": "-- Raptor Build 1.1 Skrip\n-- Constructors can be built from the t1 factories\n-- Toggle to allow commanders to build raptor buildings.\nlocal includeCommanders = false\n\nlocal unitDefs = UnitDefs or {}\n-- Maps faction prefix to their builder units\nlocal factionBuilders = {\n\tarm = { 'armaca', 'armack', 'armacv', 'armcom' },\n\tcor = { 'coraca', 'corack', 'coracv', 'corcom' },\n\tleg = { 'legaca', 'legack', 'legacv', 'legcom' },\n}\n\n-- Adds a building to the buildoptions of each builder in the faction\nfunction addBuildingToFaction(buildingID, factionKey, category)\n\tlocal targetFactions = {}\n\n\tif factionKey and factionBuilders[factionKey] then\n\t\ttargetFactions[factionKey] = factionBuilders[factionKey]\n\telse\n\t\ttargetFactions = factionBuilders -- all factions\n\tend\n\n\tfor _, builders in pairs(targetFactions) do\n\t\tfor _, builder in ipairs(builders) do\n\t\t\tlocal isCommander = builder:match('com$')\n\n\t\t\t-- Add to base builder\n\t\t\tif (includeCommanders or not isCommander) and unitDefs[builder] then\n\t\t\t\tunitDefs[builder].buildoptions = unitDefs[builder].buildoptions or {}\n\t\t\t\ttable.insert(unitDefs[builder].buildoptions, buildingID)\n\t\t\t\tSpring.Echo('Added ' .. buildingID .. ' to ' .. builder)\n\t\t\tend\n\n\t\t\t-- Add to all commander levels\n\t\t\tif includeCommanders and isCommander then\n\t\t\t\tfor lvl = 2, 10 do\n\t\t\t\t\tlocal levelBuilder = builder .. 'lvl' .. lvl\n\t\t\t\t\tif unitDefs[levelBuilder] then\n\t\t\t\t\t\tunitDefs[levelBuilder].buildoptions = unitDefs[levelBuilder].buildoptions or {}\n\t\t\t\t\t\ttable.insert(unitDefs[levelBuilder].buildoptions, buildingID)\n\t\t\t\t\t\tSpring.Echo('Added ' .. buildingID .. ' to ' .. levelBuilder)\n\t\t\t\t\tend\n\t\t\t\tend\n\t\t\tend\n\t\tend\n\tend\n\n\tif category and unitDefs[buildingID] then\n\t\tunitDefs[buildingID].customparams = unitDefs[buildingID].customparams or {}\n\t\tunitDefs[buildingID].customparams.unitgroup = category\n\t\tSpring.Echo('Set unitgroup for ' .. buildingID .. ' to ' .. category)\n\tend\nend\n\n-- Clones an existing building and creates a new one\nfunction cloneUnit(sourceUnitID, newUnitID, humanName, tooltip)\n\tif unitDefs[sourceUnitID] and not unitDefs[newUnitID] then\n\t\tlocal base = table.copy(unitDefs[sourceUnitID])\n\t\tunitDefs[newUnitID] = base\n\n\t\tlocal def = unitDefs[newUnitID]\n\t\tdef.unitname = newUnitID\n\t\tdef.buildoptions = {}\n\n\t\tdef.customparams = def.customparams or {}\n\t\tdef.customparams.i18n_en_humanname = humanName\n\t\tdef.customparams.i18n_en_tooltip = tooltip\n\t\tdef.customparams.unitgroup = 'builder'\n\n\t\tdef.buildpic = def.buildpic or 'factory.dds'\n\n\t\tSpring.Echo('Cloned: ' .. newUnitID .. ' from ' .. sourceUnitID)\n\tend\nend\n\n-- Picks highest version units given prefixes\nfunction selectBestUnits(prefixes, threshold, direction)\n\tlocal bestUnits = {}\n\n\tfor unitName, _ in pairs(unitDefs) do\n\t\tfor _, prefix in ipairs(prefixes) do\n\t\t\tif unitName:match('^' .. prefix) then\n\t\t\t\tlocal metalCost = unitDefs[unitName].metalcost\n\t\t\t\tlocal passesFilter = true\n\n\t\t\t\tif threshold and direction then\n\t\t\t\t\tif direction == '>' then\n\t\t\t\t\t\tpassesFilter = metalCost > threshold\n\t\t\t\t\telseif direction == '<' then\n\t\t\t\t\t\tpassesFilter = metalCost < threshold\n\t\t\t\t\tend\n\t\t\t\tend\n\n\t\t\t\tif passesFilter then\n\t\t\t\t\tlocal baseName, version = unitName:match('^(.-)_v(%d+)$')\n\n\t\t\t\t\tif baseName and version then\n\t\t\t\t\t\tversion = tonumber(version)\n\t\t\t\t\t\tif not bestUnits[baseName] or version > bestUnits[baseName].version then\n\t\t\t\t\t\t\tbestUnits[baseName] = { name = unitName, version = version }\n\t\t\t\t\t\tend\n\t\t\t\t\telse\n\t\t\t\t\t\tif not bestUnits[unitName] then\n\t\t\t\t\t\t\tbestUnits[unitName] = { name = unitName, version = 0 }\n\t\t\t\t\t\tend\n\t\t\t\t\tend\n\t\t\t\tend\n\t\t\tend\n\t\tend\n\tend\n\n\treturn bestUnits\nend\n\nfunction selectUnits(prefixes)\n\tlocal unitList = {}\n\n\tfor unitName, _ in pairs(unitDefs) do\n\t\tfor _, prefix in ipairs(prefixes) do\n\t\t\tif unitName:match('^' .. prefix) then\n\t\t\t\tif not unitList[unitName] then\n\t\t\t\t\tunitList[unitName] = { name = unitName }\n\t\t\t\tend\n\t\t\tend\n\t\tend\n\tend\n\n\treturn unitList\nend\n\n-- Adds selected units to a buildings buildoptions\nfunction addUnitsToBuilding(buildingName, unitInput, category)\n\tif not unitDefs[buildingName] then\n\t\treturn\n\tend\n\tunitDefs[buildingName].buildoptions = unitDefs[buildingName].buildoptions or {}\n\n\tif type(unitInput) == 'table' then\n\t\tfor _, unitInfo in pairs(unitInput) do\n\t\t\t-- Check if table is {name=...} (from selectUnits), or simple list\n\t\t\tlocal unitName = unitInfo.name or unitInfo\n\t\t\ttable.insert(unitDefs[buildingName].buildoptions, unitName)\n\t\t\tSpring.Echo('Added ' .. unitName .. ' to ' .. buildingName)\n\n\t\t\t-- Category assignment (optional)\n\t\t\tif category and unitDefs[unitName] then\n\t\t\t\tunitDefs[unitName].customparams = unitDefs[unitName].customparams or {}\n\t\t\t\tunitDefs[unitName].customparams.unitgroup = category\n\t\t\t\tSpring.Echo('Set unitgroup for ' .. unitName .. ' to ' .. category)\n\t\t\tend\n\t\tend\n\telseif type(unitInput) == 'string' then\n\t\t-- Single unit string\n\t\ttable.insert(unitDefs[buildingName].buildoptions, unitInput)\n\t\tSpring.Echo('Added ' .. unitInput .. ' to ' .. buildingName)\n\tend\nend\n\n---------------------------------------------------------------\n-- Correct unitdefs\n---------------------------------------------------------------\nif unitDefs['raptor_turret_basic_t4_v1'] and unitDefs['raptor_turret_burrow_t2_v1'] then\n\tlocal def = unitDefs['raptor_turret_burrow_t2_v1']\n\n\tdef.buildpic = 'raptors/raptor_turrets.DDS'\n\tdef.metalcost = (unitDefs['raptor_turret_basic_t4_v1'].metalcost * 2 or 1600)\n\tdef.energycost = (unitDefs['raptor_turret_basic_t4_v1'].energycost * 2 or 1600)\nend\n\n---------------------------------------------------------------\n-- Raptor Gantries Setup\n---------------------------------------------------------------\n--, \"raptor_allterrain_\", \"raptor_matriarch_\", \"raptor_queen_\"\n-- Create Raptor Land Gantry t1\ncloneUnit('legvp', 'sk_raptorhatchery_t1', 'Raptor Hatchery', 'Specialized factory for land-based Raptor units')\nlocal bestLandUnits = selectBestUnits({ 'raptor_land_' }, 999, '<')\naddUnitsToBuilding('sk_raptorhatchery_t1', bestLandUnits)\n-- addBuildingToFaction(\"sk_raptorhatchery\", nil, \"builder\")\n\n-- Create Raptor Land Gantry t2\ncloneUnit('leggant', 'sk_raptorhatchery_t2', 'Giant Raptor Hatchery', 'Specialized factory for land-based Raptor units')\nlocal bestLandUnits = selectBestUnits({ 'raptor_land_', 'raptor_allterrain_', 'raptor_matriarch_', 'raptor_queen_' }, 1000, '>')\naddUnitsToBuilding('sk_raptorhatchery_t2', bestLandUnits)\n\n-- Create Raptor Air Gantry\ncloneUnit('legaap', 'sk_raptorairhatchery', 'Raptor Air Hatchery', 'Specialized factory for air-based Raptor units')\nlocal bestAirUnits = selectBestUnits({ 'raptor_air_' })\naddUnitsToBuilding('sk_raptorairhatchery', bestAirUnits)\n-- addBuildingToFaction(\"sk_raptorairhatchery\", nil, \"builder\")\n\n-- -- Add buildings\n-- addBuildingToFaction(\"raptor_turret_acid_t3_v1\", nil, \"weapon\")\n-- addBuildingToFaction(\"raptor_turret_acid_t4_v1\", nil, \"weapon\")\n-- addBuildingToFaction(\"raptor_turret_antiair_t3_v1\", nil, \"weapon\")\n-- addBuildingToFaction(\"raptor_turret_antiair_t4_v1\", nil, \"weapon\")\n-- addBuildingToFaction(\"raptor_turret_antinuke_t3_v1\", nil, \"weapon\")\n-- addBuildingToFaction(\"raptor_turret_antinuke_t4_v1\", nil, \"weapon\")\n-- addBuildingToFaction(\"raptor_turret_basic_t3_v1\", nil, \"weapon\")\n-- addBuildingToFaction(\"raptor_turret_basic_t4_v1\", nil, \"weapon\")\n-- addBuildingToFaction(\"raptor_turret_emp_t3_v1\", nil, \"weapon\")\n-- addBuildingToFaction(\"raptor_turret_emp_t4_v1\", nil, \"weapon\")\n-- addBuildingToFaction(\"raptor_turret_meteor_t3_v1\", nil, \"weapon\")\n-- addBuildingToFaction(\"raptor_turret_meteor_t4_v1\", nil, \"weapon\")\n\n-- Create raptor builder\ncloneUnit('armacv', 'sk_raptorbuilder', 'Raptor Construction Vehicle', 'Builds Raptor Hatcheries')\n\nif unitDefs['sk_raptorbuilder'] then\n\tlocal def = unitDefs['sk_raptorbuilder']\n\n\t-- Change model and visuals\n\n\t--def.objectname = \"Raptors/raptor1d.s3o\"\n\t-- def.script = \"Raptors/raptor1d.cob\"\n\tdef.buildpic = 'raptors/raptor1d.DDS'\n\n\t-- -- Cost adjustments\n\t-- def.energycost = 500\n\t-- def.metalcost = 250\n\t-- def.buildtime = 8000\n\n\t-- -- Resource generation (optional)\n\t-- def.energymake = 10\n\t-- def.metalmake = 1\n\n\t-- Clean up factory stuff\n\tdef.customparams.techlevel = 2\n\tdef.customparams.unitgroup = 'builder'\n\n\t-- Wipe any old build options, set to only Hatcheries\n\tdef.buildoptions = {}\n\tdef.buildoptions = {\n\t\t'sk_raptorhatchery_t1',\n\t\t'sk_raptorhatchery_t2',\n\t\t--, \"sk_raptorairhatchery\"\n\t}\nend\n\naddUnitsToBuilding('sk_raptorbuilder', selectBestUnits({ 'raptor_turret_' }), 'weapon')\n\naddUnitsToBuilding('armvp', 'sk_raptorbuilder')\naddUnitsToBuilding('armlab', 'sk_raptorbuilder')\n\n-- Create raptor builder\ncloneUnit('armaca', 'sk_raptorairbuilder', 'Raptor Air Construction Vehicle', 'Builds Raptor Air Hatcheries')\n\nif unitDefs['sk_raptorairbuilder'] then\n\tlocal def = unitDefs['sk_raptorairbuilder']\n\n\t-- Change model and visuals\n\t--def.objectname = \"Raptors/raptorairscout1.s3o\"\n\t-- def.script = \"Raptors/raptorairscout.cob\"\n\tdef.buildpic = 'raptors/raptorairscout.DDS'\n\n\t-- -- Cost adjustments\n\t-- def.energycost = 500\n\t-- def.metalcost = 250\n\t-- def.buildtime = 8000\n\n\t-- -- Resource generation (optional)\n\t-- def.energymake = 10\n\t-- def.metalmake = 1\n\n\t-- Clean up factory stuff\n\tdef.customparams.techlevel = 2\n\tdef.customparams.unitgroup = 'builder'\n\n\t-- Wipe any old build options, set to only Hatcheries\n\tdef.buildoptions = {}\n\tdef.buildoptions = {\n\t\t--\"sk_raptorhatchery\"\n\t\t'sk_raptorairhatchery',\n\t}\nend\n\naddUnitsToBuilding('sk_raptorairbuilder', selectBestUnits({ 'raptor_turret_' }), 'weapon')\n\n-- Add the Raptor Builder to Vehicle Factory\naddUnitsToBuilding('armap', 'sk_raptorairbuilder')\naddUnitsToBuilding('corvp', 'sk_raptorbuilder')\naddUnitsToBuilding('corlab', 'sk_raptorbuilder')\naddUnitsToBuilding('legvp', 'sk_raptorbuilder')\naddUnitsToBuilding('leglab', 'sk_raptorbuilder')\naddUnitsToBuilding('corap', 'sk_raptorairbuilder')\naddUnitsToBuilding('legap', 'sk_raptorairbuilder')\n"
        },
        {
            "path": "lua/misc/skateboard-t3-builders.lua",
            "data": "--WIP T3 builder v2\n-- Authors: TetrisCo\n-- docs.google.com/spreadsheets/d/1QSVsuAAMhBrhiZdTihVfSCwPzbbZWDLCtXWP23CU0ko\nlocal unitDefs, unitDefName, factions, apt3 = UnitDefs or {}, 't3con', {'arm', 'cor', 'leg'}, 'apt3'\nfor _, faction in pairs(factions) do\n\tunitDefs[faction .. unitDefName] =\n\t\ttable.merge(\n\t\tunitDefs['armaca'],\n\t\t{\n\t\t\tblocking = false,\n\t\t\tbuilddistance = 500,\n\t\t\tbuildpic = 'ARMDRONECARRY.DDS',\n\t\t\tbuildtime = 140000,\n\t\t\tcruisealtitude = 130,\n\t\t\tenergycost = 320000,\n\t\t\tenergyupkeep = 2000,\n\t\t\thealth = 3000,\n\t\t\thoverattack = true,\n\t\t\tidleautoheal = 5,\n\t\t\tidletime = 1800,\n\t\t\tmaxthisunit = 2,\n\t\t\tmetalcost = 20000,\n\t\t\tobjectname = 'Units/ARMDRONECARRY.s3o',\n\t\t\tscript = 'Units/ARMDRONECARRY.cob',\n\t\t\tspeed = 50,\n\t\t\tterraformspeed = 3000,\n\t\t\tturninplaceanglelimit = 360,\n\t\t\tturnrate = 240,\n\t\t\tworkertime = 15000,\n\t\t\tcustomparams = {\n\t\t\t\tsubfolder = 'ArmAircraft/T3',\n\t\t\t\ttechlevel = 3,\n\t\t\t\tunitgroup = 'buildert3'\n\t\t\t}\n\t\t}\n\t)\n\tunitDefs[faction .. unitDefName].buildoptions = {\n\t\tfaction == 'leg' and 'legadveconvt3' or faction .. 'mmkrt3',\n\t\tfaction .. 'afust3',\n\t\tfaction .. 'nanotct2'\n\t}\nend\n\nfor _, faction in pairs(factions) do\n\ttable.insert(unitDefs[faction .. apt3].buildoptions, faction .. unitDefName)\nend\n"
        },
        {
            "path": "lua/misc/slow-raptors-player-raptors.lua",
            "data": "--Slow playable raptors/scav\n-- bar-nuttyb-collective.github.io/configurator/\nlocal unitDefs = UnitDefs or {}\nfor unit, unitDef in pairs(unitDefs) do\n\tif unit.name:find('raptor') or unit.name:find('_scav') then\n\t\tunitDef.speed = unitDef.speed * 0.5\n\tend\nend\n"
        },
        {
            "path": "lua/misc/standalone-faction-drones.lua",
            "data": "--Faction Drones\n-- docs.google.com/spreadsheets/d/1QSVsuAAMhBrhiZdTihVfSCwPzbbZWDLCtXWP23CU0ko\nlocal unitDefs = UnitDefs or {}\nlocal armassistdrone = 'armassistdrone'\nlocal corassistdrone = 'corassistdrone'\nlocal legassistdrone = 'legassistdrone'\nlocal corsat = 'corsat'\n\nunitDefs[armassistdrone].energycost = 2000\nunitDefs[armassistdrone].metalcost = 100\nunitDefs[corassistdrone].energycost = 2000\nunitDefs[corassistdrone].metalcost = 100\nunitDefs[legassistdrone].energycost = 2000\nunitDefs[legassistdrone].metalcost = 100\n\nunitDefs[corsat].sightdistance = 3100\nunitDefs[corsat].radardistance = 4080\nunitDefs[corsat].cruisealtitude = 3300\nunitDefs[corsat].energyupkeep = 1250\n\nlocal builderNames = {\n\t'armapt3',\n\t'corapt3',\n\t'legapt3',\n\t'armshltx',\n\t'corgant',\n\t'leggant',\n\t'armshltxuw',\n\t'corgantuw',\n\t'leggantuw'\n}\n\nfor i = 1, #builderNames do\n\tlocal builderName = builderNames[i]\n\tlocal nBuildOptions = #unitDefs[builderName].buildoptions\n\tunitDefs[builderName].buildoptions[nBuildOptions + 1] = armassistdrone\n\tunitDefs[builderName].buildoptions[nBuildOptions + 2] = corassistdrone\n\tunitDefs[builderName].buildoptions[nBuildOptions + 3] = legassistdrone\n\tunitDefs[builderName].buildoptions[nBuildOptions + 4] = corsat\nend\n"
        },
        {
            "path": "lua/queen-hp-template.lua",
            "data": "-- NuttyB v1.52 $HP_MULTIPLIER$X QHP\n-- https://github.com/nuttyb-community/nuttyb\n\nfor b, c in pairs(UnitDefs) do\n    if b:match('^raptor_queen_.*') then\n        c.repairable = 0\n        c.canbehealed = 0\n        c.buildtime = 9999999\n        c.autoheal = 2\n        c.canSelfRepair = 0\n        c.health = c.health * $HP_MULTIPLIER$\n    end\nend\n"
        },
        {
            "path": "lua/raptor-hp-template.lua",
            "data": "-- NuttyB v1.52 $HP_MULTIPLIER$X HP\n-- https://github.com/nuttyb-community/nuttyb\n\nfor unitName, unitDef in pairs(UnitDefs) do\n    if string.sub(unitName, 1, 24) == 'raptor_land_swarmer_heal' then\n        unitDef.reclaimspeed = 100\n        unitDef.stealth = false\n        unitDef.builder = false\n        unitDef.workertime = unitDef.workertime * 0.5\n        unitDef.canassist = false\n        unitDef.maxthisunit = 0\n    end\n\n    if\n        unitDef.customparams\n        and unitDef.customparams.subfolder == 'other/raptors'\n        and unitDef.health\n        and not unitName:match('^raptor_queen_.*')\n    then\n        unitDef.health = unitDef.health * $HP_MULTIPLIER$\n        unitDef.sfxtypes = {}\n        unitDef.explodas = unitDef.explodas\n    end\nend\n\nlocal oldUnitDef_Post = UnitDef_Post\nfunction UnitDef_Post(unitID, unitDef)\n    if oldUnitDef_Post and oldUnitDef_Post ~= UnitDef_Post then\n        oldUnitDef_Post(unitID, unitDef)\n    end\n\n    if\n        unitDef.customparams\n        and unitDef.customparams.subfolder == 'other/raptors'\n    then\n        unitDef.nochasecategory = 'OBJECT'\n        if unitDef.metalcost and unitDef.health then\n            unitDef.metalcost = math.floor(unitDef.health * 0.75 / $HP_MULTIPLIER$)\n        end\n    end\nend\n"
        },
        {
            "path": "lua/rflrpc-rebalance.lua",
            "data": "-- Balance on T4 RFLRPC\n-- Authors: Altwaal\n-- https://github.com/nuttyb-community/nuttyb\n\n{\n    armvulc = {\n        explodeas = 'fusionExplosion',\n        energycost = 1500000,\n        metalcost = 55000,\n        buildtime = 180000,\n        health = 52000,\n        footprintx = 6,\n        footprintz = 6,\n        weapondefs = {\n            ARMVULC_MAIN = {\n                areaofeffect = 120,\n                collidefriendly = 0,\n                collidefeature = 0,\n                avoidfeature = 0,\n                avoidfriendly = 0,\n                beamtime = 0.5,\n                burst = 1,\n                corethickness = 0.1,\n                craterareaofeffect = 90,\n                craterboost = 0,\n                cratermult = 0,\n                cameraShake = 0,\n                edgeeffectiveness = 0.30,\n                energypershot = 3200,\n                explosiongenerator = 'custom:laserhit-large-red',\n                firestarter = 90,\n                impactonly = 1,\n                impulseboost = 0,\n                impulsefactor = 0,\n                largebeamlaser = true,\n                laserflaresize = 1,\n                name = 'The Eagle Standard',\n                noselfdamage = true,\n                range = 2900,\n                reloadtime = 0.3,\n                rgbcolor = '0/1/0.4',\n                scrollspeed = 13,\n                soundhitdry = '',\n                soundhitwet = 'sizzle',\n                soundstart = 'lasrcrw1',\n                soundtrigger = 1,\n                targetmoveerror = 0.3,\n                texture3 = 'largebeam',\n                thickness = 12,\n                tilelength = 150,\n                tolerance = 10000,\n                turret = true,\n                turnrate = 16000,\n                weapontype = 'LaserCannon',\n                weaponvelocity = 3100,\n                damage = {\n                    commanders = 480,\n                    default = 2550,\n                },\n            },\n        },\n        weapons = {\n            [1] = {\n                badtargetcategory = 'VTOL GROUNDSCOUT',\n                def = 'ARMVULC_MAIN',\n                onlytargetcategory = 'SURFACE',\n            },\n        },\n    },\n\n    corbuzz = {\n        explodeas = 'fusionExplosion',\n        energycost = 1500000,\n        metalcost = 58000,\n        buildtime = 190000,\n        health = 54000,\n        footprintx = 6,\n        footprintz = 6,\n        weapondefs = {\n            CORBUZZ_MAIN = {\n                areaofeffect = 220,\n                collidefriendly = 0,\n                collidefeature = 0,\n                avoidfeature = 0,\n                avoidfriendly = 0,\n                burst = 1,\n                craterareaofeffect = 140,\n                craterboost = 0,\n                cratermult = 0,\n                cameraShake = 0,\n                edgeeffectiveness = 0.45,\n                energypershot = 2500,\n                explosiongenerator = 'custom:plasmahit-large-blue',\n                firestarter = 85,\n                impactonly = 1,\n                impulseboost = 0,\n                impulsefactor = 0.8,\n                name = 'Cortex Devastator',\n                noselfdamage = true,\n                range = 2800,\n                reloadtime = 0.167,\n                rgbcolor = '0.2/0.8/1.0',\n                soundhitdry = 'xplomed2',\n                soundhitwet = 'splshbig',\n                soundstart = 'cannhvy5',\n                soundtrigger = 1,\n                targetmoveerror = 0.25,\n                thickness = 8,\n                tolerance = 8000,\n                turret = true,\n                turnrate = 14000,\n                weapontype = 'Cannon',\n                weaponvelocity = 2800,\n                damage = {\n                    commanders = 480,\n                    default = 1333,\n                },\n            },\n        },\n        weapons = {\n            [1] = {\n                badtargetcategory = 'VTOL GROUNDSCOUT',\n                def = 'CORBUZZ_MAIN',\n                onlytargetcategory = 'SURFACE',\n            },\n        },\n    },\n\n    legstarfall = {\n        explodeas = 'fusionExplosion',\n        energycost = 1500000,\n        metalcost = 52000,\n        buildtime = 175000,\n        health = 48000,\n        footprintx = 6,\n        footprintz = 6,\n        weapondefs = {\n            LEGSTARFALL_MAIN = {\n                accuracy = 0,\n                areaofeffect = 220,\n                avoidfeature = false,\n                avoidfriendly = false,\n                avoidground = false,\n                burst = 20,\n                burstrate = 0.015,\n                sprayangle = 120,\n                highTrajectory = 0,\n                cegtag = 'starfire',\n                collidefriendly = false,\n                craterboost = 0.1,\n                impactonly = 1,\n                cratermult = 0.1,\n                edgeeffectiveness = 0.75,\n                energypershot = 4480,\n                fireTolerance = 200,\n                tolerance = 200,\n                explosiongenerator = 'custom:plasmahit-medium-purple',\n                gravityaffected = false,\n                impulsefactor = 0.4,\n                name = 'Legion Meteor Storm',\n                noselfdamage = true,\n                range = 2950,\n                reloadtime = 1.5,\n                cameraShake = 0,\n                rgbcolor = '0.7 0.3 1.0',\n                soundhit = 'xplomed4',\n                soundhitwet = 'splshbig',\n                soundstart = 'mortarhvy1',\n                soundhitvolume = 35,\n                turret = true,\n                weapontimer = 3,\n                weapontype = 'Cannon',\n                weaponvelocity = 1200,\n                damage = {\n                    commanders = 480,\n                    default = 650,\n                    shields = 200,\n                    sub = 60,\n                },\n            },\n        },\n        weapons = {\n            [1] = {\n                badtargetcategory = 'VTOL GROUNDSCOUT',\n                def = 'LEGSTARFALL_MAIN',\n                onlytargetcategory = 'SURFACE',\n                burstControlWhenOutOfArc = 1,\n                maindir = '0 0 1',\n            },\n        },\n    },\n}\n"
        },
        {
            "path": "lua/rflrpc-t4.lua",
            "data": "-- Epic Ragnarok, Calamity, Starfall\n-- Authors: Altwaal\n-- https://github.com/nuttyb-community/nuttyb\n\ndo\n    local unitDefs, tableMerge = UnitDefs or {}, table.merge\n\n    local function ensureBuildOption(builderName, optionName)\n        local builder = unitDefs[builderName]\n        local optionDef = optionName and unitDefs[optionName]\n        if not builder or not optionDef then\n            return\n        end\n\n        builder.buildoptions = builder.buildoptions or {}\n        for i = 1, #builder.buildoptions do\n            if builder.buildoptions[i] == optionName then\n                return\n            end\n        end\n\n        builder.buildoptions[#builder.buildoptions + 1] = optionName\n    end\n\n    -- Epic unit names\n    local EPIC_RAGNAROK = 'epic_ragnarok'\n    local EPIC_CALAMITY = 'epic_calamity'\n    local EPIC_STARFALL = 'epic_starfall'\n\n    unitDefs[EPIC_RAGNAROK] = tableMerge(unitDefs['armvulc'], {\n        name = 'Epic Ragnarok',\n        description = 'Advanced Armada artillery engineering. Unleashes powerful plasma barrages across the battlefield.',\n        buildtime = 900000,\n        health = 140000,\n        metalcost = 180000,\n        energycost = 2600000,\n        icontype = 'armvulc',\n        customparams = {\n            i18n_en_humanname = 'Epic Ragnarok',\n            i18n_en_tooltip = 'Powerful burst-fire plasma artillery. Destroys everything in range.',\n            techlevel = 4,\n        },\n        weapondefs = {\n            apocalypse_plasma_cannon = {\n                collidefriendly = 0,\n                collidefeature = 0,\n                avoidfeature = 0,\n                avoidfriendly = 0,\n                name = 'Apocalypse Plasma Cannon',\n                weapontype = 'BeamLaser',\n                rgbcolor = '1.0 0.2 0.1',\n                burst = 4,\n                burstrate = 0.25,\n                reloadtime = 6,\n                accuracy = 500,\n                areaofeffect = 160,\n                range = 3080,\n                energypershot = 88750,\n                turret = true,\n                soundstart = 'lrpcshot3',\n                soundhit = 'rflrpcexplo',\n                soundhitvolume = 40,\n                size = 8,\n                impulsefactor = 1.3,\n                weaponvelocity = 3100,\n                thickness = 12,\n                laserflaresize = 8,\n                texture3 = 'largebeam',\n                tilelength = 150,\n                tolerance = 10000,\n                beamtime = 0.12,\n                corethickness = 0.4,\n                explosiongenerator = 'custom:tachyonshot',\n                craterboost = 0.15,\n                cratermult = 0.15,\n                edgeeffectiveness = 0.25,\n                impactonly = 1,\n                noselfdamage = true,\n                soundtrigger = 1,\n                damage = {\n                    default = 22701,\n                    shields = 2673,\n                    subs = 1338,\n                },\n                allowNonBlockingAim = true,\n            },\n        },\n        weapons = {\n            [1] = {\n                badtargetcategory = 'MOBILE',\n                def = 'apocalypse_plasma_cannon',\n                onlytargetcategory = 'SURFACE',\n            },\n        },\n    })\n\n    unitDefs[EPIC_CALAMITY] = tableMerge(unitDefs['corbuzz'], {\n        name = 'Epic Calamity',\n        description = 'Advanced Cortex siege technology. Fires large plasma shells that devastate formations with each impact.',\n        buildtime = 920000,\n        health = 145000,\n        metalcost = 165000,\n        energycost = 2700000,\n        icontype = 'corbuzz',\n        customparams = {\n            i18n_en_humanname = 'Epic Calamity',\n            i18n_en_tooltip = 'Large single-shot plasma artillery. Each shell causes major destruction.',\n            techlevel = 4,\n        },\n        weapondefs = {\n            cataclysm_plasma_howitzer = {\n                collidefriendly = 0,\n                collidefeature = 0,\n                avoidfeature = 0,\n                avoidfriendly = 0,\n                impactonly = 1,\n                name = 'Cataclysm Plasma Howitzer',\n                weapontype = 'Cannon',\n                rgbcolor = '0.15 0.6 0.5',\n                camerashake = 0,\n                reloadtime = 0.3,\n                accuracy = 300,\n                areaofeffect = 220,\n                range = 3150,\n                energypershot = 4600,\n                turret = true,\n                soundstart = 'lrpcshot3',\n                soundhit = 'rflrpcexplo',\n                soundhitvolume = 50,\n                size = 12,\n                impulsefactor = 2.0,\n                weaponvelocity = 2500,\n                footprintx = 14,\n                footprintz = 14,\n                turnrate = 20000,\n                thickness = 18,\n                laserflaresize = 8,\n                texture3 = 'largebeam',\n                tilelength = 200,\n                tolerance = 10000,\n                explosiongenerator = 'custom:tachyonshot',\n                craterboost = 0.25,\n                cratermult = 0.25,\n                edgeeffectiveness = 0.35,\n                damage = {\n                    default = 3720,\n                    shields = 2268,\n                    subs = 972,\n                },\n                allowNonBlockingAim = true,\n            },\n        },\n        weapons = {\n            [1] = {\n                badtargetcategory = 'MOBILE',\n                def = 'cataclysm_plasma_howitzer',\n                onlytargetcategory = 'SURFACE',\n            },\n        },\n    })\n\n    unitDefs[EPIC_STARFALL] = tableMerge(unitDefs['legstarfall'], {\n        name = 'Epic Starfall',\n        description = 'Advanced Legion siege technology. Unleashes devastating rocket barrages that obliterate everything in range.',\n        buildtime = 180000,\n        health = 145000,\n        metalcost = 180000,\n        energycost = 3400000,\n        collisionvolumescales = '61 128 61',\n        footprintx = 6,\n        footprintz = 6,\n        collisionvolumetype = 'CylY',\n        yardmap = 'oooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooo',\n        icontype = 'legstarfall',\n        customparams = {\n            i18n_en_humanname = 'Epic Starfall',\n            i18n_en_tooltip = 'Massive rocket artillery. Fires devastating direct-fire rocket barrages.',\n            techlevel = 4,\n            modelradius = 150,\n        },\n        weapondefs = {\n            epic_rocket_barrage = {\n                areaofeffect = 180,\n                avoidfeature = false,\n                avoidfriendly = false,\n                collidefriendly = false,\n                castshadow = true,\n                cegtag = 'missiletrailviper',\n                craterareaofeffect = 0,\n                craterboost = 0,\n                cratermult = 0,\n                camerashake = 0,\n                edgeeffectiveness = 0.25,\n                explosiongenerator = 'custom:genericshellexplosion-large-bomb',\n                firestarter = 90,\n                impulsefactor = 0.5,\n                model = 'cormissile3fast.s3o',\n                name = 'Epic Rocket Barrage',\n                noselfdamage = true,\n                range = 3300,\n                reloadtime = 20,\n                energypershot = 400000,\n                smokecolor = 0.8,\n                smokeperiod = 8,\n                smokesize = 14,\n                smoketime = 40,\n                smoketrail = true,\n                smoketrailcastshadow = false,\n                soundhit = 'xplomed4',\n                soundhitwet = 'splslrg',\n                soundstart = 'missilelauncher',\n                startvelocity = 400,\n                targetmoveerror = 0.15,\n                texture1 = 'null',\n                texture2 = 'railguntrail',\n                tolerance = 8000,\n                tracks = true,\n                turnrate = 18000,\n                turret = true,\n                weaponacceleration = 200,\n                weapontype = 'MissileLauncher',\n                weaponvelocity = 800,\n                damage = {\n                    default = 25000,\n                    commanders = 18750,\n                    subs = 500,\n                    vtol = 2500,\n                },\n            },\n        },\n        weapons = {\n            [1] = {\n                badtargetcategory = 'MOBILE',\n                def = 'epic_rocket_barrage',\n                onlytargetcategory = 'SURFACE',\n            },\n        },\n    })\n\n    -- Builders that can construct epic units\n    local builders = {\n        'armaca',\n        'armack',\n        'armacsub',\n        'armacv',\n        'armt3airaide',\n        'armt3aide',\n        'coraca',\n        'corack',\n        'coracsub',\n        'coracv',\n        'cort3airaide',\n        'cort3aide',\n        'legaca',\n        'legack',\n        'legacv',\n        'legcomt2com',\n        'legt3airaide',\n        'legt3aide',\n    }\n\n    -- Add commander levels 3-10 for each faction\n    for _, faction in pairs({ 'arm', 'cor', 'leg' }) do\n        for level = 3, 10 do\n            table.insert(builders, faction .. 'comlvl' .. level)\n        end\n    end\n\n    -- Add epic units to builder build options based on faction\n    for _, builderName in pairs(builders) do\n        local faction = builderName:sub(1, 3)\n\n        if faction == 'arm' then\n            ensureBuildOption(builderName, EPIC_RAGNAROK)\n        elseif faction == 'cor' then\n            ensureBuildOption(builderName, EPIC_CALAMITY)\n        elseif faction == 'leg' then\n            ensureBuildOption(builderName, EPIC_STARFALL)\n        end\n    end\nend\n"
        },
        {
            "path": "lua/unit-launchers.lua",
            "data": "-- Meatballlunch Reloaded\n-- This code adds new build options to the Epic Commando unit from the Cortex Faction (T3 Gantry with required experimental units + experimental SCAV units).\n-- The build options currently include 18 new unit launchers.\n-- Many T3 units and 9 launchers for T1-3 random units for each faction.\n-- https://github.com/nuttyb-community/nuttyb\n\ndo\n    local UnitDefs, armbotrail = UnitDefs or {}, 'armbotrail'\n    local NewUnits = {\n        armmeatball = {\n            customparams = { i18n_en_humanname = 'Meatball Launcher' },\n            weapondefs = {\n                arm_botrail = {\n                    range = 7550,\n                    metalpershot = 5300,\n                    energypershot = 96000,\n                    reloadtime = 0.5,\n                    customparams = {\n                        stockpilelimit = 50,\n                        spawns_name = 'armmeatball',\n                    },\n                },\n            },\n        },\n        armassimilator = {\n            customparams = { i18n_en_humanname = 'Assimilator Launcher' },\n            weapondefs = {\n                arm_botrail = {\n                    range = 7550,\n                    metalpershot = 4500,\n                    energypershot = 80000,\n                    reloadtime = 0.5,\n                    customparams = {\n                        stockpilelimit = 50,\n                        spawns_name = 'armassimilator',\n                    },\n                },\n            },\n        },\n        armpwt4 = {\n            customparams = { i18n_en_humanname = 'Epic Pawn Launcher' },\n            weapondefs = {\n                arm_botrail = {\n                    range = 7550,\n                    metalpershot = 14200,\n                    energypershot = 480000,\n                    reloadtime = 0.5,\n                    customparams = {\n                        stockpilelimit = 50,\n                        spawns_name = 'armpwt4',\n                    },\n                },\n            },\n        },\n        legeshotgunmech = {\n            customparams = { i18n_en_humanname = 'Pretorian Launcher' },\n            weapondefs = {\n                arm_botrail = {\n                    range = 7550,\n                    metalpershot = 15000,\n                    energypershot = 384000,\n                    reloadtime = 0.5,\n                    customparams = {\n                        stockpilelimit = 50,\n                        spawns_name = 'legeshotgunmech',\n                    },\n                },\n            },\n        },\n        legjav = {\n            customparams = { i18n_en_humanname = 'Javelin Launcher' },\n            weapondefs = {\n                arm_botrail = {\n                    range = 7550,\n                    metalpershot = 3000,\n                    energypershot = 102400,\n                    reloadtime = 0.5,\n                    customparams = {\n                        stockpilelimit = 50,\n                        spawns_name = 'legjav',\n                    },\n                },\n            },\n        },\n        armraz = {\n            customparams = { i18n_en_humanname = 'Razorback Launcher' },\n            weapondefs = {\n                arm_botrail = {\n                    range = 7550,\n                    metalpershot = 8000,\n                    energypershot = 283520,\n                    reloadtime = 0.5,\n                    customparams = {\n                        stockpilelimit = 50,\n                        spawns_name = 'armraz',\n                    },\n                },\n            },\n        },\n        corakt4 = {\n            customparams = { i18n_en_humanname = 'Epic Grund Launcher' },\n            weapondefs = {\n                arm_botrail = {\n                    range = 7550,\n                    metalpershot = 15000,\n                    energypershot = 384000,\n                    reloadtime = 0.5,\n                    customparams = {\n                        stockpilelimit = 50,\n                        spawns_name = 'corakt4',\n                    },\n                },\n            },\n        },\n        cordemon = {\n            customparams = { i18n_en_humanname = 'Demon Launcher' },\n            weapondefs = {\n                arm_botrail = {\n                    range = 7550,\n                    metalpershot = 15000,\n                    energypershot = 384000,\n                    reloadtime = 0.5,\n                    customparams = {\n                        stockpilelimit = 50,\n                        spawns_name = 'cordemon',\n                    },\n                },\n            },\n        },\n        armvader = {\n            customparams = { i18n_en_humanname = 'Tumbleweed Launcher' },\n            weapondefs = {\n                arm_botrail = {\n                    range = 7550,\n                    metalpershot = 115,\n                    energypershot = 12500,\n                    reloadtime = 0.5,\n                    customparams = {\n                        stockpilelimit = 50,\n                        spawns_name = 'armvader',\n                    },\n                },\n            },\n        },\n        armvadert4 = {\n            customparams = { i18n_en_humanname = 'Epic Tumbleweed Launcher' },\n            weapondefs = {\n                arm_botrail = {\n                    range = 7550,\n                    metalpershot = 26600,\n                    energypershot = 480000,\n                    reloadtime = 0.5,\n                    customparams = {\n                        stockpilelimit = 50,\n                        spawns_name = 'armvadert4',\n                    },\n                },\n            },\n        },\n        armt1 = {\n            customparams = { i18n_en_humanname = 'Armada T1 Launcher' },\n            weapondefs = {\n                arm_botrail = {\n                    stockpiletime = 0.5,\n                    range = 7550,\n                    metalpershot = 300,\n                    energypershot = 12500,\n                    reloadtime = 0.5,\n                    customparams = {\n                        stockpilelimit = 50,\n                        spawns_name = 'armham armjeth armpw armrock armwar armah armanac armmh armsh armart armfav armflash armjanus armpincer armsam armstump armzapper',\n                        spawns_mode = 'random',\n                    },\n                },\n            },\n        },\n        armt2 = {\n            customparams = { i18n_en_humanname = 'Armada T2 Launcher' },\n            weapondefs = {\n                arm_botrail = {\n                    stockpiletime = 1,\n                    range = 7550,\n                    metalpershot = 1000,\n                    energypershot = 45000,\n                    reloadtime = 0.5,\n                    customparams = {\n                        stockpilelimit = 50,\n                        spawns_name = 'armaak armamph armfast armfboy armfido armmav armsnipe armsptk armzeus armbull armcroc armgremlin armlatnk armmanni armmart armmerl armyork',\n                        spawns_mode = 'random',\n                    },\n                },\n            },\n        },\n        armt3 = {\n            customparams = { i18n_en_humanname = 'Armada T3 Launcher' },\n            weapondefs = {\n                arm_botrail = {\n                    stockpiletime = 2,\n                    range = 7550,\n                    metalpershot = 15000,\n                    energypershot = 180000,\n                    reloadtime = 0.5,\n                    customparams = {\n                        stockpilelimit = 50,\n                        spawns_name = 'armbanth armlun armmar armprowl armraz armthor armvang armassimilator armlunchbox armsptkt4 armdronecarryland armrattet4',\n                        spawns_mode = 'random',\n                    },\n                },\n            },\n        },\n        cort1 = {\n            customparams = { i18n_en_humanname = 'Cortex T1 Launcher' },\n            weapondefs = {\n                arm_botrail = {\n                    stockpiletime = 0.5,\n                    range = 7550,\n                    metalpershot = 300,\n                    energypershot = 12500,\n                    reloadtime = 0.5,\n                    customparams = {\n                        stockpilelimit = 50,\n                        spawns_name = 'corak corcrash corstorm corthud corah corhal cormh corsh corsnap corthovr corfav corgarp corgator corlevlr cormist corraid corwolv cortorch',\n                        spawns_mode = 'random',\n                    },\n                },\n            },\n        },\n        cort2 = {\n            customparams = { i18n_en_humanname = 'Cortex T2 Launcher' },\n            weapondefs = {\n                arm_botrail = {\n                    stockpiletime = 1,\n                    range = 7550,\n                    metalpershot = 1000,\n                    energypershot = 45000,\n                    reloadtime = 0.5,\n                    customparams = {\n                        stockpilelimit = 50,\n                        spawns_name = 'coraak coramph corcan corfast corhrk cormort corpyro corroach corsktl corsumo cortermite corban corgol cormabm cormart corparrow correap corsala corseal corsent corsiegebreaker cortrem corvrad corvroc corftiger corgatreap',\n                        spawns_mode = 'random',\n                    },\n                },\n            },\n        },\n        cort3 = {\n            customparams = { i18n_en_humanname = 'Cortex T3 Launcher' },\n            weapondefs = {\n                arm_botrail = {\n                    stockpiletime = 2,\n                    range = 7550,\n                    metalpershot = 15000,\n                    energypershot = 180000,\n                    reloadtime = 0.5,\n                    customparams = {\n                        stockpilelimit = 50,\n                        spawns_name = 'corcat cordemon corjugg corkarg corkorg corshiva corakt4 cordeadeye corkarganetht4 corkark corthermite corgolt4',\n                        spawns_mode = 'random',\n                    },\n                },\n            },\n        },\n        legt1 = {\n            customparams = { i18n_en_humanname = 'Legion T1 Launcher' },\n            weapondefs = {\n                arm_botrail = {\n                    stockpiletime = 0.5,\n                    range = 7550,\n                    metalpershot = 300,\n                    energypershot = 12500,\n                    reloadtime = 0.5,\n                    customparams = {\n                        stockpilelimit = 50,\n                        spawns_name = 'legbal legcen leggob legkark leglob legah legcar legmh legner legsh legamphtank legbar leggat leghades leghelios legrail',\n                        spawns_mode = 'random',\n                    },\n                },\n            },\n        },\n        legt2 = {\n            customparams = { i18n_en_humanname = 'Legion T2 Launcher' },\n            weapondefs = {\n                arm_botrail = {\n                    stockpiletime = 1,\n                    range = 7550,\n                    metalpershot = 1000,\n                    energypershot = 45000,\n                    reloadtime = 0.5,\n                    customparams = {\n                        stockpilelimit = 50,\n                        spawns_name = 'legamph legbart legdecom leginc legshot legsnapper legsrail legstr legaheattank legamcluster legaskirmtank legavroc legfloat leginf legmed legmrv legvcarry legvflak',\n                        spawns_mode = 'random',\n                    },\n                },\n            },\n        },\n        legt3 = {\n            customparams = { i18n_en_humanname = 'Legion T3 Launcher' },\n            weapondefs = {\n                arm_botrail = {\n                    stockpiletime = 2,\n                    range = 7550,\n                    metalpershot = 15000,\n                    energypershot = 180000,\n                    reloadtime = 0.5,\n                    customparams = {\n                        stockpilelimit = 50,\n                        spawns_name = 'leegmech legbunk legeheatraymech legelrpcmech legerailtank legeshotgunmech legjav legkeres leggobt3 legpede legsrailt4',\n                        spawns_mode = 'random',\n                    },\n                },\n            },\n        },\n    }\n\n    local function ensureBuildOption(builderName, optionName)\n        local builder = UnitDefs[builderName]\n        local optionDef = optionName and UnitDefs[optionName]\n        if not builder or not optionDef then\n            return\n        end\n\n        builder.buildoptions = builder.buildoptions or {}\n        for i = 1, #builder.buildoptions do\n            if builder.buildoptions[i] == optionName then\n                return\n            end\n        end\n\n        builder.buildoptions[#builder.buildoptions + 1] = optionName\n    end\n\n    if UnitDefs.cormandot4 then\n        for k, s in pairs(NewUnits) do\n            local nU = armbotrail .. '_' .. k\n            if UnitDefs[armbotrail] and not UnitDefs[nU] then\n                UnitDefs[nU] = table.merge(UnitDefs[armbotrail], s)\n                ensureBuildOption('cormandot4', nU)\n            end\n        end\n    end\nend\n"
        },
        {
            "path": "lua/wave-challenge.lua",
            "data": "-- NuttyB Experimental Wave Challenge\n-- Authors: BackBash\n-- https://github.com/nuttyb-community/nuttyb\n\ndo\n    local unitDefs = UnitDefs or {}\n    local merge = table.mergeInPlace or table.merge\n\n    merge(unitDefs, {\n        raptor_air_scout_basic_t2_v1 = {\n            customparams = {\n                raptorcustomsquad = true,\n                raptorsquadunitsamount = 25,\n                raptorsquadminanger = 20,\n                raptorsquadmaxanger = 26,\n                raptorsquadweight = 10,\n                raptorsquadrarity = 'basic',\n                raptorsquadbehavior = 'raider',\n                raptorsquadbehaviordistance = 500,\n                raptorsquadbehaviorchance = 0.75,\n            },\n        },\n        raptor_hive_assault_basic = {\n            customparams = {\n                raptorcustomsquad = true,\n                raptorsquadunitsamount = 25,\n                raptorsquadminanger = 0,\n                raptorsquadmaxanger = 40,\n                raptorsquadweight = 1,\n                raptorsquadrarity = 'basic',\n                raptorsquadbehavior = 'raider',\n                raptorsquadbehaviordistance = 500,\n                raptorsquadbehaviorchance = 0.75,\n            },\n        },\n        raptor_land_swarmer_basic_t3_v1 = {\n            customparams = {\n                raptorcustomsquad = true,\n                raptorsquadunitsamount = 25,\n                raptorsquadminanger = 0,\n                raptorsquadmaxanger = 40,\n                raptorsquadweight = 2,\n                raptorsquadrarity = 'basic',\n                raptorsquadbehavior = 'raider',\n                raptorsquadbehaviordistance = 500,\n                raptorsquadbehaviorchance = 0.75,\n            },\n        },\n        raptor_evolved_motort4 = {\n            customparams = {\n                raptorcustomsquad = true,\n                raptorsquadunitsamount = 12,\n                raptorsquadminanger = 50,\n                raptorsquadmaxanger = 300,\n                raptorsquadweight = 3,\n                raptorsquadrarity = 'special',\n                raptorsquadbehavior = 'artillery',\n                raptorsquadbehaviordistance = 2500,\n                raptorsquadbehaviorchance = 0.75,\n            },\n        },\n        raptor_hive_assault_heavy = {\n            customparams = {\n                raptorcustomsquad = true,\n                raptorsquadunitsamount = 25,\n                raptorsquadminanger = 55,\n                raptorsquadmaxanger = 70,\n                raptorsquadweight = 1,\n                raptorsquadrarity = 'basic',\n                raptorsquadbehavior = 'berserk',\n                raptorsquadbehaviordistance = 500,\n                raptorsquadbehaviorchance = 0.75,\n            },\n        },\n        raptor_hive_assault_superheavy = {\n            customparams = {\n                raptorcustomsquad = true,\n                raptorsquadunitsamount = 25,\n                raptorsquadminanger = 80,\n                raptorsquadmaxanger = 85,\n                raptorsquadweight = 1,\n                raptorsquadrarity = 'basic',\n                raptorsquadbehavior = 'berserk',\n                raptorsquadbehaviordistance = 500,\n                raptorsquadbehaviorchance = 0.75,\n            },\n        },\n        raptor_air_kamikaze_basic_t2_v1 = {\n            customparams = {\n                raptorcustomsquad = true,\n                raptorsquadunitsamount = 55,\n                raptorsquadminanger = 100,\n                raptorsquadmaxanger = 105,\n                raptorsquadweight = 2,\n                raptorsquadrarity = 'basic',\n                raptorsquadbehavior = 'berserk',\n                raptorsquadbehaviordistance = 500,\n                raptorsquadbehaviorchance = 0.75,\n            },\n        },\n        raptor_matriarch_fire = {\n            customparams = {\n                raptorcustomsquad = true,\n                raptorsquadunitsamount = 30,\n                raptorsquadminanger = 105,\n                raptorsquadmaxanger = 135,\n                raptorsquadweight = 3,\n                raptorsquadrarity = 'special',\n                raptorsquadbehavior = 'berserk',\n                raptorsquadbehaviordistance = 500,\n                raptorsquadbehaviorchance = 0.75,\n            },\n        },\n        raptor_matriarch_basic = {\n            customparams = {\n                raptorcustomsquad = true,\n                raptorsquadunitsamount = 30,\n                raptorsquadminanger = 105,\n                raptorsquadmaxanger = 135,\n                raptorsquadweight = 3,\n                raptorsquadrarity = 'special',\n                raptorsquadbehavior = 'berserk',\n                raptorsquadbehaviordistance = 500,\n                raptorsquadbehaviorchance = 0.75,\n            },\n        },\n        raptor_matriarch_acid = {\n            customparams = {\n                raptorcustomsquad = true,\n                raptorsquadunitsamount = 30,\n                raptorsquadminanger = 105,\n                raptorsquadmaxanger = 135,\n                raptorsquadweight = 3,\n                raptorsquadrarity = 'special',\n                raptorsquadbehavior = 'berserk',\n                raptorsquadbehaviordistance = 500,\n                raptorsquadbehaviorchance = 0.75,\n            },\n        },\n        raptor_matriarch_electric = {\n            customparams = {\n                raptorcustomsquad = true,\n                raptorsquadunitsamount = 30,\n                raptorsquadminanger = 105,\n                raptorsquadmaxanger = 135,\n                raptorsquadweight = 3,\n                raptorsquadrarity = 'special',\n                raptorsquadbehavior = 'berserk',\n                raptorsquadbehaviordistance = 500,\n                raptorsquadbehaviorchance = 0.75,\n            },\n            weapons = {\n                [5] = {\n                    def = '',\n                },\n            },\n        },\n        raptor_queen_veryeasy = {\n            selfdestructas = 'customfusionexplo',\n            explodeas = 'customfusionexplo',\n            maxthisunit = 3,\n            customparams = {\n                raptorcustomsquad = true,\n                i18n_en_humanname = 'Queen Degenerative',\n                i18n_en_tooltip = 'SHES A BIG ONE',\n                raptorsquadunitsamount = 2,\n                raptorsquadminanger = 70,\n                raptorsquadmaxanger = 150,\n                raptorsquadweight = 2,\n                raptorsquadrarity = 'special',\n                raptorsquadbehavior = 'berserk',\n                raptorsquadbehaviordistance = 500,\n                raptorsquadbehaviorchance = 0.75,\n            },\n            weapondefs = {\n                melee = {\n                    damage = {\n                        default = 5000,\n                    },\n                },\n                yellow_missile = {\n                    damage = {\n                        default = 1,\n                        vtol = 500,\n                    },\n                },\n                goo = {\n                    range = 500,\n                    damage = {\n                        default = 1200,\n                    },\n                },\n            },\n        },\n        corcomlvl4 = {\n            weapondefs = {\n                disintegratorxl = {\n                    damage = {\n                        commanders = 0,\n                        default = 99999,\n                        scavboss = 1000,\n                        raptorqueen = 5000,\n                    },\n                },\n            },\n        },\n    })\nend\n"
        }
    ]
}